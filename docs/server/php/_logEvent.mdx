```java
$event = new StatsigEvent("purchase");
$event->setUser($user);
$event->setValue("subscription");
$event->setMetadata(array("promotion" => "2022 deals"));
$this->statsig->logEvent($event);
```

At the end of the request, you can flush events to the log file using:

```java
$this->statsig->flush();
```
