import { LocalModeSnippet } from "../../sdks/_LocalModeSnippet.mdx";

`statsig.initialize()` takes an optional parameter `options` in addition to `sdkKey` and `user` that you can provide to customize the Statsig client. Here are the current options and we are always adding more to the list:

- **environment**: `StatsigEnvironment`, default `null`
  - An object you can use to set environment variables that apply to all of your users in the same session and will be used for targeting purposes.
  - The most common usage is to set the environment tier ('production', 'staging' or 'development'), e.g. `{ tier: 'staging' }`, and have feature gates pass/fail for specific environments.
- **disableAllLogging** `boolean` default `false`
  - Disables all logging by the SDK.  Useful in compliance situations before getting user consent.  You can then re-enable logging with `Statsig.reenableAllLogging`
- **disableCurrentPageLogging** boolean, default false.
  - By default, the sdk appends the current page for log events to the event payload to generate user journey/funnel analytics
- **loggingIntervalMillis**: `number`, default 5000 (5s), min 1000, max 60000. sdk v4.1.0+
  - How frequently to flush logs to statsig (milliseconds)
- **loggingBufferMaxSize**: `number`, default 10), min 2, max 500. sdk v4.1.0+
  - Maximum number of events to buffer before flushing events to statsig
- **disableNetworkKeepalive**: `boolean`, default `false`. sdk v4.2.0+
  - Entirely disables the keepalive flag from being appended to network requests issued by the SDK
- **api** - default https://api.statsig.com/v1/
  - The default endpoint to use for all SDK network requests. You should not override this (unless you have another API that implements the Statsig API endpoints)
  - Starting in `v4.17.0+`, if you wish to separately override the log_event endpoint only, see `eventLoggingApi`
- **overrideStableID** - `string`, default null
  - If you'd like to use your own ID in place of Statsig's stableID, then you can pass the ID as an option here.
  - Once a value is passed, the SDK will store this ID in the local storage for the browser for future use as well.
- **localMode** - `boolean`, default `false`
  - <LocalModeSnippet type="client" />
- **initTimeoutMs** - `number`, default 3000
  - This option configures the maximum time (in milliseconds) the SDK would wait for the network request made by `initialize()` to respond before it resolves.
  - If the SDK resolves before the network request has completed due to the timeout, it will continue work with local overrides, cached values, and then default values set in code.
- **disableErrorLogging** - `boolean`, default `false` (added in `v4.11.0`)
  - By default, the SDK auto logs javascript errors to Statsig. This will be connected with the metrics and pulse views to show the impact of new features on key error metrics
  - See also: [Auto-generated Metrics](/metrics/autogenerated)
- **disableAutoMetricsLogging** - `boolean`, default `false` (added in `v4.13.0`)
  - By default, the SDK auto logs javascript performance metrics to Statsig. This will be connected with the metrics and pulse views to show the impact of new features on key performance metrics
  - See also: [Auto-generated Metrics](/metrics/autogenerated)
- **initializeValues?** `Record<string, any> | null`, default `null` (supported in `v4.13.0+`)
  - Provide the `initializeResponse` values directly to the Javascript SDK to synchronously initialize the client. You can generate these values from a Statsig Server SDK like the [NodeJS Server SDK](/server/nodejsServerSDK#bootstrap).
- **eventLoggingApi?** `string`, default `'https://events.statsigapi.net/v1/` (supported in `v4.17.0+`)
  - The SDK will hit different endpoints for `initialize` to evaluate gates and for `logEvent` to log event data. The `api` option controls the evaluation endpoint, and `eventLoggingApi` controls the event logging endpoint.
- **prefetchUsers?** `StatsigUser[]` | null, default null (supported in `v4.20.0+`)
  - An array of additional StatsigUser objects to be fetched during the `statsig.initialize` call. A max of 5 users is enforced, if more than 5 users are provided, the 5 users at the start of the array will be used.
- **disableLocalStorage?** `boolean`, default `false` (supported in `v4.21.0+`)
  - Completely disable the use of local storage for the lifecycle of this `initialize` -> `shutdown`. The only access to local storage will be to clear out existing keys when statsig is `shutdown`
- **initCompletionCallback?** `(initDurationMs: number, success: boolean, message: string | null) => void`, default null
  - A callback that's invoked whenever initialization has completed.
- **updateUserCompletionCallback?** `(durationMs: number, success: boolean, message: string | null) => void`, default null
  - A callback that's invoked whenever an updateUser call has completed.
- **fetchMode?** `network-only | cache-or-network`, default `network-only`
  - Changes the behavior of updateUser calls. See [Fetch Mode](#fetch-mode-) for more details.
- **disableDiagnosticsLogging?** `boolean?`, default `false`
  - Disables non-core diagnostics logging.  Some diagnostics logging is required for us to maintain our service, but you can disable optional diagnostic data.
- **initRequestRetries** `number`, default `3`
  - The number of times to retry failed requests to initialize for the user.  If the initialize timeout is hit first, the request may still retry and save the updated values to cache for future sessions.
- **ignoreWindowUndefined** `boolean`, default `false`
  - When the global `window` object is undefined, the sdk will not issue network requests.  This prevents additional requests from the SDK when using server side rendering or running in a non-browser environment.  To disable that, set this to `true`.
- **disableHashing** `boolean` default `false`
  - By default, the `/initialize` request will return a hashed gate/experiment/layer/config name, rather than the plain text.  To disable, reach out to statsig support and then set this option to `true`.
- **logLevel** default `NONE`
```
export enum LogLevel {
  NONE = 'NONE',
  INFO = 'INFO',
  DEBUG = 'DEBUG',
  WARN = 'WARN',
  ERROR = 'ERROR',
}
```
  - the level of logs to output to the console or via a custom logger.
- **logger**
```
export interface LoggerInterface {
  error(message?: any, ...optionalParams: any[]): void;
  info(message?: any, ...optionalParams: any[]): void;
  debug?(message?: any, ...optionalParams: any[]): void;
  warn(message?: any, ...optionalParams: any[]): void;
}
```
  - A custom logger for redirecting output from stdout.
- **evaluationCallback** `(args: EvaluationCallbackParams) => void | null` default `null`
```
evaluationCallback: (args: EvaluationCallbackParams) => void;

export type EvaluationCallbackParams =
  | { type: 'gate'; gate: FeatureGate }
  | { type: 'config' | 'experiment'; config: DynamicConfig }
  | { type: 'layer'; layer: Layer };
```
  - A callback function invoked for any evaluation, including feature gates, dynamic configs, experiments, and layers. It provides a mechanism to hook into the evaluation lifecycle for custom analytics or logging purposes.
