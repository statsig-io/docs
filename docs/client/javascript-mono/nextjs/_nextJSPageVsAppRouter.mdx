import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

## Manual Installation

Statsig supports both [Page Router](https://nextjs.org/docs/pages) & [App Router](https://nextjs.org/docs/app), with some differences in integration patterns.

<Tabs
  defaultValue="app-router"
  groupId="router-choice"
  values={[
    {label: 'App Router', value: 'app-router'},
    {label: 'Page Router', value: 'page-router'},
  ]}>




{/* App Router */}


  <TabItem value="app-router">
First, add the keys to your .env.local file:
```bash
# .env.local

# the NEXT_PUBLIC_ prefix is required for this to be available on the client side
NEXT_PUBLIC_STATSIG_CLIENT_KEY=client-<REPLACE_WITH_YOUR_CLIENT_KEY>
STATSIG_SERVER_KEY=secret-<REPLACE_WITH_YOUR_SERVER_KEY>
```

For App Router, install the @statsig/next package:

<Tabs
  defaultValue="npm"
  groupId="package-manager-choice"
  values={[
    {label: 'NPM', value: 'npm'},
    {label: 'Yarn', value: 'yarn'},
    {label: 'PNPM', value: 'pnpm'},
  ]}>


<TabItem value="npm">
```bash
npm i @statsig/next
```
</TabItem>

<TabItem value="yarn">
```bash
yarn add @statsig/next
```
</TabItem>

<TabItem value="pnpm">
```bash
pnpm add @statsig/next
```
</TabItem>

</Tabs>

The \<StatsigBootstrapProvider\> creates a Statsig client instance under the hood, without making a blocking network request this will keep your app speedy and is recommended for most users. If you need more control over your setup, our [Bootstrapping](#client-bootstrapping-recommended) and [React](/client/javascript-sdk/react) docs can provide more guidance.

Add this component around the content in your root `layout.tsx` file:

```tsx
// app/layout.tsx

import { StatsigBootstrapProvider } from "@statsig/next"

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {

  const user = {
    userID: "user-123", // add additional parameters as needed
  };
  return (
    <html lang="en">
      <body>
        <StatsigBootstrapProvider
          user={user}
          clientKey={process.env.NEXT_PUBLIC_STATSIG_CLIENT_KEY}
          serverKey={process.env.STATSIG_SERVER_KEY}
        >
          {children}
        </StatsigBootstrapProvider>
      </body>
    </html>
  );
}
```


  </TabItem>






{/* Page Router */}

    <TabItem value="page-router">

First, add the keys to your .env.local file:
```bash
# .env.local

# the NEXT_PUBLIC_ prefix is required for this to be available on the client side
NEXT_PUBLIC_STATSIG_CLIENT_KEY=client-<REPLACE_WITH_YOUR_CLIENT_KEY>
```

Next, for Page Router, install the @statsig/react-bindings package:

<Tabs
  defaultValue="npm"
  groupId="package-manager-choice"
  values={[
    {label: 'NPM', value: 'npm'},
    {label: 'Yarn', value: 'yarn'},
    {label: 'PNPM', value: 'pnpm'},
  ]}>


<TabItem value="npm">
```bash
npm i @statsig/react-bindings @statsig/web-analytics
```
</TabItem>

<TabItem value="yarn">
```bash
yarn add @statsig/react-bindings @statsig/web-analytics
```
</TabItem>

<TabItem value="pnpm">
```bash
pnpm add @statsig/react-bindings @statsig/web-analytics
```
</TabItem>

</Tabs>

To integrate Statsig into your Page Router app you can add the `StatsigProvider` to your `_app.tsx` file. 

There is a [full example](https://github.com/statsig-io/js-client-monorepo/tree/main/samples/next-js-pages-router-sample) in the samples directory of the javascript sdk.

```tsx
// pages/_app.tsx

import type { AppProps } from "next/app";

import {
  LogLevel,
  StatsigProvider,
} from "@statsig/react-bindings";
import { StatsigAutoCapturePlugin } from '@statsig/web-analytics';

export default function App({ Component, pageProps }: AppProps) {
  return (
    <StatsigProvider 
      sdkKey={process.env.NEXT_PUBLIC_STATSIG_CLIENT_KEY!}
      user={{ userID: "a-user" }}
      options={{
        plugins: [ new StatsigAutoCapturePlugin() ],
      }}>
      <Component {...pageProps} />
    </StatsigProvider>
  );
}
```

  </TabItem>
</Tabs>




{/* Rest */}

See the [User (StatsigUser)](/concepts/user) doc for more info on the user property. From here, you're ready to start checking gates & experiments and sending events in any sub-file of layout.tsx!
