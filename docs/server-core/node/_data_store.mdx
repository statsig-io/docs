## Data Store Interface

The `DataStore` interface allows you to implement custom storage for Statsig configurations.

### Interface Methods

```typescript
export interface DataStore {
  initialize?: () => Promise<void>;
  shutdown?: () => Promise<void>;
  get?: (key: string) => Promise<DataStoreResponse>;
  set?: (key: string, value: string, time?: number) => Promise<void>;
  supportPollingUpdatesFor?: (key: string) => Promise<boolean>;
}

export interface DataStoreResponse {
  result?: string;
  time?: number;
}
```

### Example Implementation

```typescript
import { DataStore, DataStoreResponse } from '@statsig/statsig-node-core';
import Redis from 'ioredis';

class RedisDataStore implements DataStore {
  private client: Redis;
  
  constructor(options?: Redis.RedisOptions) {
    this.client = new Redis(options);
  }
  
  async initialize(): Promise<void> {
    // Ensure connection is established
    await this.client.ping();
  }
  
  async shutdown(): Promise<void> {
    await this.client.quit();
  }
  
  async get(key: string): Promise<DataStoreResponse> {
    const value = await this.client.get(key);
    if (!value) {
      return {};
    }
    
    // Get the time if stored separately
    const timeKey = `${key}:time`;
    const timeStr = await this.client.get(timeKey);
    const time = timeStr ? parseInt(timeStr, 10) : undefined;
    
    return {
      result: value,
      time
    };
  }
  
  async set(key: string, value: string, time?: number): Promise<void> {
    const pipeline = this.client.pipeline();
    pipeline.set(key, value);
    
    if (time !== undefined) {
      const timeKey = `${key}:time`;
      pipeline.set(timeKey, time.toString());
    }
    
    await pipeline.exec();
  }
  
  async supportPollingUpdatesFor(key: string): Promise<boolean> {
    // Example: support polling for specific keys
    return key.startsWith('/v2/download_config_specs');
  }
}
```

To use a custom data store:

```typescript
import { Statsig, StatsigOptions } from '@statsig/statsig-node-core';

// Create your custom data store
const dataStore = new RedisDataStore();

// Pass it to StatsigOptions
const options = new StatsigOptions();
options.dataStore = dataStore;

// Initialize Statsig with options
const statsig = new Statsig("secret-key", options);
await statsig.initialize();
```
