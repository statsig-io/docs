---
title: Migrating from Legacy Go SDK to Go Core
sidebar_label: Migration Guide
keywords:
  - owner:brock
last_update:
  date: 2025-07-31
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

# Migrating from Legacy Go SDK to Go Core

This guide will help you migrate from the legacy Go Server SDK to the new Go Core SDK. The Go Core SDK offers significant performance improvements and new features, as it's built on a shared Rust core library.

## Why Migrate?

- **Performance**: Go Core achieves faster evaluation times and lower CPU consumption, making it more efficient than the legacy SDK.
- **New Features**: Access to Parameter Stores
- **Future Support**: All new features and improvements will only be available in Go Core
- **Maintenance**: The legacy Go SDK is in maintenance mode and will only receive critical bug fixes

## Installation Differences

### Legacy Go SDK

```go
go get github.com/statsig-io/go-sdk
```

Or, add a dependency in go.mod:

```go
require (
  github.com/statsig-io/go-sdk v1.26.0
)
```

### Go Core SDK

Go Core requires the new package and additional setup:

```go
go get github.com/statsig-io/statsig-server-core/statsig-go@latest
```

Or, add a dependency in go.mod:

```go
require (
  github.com/statsig-io/statsig-server-core/statsig-go v1.37.0
)
```

**Additional Setup Required:**

Run the following commands to install the necessary binaries and set environment variables:

```bash
go install github.com/statsig-io/statsig-server-core/statsig-go/cmd/post-install@latest
post-install
```

:::note 
You may run into an error with running post-install. Run the following commands so the shell is able to find the post-install executable: 

```bash
export PATH="$PATH:$(go env GOPATH)/bin"
source ~/.zshrc
```

And then try running post-install again.
:::

The system should prompt you to set the environment variables using a statsig.env file that was generated during the post-install script.
Follow the instructions to set the environment variables.

```bash
# E.g. - the script will look something like this:
source /Users/home-dir/.statsig_env
```

## API Differences

### Key Package and Import Changes

| Feature | Legacy Go SDK | Go Core SDK |
|---------|---------------|-------------|
| Import | `github.com/statsig-io/go-sdk` | `github.com/statsig-io/statsig-server-core/statsig-go/src` |
| Main Package | `statsig` | `statsig` |
| Initialization | Static `statsig.Initialize()` | Instance-based `statsig.Initialize()` |
| Options | `&Options{}` | `statsig.NewStatsigOptionsBuilder().With*().Build()` |

### Initialization

<Tabs
  groupId="sdk-comparison"
  defaultValue="legacy"
  values={[
    {label: 'Legacy Go SDK', value: 'legacy'},
    {label: 'Go Core SDK', value: 'core'},
  ]}>
  <TabItem value="legacy">

```go
import (
  statsig "github.com/statsig-io/go-sdk"
)

statsig.Initialize("server-secret-key")

// Or, if you want to initialize with certain options
statsig.InitializeWithOptions("server-secret-key", &Options{Environment: Environment{Tier: "staging"}})
```

  </TabItem>
  <TabItem value="core">

```go
import (
    statsig "github.com/statsig-io/statsig-server-core/statsig-go/src"
)

// Create options (all optional)
options := statsig.NewStatsig().
    WithOutputLogLevel("DEBUG").
    WithSpecsSyncIntervalMs(10000).
    WithEventLoggingFlushIntervalMs(10000).
    Build()

// Create and initialize the SDK
s, err := statsig.NewStatsig("server-secret-key", options)
if err != nil {
    // Handle error
}

// Initialize the SDK
s.Initialize()

// Or if you want to initialize with details
details, err := s.InitializeWithDetails()
if err != nil {
    // Handle error
}
```

  </TabItem>
</Tabs>

### Checking Gates

<Tabs
  groupId="sdk-comparison"
  defaultValue="legacy"
  values={[
    {label: 'Legacy Go SDK', value: 'legacy'},
    {label: 'Go Core SDK', value: 'core'},
  ]}>
  <TabItem value="legacy">

```go
import (
  statsig "github.com/statsig-io/go-sdk"
)

user := statsig.User{
  UserID: "123",
  Email: "test@example.com",
}

// Check if a gate is enabled
enabled := statsig.CheckGate(user, "my_gate")
```

  </TabItem>
  <TabItem value="core">

```go
import (
    statsig "github.com/statsig-io/statsig-server-core/statsig-go/src"
)

user := statsig.StatsigUser{
    UserID: "123",
    Email: "test@example.com",
}

// Check if a gate is enabled
enabled := s.CheckGate(user, "my_gate")
```

  </TabItem>
</Tabs>

### Getting Dynamic Configs

<Tabs
  groupId="sdk-comparison"
  defaultValue="legacy"
  values={[
    {label: 'Legacy Go SDK', value: 'legacy'},
    {label: 'Go Core SDK', value: 'core'},
  ]}>
  <TabItem value="legacy">

```go
import (
  statsig "github.com/statsig-io/go-sdk"
)

user := statsig.User{
  UserID: "123",
  Email: "test@example.com",
}

// Get a dynamic config
config := statsig.GetConfig(user, "my_config")
value := config.Get("key", "default_value")
```

  </TabItem>
  <TabItem value="core">

```go
import (
    statsig "github.com/statsig-io/statsig-server-core/statsig-go/src"
)

user := statsig.StatsigUser{
    UserID: "123",
    Email: "test@example.com",
}

// Get a dynamic config
config := s.GetDynamicConfig(user, "my_config")
value := config.Get("key", "default_value")
```

  </TabItem>
</Tabs>

### Getting Experiments

<Tabs
  groupId="sdk-comparison"
  defaultValue="legacy"
  values={[
    {label: 'Legacy Go SDK', value: 'legacy'},
    {label: 'Go Core SDK', value: 'core'},
  ]}>
  <TabItem value="legacy">

```go
import (
  statsig "github.com/statsig-io/go-sdk"
)

user := statsig.User{
  UserID: "123",
  Email: "test@example.com",
}

// Get an experiment
experiment := statsig.GetExperiment(user, "my_experiment")
value := experiment.Get("key", "default_value")
```

  </TabItem>
  <TabItem value="core">

```go
import (
    statsig "github.com/statsig-io/statsig-server-core/statsig-go/src"
)

user := statsig.StatsigUser{
    UserID: "123",
    Email: "test@example.com",
}

// Get an experiment
experiment := s.GetExperiment(user, "my_experiment")
value := experiment.Get("key", "default_value")
```

  </TabItem>
</Tabs>

### Logging Events

<Tabs
  groupId="sdk-comparison"
  defaultValue="legacy"
  values={[
    {label: 'Legacy Go SDK', value: 'legacy'},
    {label: 'Go Core SDK', value: 'core'},
  ]}>
  <TabItem value="legacy">

```go
import (
  statsig "github.com/statsig-io/go-sdk"
)

user := statsig.User{
  UserID: "123",
  Email: "test@example.com",
}

// Log an event
statsig.LogEvent(user, "button_clicked", "button_id", "submit")
```

  </TabItem>
  <TabItem value="core">

```go
import (
    statsig "github.com/statsig-io/statsig-server-core/statsig-go/src"
)

user := statsig.StatsigUser{
    UserID: "123",
    Email: "test@example.com",
}

// Log an event
s.LogEvent(user, "button_clicked", "button_id", "submit")
```

  </TabItem>
</Tabs>

## Key Migration Steps

1. **Update Dependencies**: Change from `github.com/statsig-io/go-sdk` to `github.com/statsig-io/statsig-server-core/statsig-go`

2. **Run Post-Install**: Execute the post-install script to set up environment variables

3. **Update Imports**: Change your import statement to use the new package

4. **Convert to Instance-Based API**: Replace static method calls with instance method calls

5. **Update User Type**: Change from `statsig.User` to `statsig.StatsigUser`

6. **Update Method Names**: 
   - `statsig.CheckGate()` → `s.CheckGate()`
   - `statsig.GetConfig()` → `s.GetDynamicConfig()`
   - `statsig.GetExperiment()` → `s.GetExperiment()`
   - `statsig.LogEvent()` → `s.LogEvent()`

## New Features Available in Go Core

- **Parameter Stores**: Access to dynamic parameter management
- **CMAB (Contextual Multi-Armed Bandits)**: Advanced experimentation capabilities
- **Observability Client**: Enhanced monitoring and debugging
- **Improved Performance**: 5-10x faster evaluation times
- **Better Error Handling**: More robust error management

## Need Help?

If you encounter any issues during migration, please reach out to us [in Slack](https://statsig.com/slack) or check our [GitHub repository](https://github.com/statsig-io/statsig-server-core) for the latest updates and examples.
