---
sidebar_label: Device-level Experiments
title: Build your first Device-level Experiment
---

When a user's identity is unknown and a user ID can’t be used for randomization, Statsig's _device-level_ experiments allow you to use a stable ID stored on the user's device. This stable ID is automatically generated by Statsig and stored in the user's local storage, allowing you to continue running experiments seamlessly without relying on user logins.

### How Device-level Experiments Work
- A **Stable ID** is a unique identifier generated by Statsig and saved in the device's local storage.
- This ID is used to evaluate experiments when a user ID is unavailable.
- Once generated, the stable ID remains fixed across sessions unless the local storage is cleared.

Setting up a device-level experiment is similar to creating a traditional user-level experiment, with the key difference being that the **ID Type** is set to **Stable ID**.

---

## Overview of Steps to Set Up a Device-level Experiment

To create and implement a device-level experiment, you'll follow three main steps:

1. **Set up your experiment in the Statsig Console**: In this step, you will create and configure the experiment, including defining the parameters and deciding on the allocation.
2. **Integrate the experiment with the client SDK**: After setting up the experiment, you'll configure the Statsig SDK in your client-side application to evaluate the experiment using a stable ID.
3. **(Optional) Update user information post-login**: If your users log in after the experiment begins, you can update their information to run user ID-based experiments without affecting the ongoing device-level experiment.

With this overview, let’s dive into the specific steps.

---

## Step 1: Setting Up a Device-level Experiment in the Statsig Console

This section covers how to create and configure a new device-level experiment in the Statsig Console.

1. **Log in to the Statsig Console**  
   Head to the [Statsig Console](https://console.statsig.com/), and navigate to **Experiments+** from the left-hand side.

2. **Create a New Experiment**  
   - Click the **Create** button.
   - Enter a name and description for your experiment.
   - Check the box for **Use Stable ID** to specify that this is a device-level experiment.
   - Click **Create**.

   ![Experiment Creation Screen](https://user-images.githubusercontent.com/74584483/175827163-7669bd8d-ee7f-49af-943a-b1f71d95428e.png)

   :::tip
   The **Stable ID** is crucial for experiments where user login isn't available. Make sure to use this option when you're conducting tests before user authentication.
   :::

3. **Configure the Experiment**  
   - Fill out the **Scorecard** with your experiment’s hypothesis and primary/secondary metrics.
   - Under the **Groups** section, define the parameters you wish to experiment on. For example, add a boolean parameter such as `enabled`.

   ![Groups Setup Screen](https://user-images.githubusercontent.com/74584483/175827265-53e18e66-14ce-4d8e-a409-201bd6191615.png)

   :::note
   **Experiment Parameters**  
   When adding parameters like `enabled`, keep in mind that boolean flags are simple but effective ways to start testing new features.
   :::

4. **Adjust Allocation (Optional)**  
   By default, the experiment is allocated to 100% of your users. You can modify this under the **Allocation** panel to start with a smaller percentage of users and gradually increase as needed.

   ![Allocation Panel](https://user-images.githubusercontent.com/1315028/138972419-b7c42f97-29ec-407e-851f-3301130a21c5.png)

   :::tip
   Consider starting your experiment with a smaller allocation (e.g., 10%) to test for early issues before ramping up to 100%.
   :::

5. **Save and Start**  
   Once you're satisfied with the setup:
   - Click **Save** in the top-right corner.
   - When you're ready to begin the experiment, hit the **Start** button to roll it out to production users.

---

## Step 2: Implementing Your Experiment Configuration in the Client SDK

Now that your experiment is set up, this step covers how to configure the SDK in your application to implement the experiment.

1. **Install the Statsig Client SDK**  
   To use Statsig on the client-side, install the SDK for your platform. For example, use the [JavaScript SDK](https://docs.statsig.com/client/javascript-sdk) to get started.

   > To use a different SDK (iOS, Android, etc.), visit the [SDK documentation](https://docs.statsig.com/client/overview) and select your platform.

2. **Initialize the SDK without a User ID**  
   Since this is a device-level experiment, a user ID isn’t required for initialization. Pass relevant attributes such as IP address, app version, or custom fields.

   ```jsx
   const user = {
       ip: "192.168.1.101",
       appVersion: "1.0.0",
       custom: {
           promoCode: "New30Off",
       }
   };

   const client = new StatsigClient(sdkKey, user, { environment: { tier: "production" } });

   await client.initializeAsync();
   ```

   - The SDK will automatically generate a stable ID for the user and use it to evaluate experiments.

   :::tip
   You can include any additional context like the user's IP address or app version to further customize your experiment targeting.
   :::

---

## Step 3: Updating User Information for Signed-in Users (Optional)

This optional step explains how to update user information after login, so they can be evaluated for user ID-based experiments.

Once a user creates an account or logs in, you can update their information using the `updateUserAsync` method. This will ensure that the user is correctly evaluated for any user ID-based experiments or feature gates. **Note:** This won’t affect the device-level experiments already running.

:::note Optional
After login, you can update the user object with new attributes like `userID` and `email` to evaluate user-level experiments.
:::

```jsx
user.userID = realUserID;
user.email = signUpEmail;

await client.updateUserAsync(user);
```

---

## Troubleshooting

Here are some common issues you might encounter:

- **SDK fails to initialize:**  
   Ensure that you've used the correct SDK key and that the user object (even without a user ID) includes required fields like `ip` and `appVersion`.

- **Stable ID not persisting across sessions:**  
   Verify that local storage isn’t being cleared between sessions. This can occur in private browsing modes or if your app’s storage settings are too aggressive.

---

<!--
## Next Steps

Here are some additional guides to help you continue working with Statsig:

- [How to Analyze Experiment Results](#)
- [Best Practices for Running Experiments](#)
- [Running Experiments with Logged-in Users](#)
- [Feature Gates and Dynamic Configurations](#)

---
-->
