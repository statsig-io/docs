<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-statsig-warehouse-native/connecting-your-warehouse/athena" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Athena Connection | Statsig Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.statsig.com/img/docs_meta_q3_2023.png"><meta data-rh="true" name="twitter:image" content="https://docs.statsig.com/img/docs_meta_q3_2023.png"><meta data-rh="true" property="og:url" content="https://docs.statsig.com/statsig-warehouse-native/connecting-your-warehouse/athena"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Athena Connection | Statsig Docs"><meta data-rh="true" name="description" content="Athena Warehouse Native Overview"><meta data-rh="true" property="og:description" content="Athena Warehouse Native Overview"><meta data-rh="true" name="keywords" content="owner:vm"><link data-rh="true" rel="icon" href="/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://docs.statsig.com/statsig-warehouse-native/connecting-your-warehouse/athena"><link data-rh="true" rel="alternate" href="https://docs.statsig.com/statsig-warehouse-native/connecting-your-warehouse/athena" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.statsig.com/statsig-warehouse-native/connecting-your-warehouse/athena" hreflang="x-default"><script>!function(e,t,n,a){e[a]=e[a]||[],e[a].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var r=t.getElementsByTagName(n)[0],o=t.createElement(n);o.async=!0,o.src="https://www.googletagmanager.com/gtm.js?id=GTM-NRDCWNF";var c=t.querySelector("[nonce]");c&&o.setAttribute("nonce",c.nonce||c.getAttribute("nonce")),r.parentNode.insertBefore(o,r)}(window,document,"script","dataLayer")</script>
<script async defer="defer" src="https://www.googletagmanager.com/gtag/js?id=G-EM5RHE1RHW"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-EM5RHE1RHW")</script>
<script src="https://www.statsig.com/js/single-id.js" onload="setupStatsigSingleId(&#39;docs&#39;)"></script>
<script src="https://cdn.jsdelivr.net/npm/@statsig/js-client@3/build/statsig-js-client+session-replay+web-analytics.min.js?apikey=client-XlqSMkAavOmrePNeWfD0fo2cWcjxkZ0cJZz64w7bfHX"></script>
<script>window.statsigTier="production"</script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&amp;display=swap">
<script src="/js/rapidoc-min.js"></script>
<script src="https://cdn.koala.live/v1/daniel/sdk.js"></script>
<script src="/js/koala.js"></script>

<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous">
<script id="kapa-widget-script" src="https://widget.kapa.ai/kapa-widget.bundle.js" defer="defer" data-website-id="418990dd-0615-4ba7-b52f-3ab8c1af4e79" data-project-name="Statsig" data-project-color="#1963d2" data-project-logo="https://statsig.com/images/sections/multi-products-v2/menu-statsig.svg" data-scale-factor="1.2" data-modal-lock-scroll="false" data-modal-image="https://raw.githubusercontent.com/statsig-io/docs/f263b88116852d7c7174b82df1b528609a1ea073/static/img/favicon.svg" data-button-hide="true" data-modal-override-open-id="ask-ai-navbar-button" data-modal-disclaimer="Statsig Docs AI answers questions using documentations, API references, blogs, and videos. Responses are AI-generated, and we encourage you to rate them to let us know what you think!" data-answer-feedback-info-text="All feedback is reviewed by the Statsig team." data-search-mode-default="true" data-search-mode-enabled="true" data-modal-open-on-command-k="true" data-modal-command-k-search-mode-default="true" data-modal-search-input-placeholder="Search Statsig docs..." data-search-include-source-names="[&quot;Documentation&quot;]" data-search-show-ask-ai-cta="false" data-search-result-link-target="_self" data-modal-full-screen-on-mobile="false" data-kapa-branding-text="Powered by kapa.ai and Statsig" data-question-text-color="#1963d2"></script><link rel="stylesheet" href="/assets/css/styles.1d9de8a2.css">
<script src="/assets/js/runtime~main.deeb172e.js" defer="defer"></script>
<script src="/assets/js/main.54c97fc8.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/2025_Statsig_Logo_Black.svg" alt="Statsig" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/2025_Statsig_Logo_White.svg" alt="Statsig" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" sidebarid="product-docs" id="product-docs" href="/">Product Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" id="warehouse" href="/statsig-warehouse-native/introduction">Warehouse Native</a><a class="navbar__item navbar__link" id="sdk-api" href="/sdks/quickstart">SDKs &amp; APIs</a></div><div class="navbar__items navbar__items--right"><button id="ask-ai-navbar-button" class="ask-ai-search-button"><svg class="ask-ai-search-icon" width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="ask-ai-search-text">Search with Ask AI</span><span class="ask-ai-shortcut"><kbd>Ctrl</kbd><kbd>K</kbd></span></button><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Introduction</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/statsig-warehouse-native/introduction">About Warehouse Native</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/statsig-warehouse-native/guides/quick-start">WHN Quickstart</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/statsig-warehouse-native/native-vs-cloud">WHN vs Cloud</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Guides</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/statsig-warehouse-native/guides/running_a_poc">POCs &amp; Evaluations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/statsig-warehouse-native/guides/checklist">Debugging</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/statsig-warehouse-native/guides/forwarded-data">Forwarded Data</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active">Warehouse Integrations</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/statsig-warehouse-native/guides/connect">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/statsig-warehouse-native/connecting-your-warehouse/snowflake">Snowflake</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/statsig-warehouse-native/connecting-your-warehouse/athena">Athena</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/statsig-warehouse-native/connecting-your-warehouse/bigquery">BigQuery</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/statsig-warehouse-native/connecting-your-warehouse/databricks">Databricks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/statsig-warehouse-native/connecting-your-warehouse/redshift">Redshift</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/statsig-warehouse-native/connecting-your-warehouse/trino">Trino [Beta]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/statsig-warehouse-native/connecting-your-warehouse/clickhouse">Clickhouse [Beta]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/statsig-warehouse-native/connecting-your-warehouse/fabric">Fabric [Beta]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/statsig-warehouse-native/connecting-your-warehouse/other">Other Warehouses</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Warehouse Management</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/statsig-warehouse-native/data-privacy">Egress, Privacy, &amp; Storage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/statsig-warehouse-native/warehouse-management/storage">Warehouse Storage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/statsig-warehouse-native/guides/costs">Warehouse Costs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/statsig-warehouse-native/guides/best-practices">Best Practices</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Data &amp; Semantic Layer</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/statsig-warehouse-native/configuration/data-and-semantic-layer">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/statsig-warehouse-native/configuration/metric-sources">Metric Sources</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/statsig-warehouse-native/configuration/metrics">Metrics</a><button aria-label="Expand sidebar category &#x27;Metrics&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/statsig-warehouse-native/configuration/metric-examples">Metric Examples</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/statsig-warehouse-native/features/cohort-metrics">Cohort Metrics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/statsig-warehouse-native/configuration/dimensional-analysis">Dimension Analysis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/statsig-warehouse-native/configuration/assignment-sources">Assignment Sources</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/statsig-warehouse-native/configuration/entity-properties">Entity Properties</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/statsig-warehouse-native/configuration/qualifying-events">Qualifying Events</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/statsig-warehouse-native/configuration/tags-and-teams">Metric Management</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/statsig-warehouse-native/configuration/console-api">Programmatic Management</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Experiment Analysis</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/statsig-warehouse-native/features/understanding-experiments">Understanding Experiments</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/statsig-warehouse-native/features/experiment-options">Configuration</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/statsig-warehouse-native/features/configure-an-experiment">Setup</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/statsig-warehouse-native/features/reloads">Loading Results</a><button aria-label="Expand sidebar category &#x27;Loading Results&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/pulse/read-pulse-whn">Interpreting Results</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/statsig-warehouse-native/features/statistics">Statistics</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/experiments-plus/cure">CURE</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/experimentation/meta-analysis-whn">Meta-Analysis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/statsig-warehouse-native/features/autotune">Autotune</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/statsig-warehouse-native/features/use-case">Practical Use Cases</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Other Features</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/statsig-warehouse-native/features/mex-on-warehouse-native">Metrics Explorer on WHN</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/experiments-plus/geotests">Geotests</a><button aria-label="Expand sidebar category &#x27;Geotests&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/statsig-warehouse-native/features/other-features">Other Features</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Warehouse Integrations</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Athena</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Athena Connection</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="athena-warehouse-native-overview">Athena Warehouse Native Overview<a href="#athena-warehouse-native-overview" class="hash-link" aria-label="Direct link to Athena Warehouse Native Overview" title="Direct link to Athena Warehouse Native Overview">​</a></h2>
<p>To set up connection with Athena, Statsig needs the following</p>
<ul>
<li>An S3 Bucket</li>
<li>A Glue Database for staging</li>
<li>An S3 Query Result Location</li>
<li>Athena Access Permissions (can be via an AWS Role or an AWS User)</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="setup-statsig-staging-structure">Setup Statsig Staging Structure<a href="#setup-statsig-staging-structure" class="hash-link" aria-label="Direct link to Setup Statsig Staging Structure" title="Direct link to Setup Statsig Staging Structure">​</a></h2>
<ol>
<li>Create or choose an S3 Bucket. Statsig will use a subfolder inside this S3 Bucket to store all staging data. Statsig will have write-access to ONLY this scoped subfolder of this S3 Bucket (specifically labeled <code>Statsig S3 Folder</code> in your Data Connection settings in the Statsig Console).</li>
<li>Create or choose a Glue Database (can be <code>default</code>). Statsig will use this as a staging Database to create and manage tables. Statsig will be able to drop/create tables within ONLY this staging Database.</li>
<li>Choose an S3 Query Result Location folder within the S3 Bucket. This S3 location will act as the Output Location for <code>SELECT</code> queries run in your Athena Warehouse. This Location can be given either:<!-- -->
<ul>
<li>Explicitly as an S3 location (ex: <code>s3://my_bucket/my_query_results_folder/</code>)</li>
<li>OR as part of a setting within an Athena Workgroup<!-- -->
<ul>
<li>NOTE that your workgroup must have the &#x27;Query result location&#x27; field populated accordingly</li>
</ul>
</li>
</ul>
</li>
<li>Add this information, along with your AWS Region, to your Data Connection settings in the Statsig Console.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="grant-permissions-to-statsig">Grant Permissions to Statsig<a href="#grant-permissions-to-statsig" class="hash-link" aria-label="Direct link to Grant Permissions to Statsig" title="Direct link to Grant Permissions to Statsig">​</a></h2>
<p>You need to grant some permissions for Statsig from your AWS console in order for us to access your Athena data. Statsig requires</p>
<ul>
<li>READ on any tables and data you are using for experimentation</li>
<li>USAGE/WRITE on a Statsig-specific schema we&#x27;ll use to materialize temp tables and results. This enables us to cache data and perform incremental loads. You will specify which Glue Database and S3 Bucket to use, and we will create a Statsig S3 Subfolder to do our staging operations</li>
</ul>
<ol>
<li>
<p>Create an AWS IAM Policy to house the required access permissions</p>
<p>This policy will house the permissions required for Statsig to access your warehouse. You will be able to return to this policy later and edit it as needed.</p>
<ul>
<li>In your AWS IAM Dashboard, select the Policies page under the Access Management tab</li>
<li>Click &#x27;Create policy&#x27;</li>
<li>Switch the Policy Editor type from &#x27;Visual&#x27; to &#x27;JSON&#x27;</li>
<li>Copy and paste the below JSON template block</li>
<li>Replace the placeholders with your setup information and the Statsig S3 Folder (specified in your Statsig project&#x27;s Data Connection settings)</li>
<li>Specify all S3 locations and Glue Databases of any read-only assignment/metric data</li>
<li>Remove the descriptor comments</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;Version&quot;: &quot;2012-10-17&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;Statement&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // Allow Statsig to recognize your staging S3 Bucket</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;Effect&quot;: &quot;Allow&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;Action&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;s3:ListBucket&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;s3:GetBucketLocation&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;s3:GetObject&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;s3:PutObject&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;s3:DeleteObject&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;Resource&quot;: &quot;arn:aws:s3:::__S3_BUCKET__&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // Allow Statsig to read events/exposures data from your S3 Buckets</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;Effect&quot;: &quot;Allow&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;Action&quot;: &quot;s3:GetObject&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;Resource&quot;: &quot;arn:aws:s3:::__PATH_TO_YOUR_READONLY_DATA__/*&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // Allow Statsig to read events/exposures tables from your Glue Databases</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;Effect&quot;: &quot;Allow&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;Action&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;glue:GetTable&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;glue:GetDatabase&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;glue:GetDatabases&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;glue:GetPartition&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;glue:GetPartitions&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;Resource&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;arn:aws:glue:__REGION__:__YOUR_AWS_ACCOUNT_ID__:database/__YOUR_READONLY_DATABASE__&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;arn:aws:glue:__REGION__:__YOUR_AWS_ACCOUNT_ID__:table/__YOUR_READONLY_DATABASE__/*&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // Allow Statsig to read/write/use data and tables in an isolated staging S3 subfolder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;Effect&quot;: &quot;Allow&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;Action&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;s3:GetObject&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;s3:PutObject&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;s3:DeleteObject&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;athena:StartQueryExecution&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;athena:GetQueryResults&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;athena:GetQueryExecution&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;athena:StopQueryExecution&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;glue:GetTable&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;glue:CreateTable&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;glue:UpdateTable&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;glue:DeleteTable&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;glue:GetPartition&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;glue:GetPartitions&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;glue:CreatePartition&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;glue:UpdatePartition&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;glue:DeletePartition&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;glue:BatchCreatePartition&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;glue:BatchDeletePartition&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;glue:GetDatabase&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;glue:GetDatabases&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;Resource&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;arn:aws:s3:::__S3_BUCKET__/__PATH_TO_S3_QUERY_RESULTS_FOLDER__/*&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;arn:aws:s3:::__S3_BUCKET__/__STATSIG_S3_FOLDER__/*&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;arn:aws:athena:__REGION__:__YOUR_AWS_ACCOUNT_ID__:workgroup/__WORKGROUP_NAME__&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;arn:aws:glue:__REGION__:__YOUR_AWS_ACCOUNT_ID__:catalog&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;arn:aws:glue:__REGION__:__YOUR_AWS_ACCOUNT_ID__:database/__GLUE_STAGING_DATABASE__&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;arn:aws:glue:__REGION__:__YOUR_AWS_ACCOUNT_ID__:table/__GLUE_STAGING_DATABASE__/*&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Create an IAM Role or IAM User:</p>
</li>
</ol>
<div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">IAM Role</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">IAM User</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><p>With an IAM Role, Statsig will assume your created IAM Role via a Statsig Service Account. The Statsig Account ID for this service account is provided in your Data Connection settings in the Statsig Console. Statsig will run queries directly on behalf of this IAM Role.</p><p>Optionally, you can add an External ID condition for added security (<a href="https://aws.amazon.com/blogs/security/how-to-use-external-id-when-granting-access-to-your-aws-resources/" target="_blank" rel="noopener noreferrer">AWS External ID Docs</a>). This External ID will be generated by Statsig, and viewable in your Data Connection settings in the Statsig Console.</p><ul>
<li>In your AWS IAM Dashboard, select the Roles page under the Access Management tab</li>
<li>Click &#x27;Create role&#x27;</li>
<li>Choose &#x27;AWS account&#x27; as the Trusted entity type</li>
<li>Choose &#x27;Another AWS account&#x27; from the options, and copy the Statsig Account ID from your Statsig console</li>
<li>Optionally, require use of an External ID for connections to this role (also specified in your Statsig console)</li>
<li>Continue to next step of setup, and select your IAM Permissions Policy from earlier</li>
<li>Name, review, and create; your Trust Policy JSON should follow the format below:<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;Version&quot;: &quot;2012-10-17&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;Statement&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;Effect&quot;: &quot;Allow&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;Action&quot;: &quot;sts:AssumeRole&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;Principal&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;AWS&quot;: &quot;__STATSIG_ACCOUNT_ID__&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         // optionally require External ID condition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;Condition&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;StringEquals&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;sts:ExternalId&quot;: &quot;__ROLE_EXTERNAL_ID__&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>Add the ARN for this IAM Role to your Data Connection settings in the Statsig Console</li>
</ul></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>With an IAM User, Statsig will use AWS Access Keys to gain access to this IAM User. Statsig will run queries directly on behalf of this IAM User.</p><ul>
<li>In your AWS IAM Dashboard, select the Users page under the Access Management tab</li>
<li>Click &#x27;Create user&#x27;</li>
<li>Name your user</li>
<li>On the next step of setup, choose &#x27;Attach policies directly&#x27; and select your newly created Permissions Policy</li>
<li>Under the Security Credentials tab of this newly created User, find the Access Keys block</li>
<li>Click &#x27;Create access key&#x27;, and choose &#x27;Third-party service&#x27; from the Use Case options</li>
<li>Add the Access Key and Secret Access Key to your Data Connection settings in the Statsig Console</li>
</ul></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="setup-reading-data-from-your-eventsexposures-tables">Setup Reading Data from your Events/Exposures Tables<a href="#setup-reading-data-from-your-eventsexposures-tables" class="hash-link" aria-label="Direct link to Setup Reading Data from your Events/Exposures Tables" title="Direct link to Setup Reading Data from your Events/Exposures Tables">​</a></h2>
<ol>
<li>Give Statsig read-access to your Glue Database containing any tables you need to Statsig to read from. Do this by adding the following to your AWS IAM Permissions Policy:<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;Effect&quot;: &quot;Allow&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;Action&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;glue:GetTable&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;glue:GetDatabase&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;glue:GetDatabases&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;glue:GetPartition&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;glue:GetPartitions&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;Resource&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;arn:aws:glue:__REGION__:__YOUR_AWS_ACCOUNT_ID__:database/__YOUR_READONLY_DATABASE__&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;arn:aws:glue:__REGION__:__YOUR_AWS_ACCOUNT_ID__:table/__YOUR_READONLY_DATABASE__/*&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>Give Statsig read-access to your S3 Bucket locations of the tables you need Statsig to read from. Add this to your AWS IAM Permissions Policy:<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;Effect&quot;: &quot;Allow&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;Action&quot;: &quot;s3:GetObject&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;Resource&quot;: &quot;arn:aws:s3:::__PATH_TO_YOUR_READONLY_DATA__/*&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>Read data in Statsig when setting up Metric/Assignment Sources by selecting from these tables using <code>&quot;database&quot;.&quot;table&quot;</code> format.</li>
<li>Repeat for any additional tables, or whenever you need to read a new table from Statsig.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="additional-athena-resources">Additional Athena Resources<a href="#additional-athena-resources" class="hash-link" aria-label="Direct link to Additional Athena Resources" title="Direct link to Additional Athena Resources">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="s3-bucket-encryption-guide">S3 Bucket Encryption Guide<a href="#s3-bucket-encryption-guide" class="hash-link" aria-label="Direct link to S3 Bucket Encryption Guide" title="Direct link to S3 Bucket Encryption Guide">​</a></h3>
<p>Statsig supports all accessed S3 Buckets being encrypted. Steps to allow Statsig encrypting S3 Buckets while giving Statsig access are as follows:</p>
<ol>
<li>From the AWS Key Management Service console, create a new KMS Key using the below cryptographic configuration settings: (<a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/UsingKMSEncryption.html?icmpid=docs_s3_hp_batch_ops_create_job_encryption_key_type" target="_blank" rel="noopener noreferrer">AWS SSE KMS Docs</a>)<!-- -->
<ul>
<li>Key Type: Symmetric</li>
<li>Key Usage: Encrypt and Decrypt</li>
<li>Advanced Options<!-- -->
<ul>
<li>Key Material Origin = KMS</li>
<li>Regionality = Single-Region Key</li>
</ul>
</li>
</ul>
</li>
<li>From the Key Policy tab of your newly created KMS Key, find the Key Administrators box. Click Add, and select the AWS IAM Role/User provided to Statsig as an administrator.</li>
<li>Navigate to your S3 Bucket. From your S3 Bucket Properties tab, find the Default Encryption box. Click Edit, and select the below default encryption settings:<!-- -->
<ul>
<li>Encryption Type: SSE-KMS</li>
<li>AWS KMS Key: Enter AWS KMS Key ARN<!-- -->
<ul>
<li>(enter your newly created KMS Key ARN in the box)</li>
</ul>
</li>
<li>Bucket Key: Enable</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="statsig-staging-architecture-details">Statsig Staging Architecture Details<a href="#statsig-staging-architecture-details" class="hash-link" aria-label="Direct link to Statsig Staging Architecture Details" title="Direct link to Statsig Staging Architecture Details">​</a></h3>
<p>Statsig will create all of its staging tables within the Glue Staging Database that you create and provide. All of the tables created from Statsig will be of table-type <code>ICEBERG</code> (with the exception of the forwarded exposures/events tables, which will be regular <code>EXTERNAL</code> Athena tables).</p>
<p>Statsig stores all staging data within the <code>Statsig S3 Folder</code> of your S3 Bucket. Statsig will handle the creation of the structure within this subfolder. The folder structure is as follows:</p>
<ul>
<li>S3 Bucket (you create and provide Statsig the name)<!-- -->
<ul>
<li>Statsig S3 Folder (Statsig creates and names, name provided in the Data Connection settings in your Statsig Console)<!-- -->
<ul>
<li>Experiment Folder(s) (Statsig will create a subfolder for each unique experiment you run. These will be named <code>experiment-&lt;ID&gt;</code>)<!-- -->
<ul>
<li>Staging Tables Folders (Statsig will put data for each created staging table in its own subfolder. These will be named intuitively after the data they contain)<!-- -->
<ul>
<li><code>metadata/</code>
<ul>
<li>Iceberg Table Metadata</li>
</ul>
</li>
<li><code>data/</code>
<ul>
<li>Table Data Files (stored as Parquet)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><code>statsig_forwarded_exposures/</code>
<ul>
<li>Forwarded Exposures Table Subfolder (named in the Data Connection settings in your Statsig Console)<!-- -->
<ul>
<li>Dates in <code>YYYY-MM-DD</code> format (This table is partitioned by date, and there will be a subfolder for each date that has exposure data sent through Statsig)<!-- -->
<ul>
<li>Forwarded Exposure Data</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><code>statsig_forwarded_events/</code>
<ul>
<li>Forwarded Events Table Subfolder (named in the Data Connection settings in your Statsig Console)<!-- -->
<ul>
<li>Dates in <code>YYYY-MM-DD</code> format<!-- -->
<ul>
<li>Forwarded Event Data</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-ip-addresses-will-statsig-access-data-warehouses-from">What IP addresses will Statsig access data warehouses from?<a href="#what-ip-addresses-will-statsig-access-data-warehouses-from" class="hash-link" aria-label="Direct link to What IP addresses will Statsig access data warehouses from?" title="Direct link to What IP addresses will Statsig access data warehouses from?">​</a></h3>
<p><a href="/data-warehouse-ingestion/faq#what-ip-addresses-will-statsig-access-data-warehouses-from">See FAQ</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/statsig-io/docs/edit/main/docs/statsig-warehouse-native/connecting-your-warehouse/athena.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-09-18T00:00:00.000Z" itemprop="dateModified">Sep 18, 2025</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/statsig-warehouse-native/connecting-your-warehouse/snowflake"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Snowflake</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/statsig-warehouse-native/connecting-your-warehouse/bigquery"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">BigQuery</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#athena-warehouse-native-overview" class="table-of-contents__link toc-highlight">Athena Warehouse Native Overview</a></li><li><a href="#setup-statsig-staging-structure" class="table-of-contents__link toc-highlight">Setup Statsig Staging Structure</a></li><li><a href="#grant-permissions-to-statsig" class="table-of-contents__link toc-highlight">Grant Permissions to Statsig</a></li><li><a href="#setup-reading-data-from-your-eventsexposures-tables" class="table-of-contents__link toc-highlight">Setup Reading Data from your Events/Exposures Tables</a></li><li><a href="#additional-athena-resources" class="table-of-contents__link toc-highlight">Additional Athena Resources</a><ul><li><a href="#s3-bucket-encryption-guide" class="table-of-contents__link toc-highlight">S3 Bucket Encryption Guide</a></li><li><a href="#statsig-staging-architecture-details" class="table-of-contents__link toc-highlight">Statsig Staging Architecture Details</a></li><li><a href="#what-ip-addresses-will-statsig-access-data-warehouses-from" class="table-of-contents__link toc-highlight">What IP addresses will Statsig access data warehouses from?</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/faq">FAQ</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://statsig.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Statsig Home<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://statsig.com/blog" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://statsig.com/slack" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack Community<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/statsig-io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Code<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://learn.statsig.com/certifications" target="_blank" rel="noopener noreferrer" class="footer__link-item">Statsig University<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright (c) 2025 Statsig, Inc. | Thanks Docusaurus</div></div></div></footer></div>
</body>
</html>