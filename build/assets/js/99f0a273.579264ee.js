"use strict";(self.webpackChunkstatsig_docs=self.webpackChunkstatsig_docs||[]).push([[78536],{19058:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>c});var n=s(74848),i=s(28453);const a={sidebar_label:"Your First Feature",title:"Build your first Feature",keywords:["owner:shubham"],last_update:{date:new Date("2025-09-18T00:00:00.000Z")}},o=void 0,r={id:"guides/first-feature",title:"Build your first Feature",description:"Usually referred to online as feature flags, the Statsig UI and SDKs call them feature gates.",source:"@site/docs/guides/first-feature.mdx",sourceDirName:"guides",slug:"/guides/first-feature",permalink:"/guides/first-feature",draft:!1,unlisted:!1,editUrl:"https://github.com/statsig-io/docs/edit/main/docs/guides/first-feature.mdx",tags:[],version:"current",lastUpdatedAt:17581536e5,frontMatter:{sidebar_label:"Your First Feature",title:"Build your first Feature",keywords:["owner:shubham"],last_update:{date:"2025-09-18T00:00:00.000Z"}}},l={},c=[{value:"Step 1 - Create a new Feature Flag (Feature Gate)",id:"step-1---create-a-new-feature-flag-feature-gate",level:3},{value:"Step 2 - Create a new Rule",id:"step-2---create-a-new-rule",level:3},{value:"Step 3 - Adding additional rules",id:"step-3---adding-additional-rules",level:3},{value:"Step 4 - Create a new Client API key",id:"step-4---create-a-new-client-api-key",level:3},{value:"Step 5 - Using your new Gate via the Statsig SDK",id:"step-5---using-your-new-gate-via-the-statsig-sdk",level:3},{value:"Step 6 - Check gates using the SDK",id:"step-6---check-gates-using-the-sdk",level:3},{value:"Step 7 - Change the Environment to Mobile",id:"step-7---change-the-environment-to-mobile",level:3},{value:"Step 7 - Let&#39;s try a different check",id:"step-7---lets-try-a-different-check",level:3},{value:"Step 8 - How to use these gates in production",id:"step-8---how-to-use-these-gates-in-production",level:3},{value:"Happy Feature Gating!",id:"happy-feature-gating",level:2}];function d(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.admonition,{type:"note",children:(0,n.jsxs)(t.p,{children:["Usually referred to online as ",(0,n.jsx)(t.em,{children:"feature flags"}),", the Statsig UI and SDKs call them ",(0,n.jsx)(t.em,{children:"feature gates"}),"."]})}),"\n",(0,n.jsx)(t.p,{children:"Now that you have created your Statsig account let's get started on building and shipping your first feature using Statsig."}),"\n",(0,n.jsx)(t.h3,{id:"step-1---create-a-new-feature-flag-feature-gate",children:"Step 1 - Create a new Feature Flag (Feature Gate)"}),"\n",(0,n.jsxs)(t.p,{children:["Let's start by navigating to the ",(0,n.jsx)(t.a,{href:"https://console.statsig.com/gates",children:"feature gates page"}),"."]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://github.com/user-attachments/assets/00331234-34b7-48ef-98a9-9a094e44af1b",alt:"Feature Gates Page"})}),"\n",(0,n.jsxs)(t.p,{children:["Then, click on ",(0,n.jsx)(t.strong,{children:"Get Started"})," if you don't have any feature gates, or ",(0,n.jsx)(t.strong,{children:"Create"})," to add another one."]}),"\n",(0,n.jsx)(t.p,{children:'Pick a name related to the product feature you\'re building. As an example, we are building a new mobile registration UI flow, "Mobile Registration" is a good name. If you want, you can copy the name and description below:'}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"Mobile Registration\n"})}),"\n",(0,n.jsx)(t.p,{children:"It's also a good practice to write in a good description that is easy for people other than you to understand what this feature is about."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"This feature enables a new mobile optimized registration flow which\nwe will be launching on iOS and Android as part of the V2 refresh.\n"})}),"\n",(0,n.jsxs)(t.p,{children:['The Feature Gate is enabled by default (meaning calls to this gate will evaluate the rules and conditions you specify next). You can disable gates by clicking on the menu button, and selecting "Disable" (this stops the gate from evaluating rules and conditions and instead just returns ',(0,n.jsx)(t.code,{children:"false"}),"). Let's leave it on for now."]}),"\n",(0,n.jsx)(t.h3,{id:"step-2---create-a-new-rule",children:"Step 2 - Create a new Rule"}),"\n",(0,n.jsxs)(t.p,{children:["By default, your new Feature Gate will not pass any rule and hence will be returning ",(0,n.jsx)(t.code,{children:"false"})," for all checks on the client side. In order to turn on this feature, you will need to target this feature to a specific set of folks. You do that by clicking on ",(0,n.jsx)(t.strong,{children:"Add New Rule"})]}),"\n",(0,n.jsx)(t.p,{children:"You can choose from a list of targeting criteria like User ID, Country, Browser, Operating System, etc."}),"\n",(0,n.jsxs)(t.p,{children:["Let's go ahead and choose ",(0,n.jsx)(t.strong,{children:"Operating System"})," is ",(0,n.jsx)(t.strong,{children:"Any of"})," and pick ",(0,n.jsx)(t.strong,{children:"Android"})," and ",(0,n.jsx)(t.strong,{children:"iOS"})," for our Mobile only targeting."]}),"\n",(0,n.jsxs)(t.p,{children:["Set the pass percentage to 100%, and then hit ",(0,n.jsx)(t.strong,{children:"Add Rule"})]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://github.com/user-attachments/assets/f4717e74-c1a7-4e3e-b894-13622f230f71",alt:"Adding a new rule"})}),"\n",(0,n.jsxs)(t.p,{children:["Go ahead and hit ",(0,n.jsx)(t.strong,{children:"Save"}),' on the bottom right to commit these changes. New rules and conditions are staged at first, and the changes are only committed when you finalize them by clicking "Save"']}),"\n",(0,n.jsx)(t.p,{children:'You can now test this feature gate by configuring the User object in the "Test Gate" section.'}),"\n",(0,n.jsx)(t.h3,{id:"step-3---adding-additional-rules",children:"Step 3 - Adding additional rules"}),"\n",(0,n.jsx)(t.p,{children:"Let's add one more rule to our Feature Gate, one that allows us to test the new feature - say, for dogfooding purposes."}),"\n",(0,n.jsxs)(t.p,{children:["This time, let's pick ",(0,n.jsx)(t.strong,{children:"Email"})," ",(0,n.jsx)(t.strong,{children:"Contains any of"})," and choose a domain. Like this:"]}),"\n",(0,n.jsxs)(t.p,{children:["Hit ",(0,n.jsx)(t.strong,{children:"Add Rule"})," and don't forget to hit ",(0,n.jsx)(t.strong,{children:"Save"}),"!"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://github.com/user-attachments/assets/70c5b470-dd0a-409a-9e87-dd3c2b6b0001",alt:"Feature Gate with both rules"})}),"\n",(0,n.jsx)(t.h3,{id:"step-4---create-a-new-client-api-key",children:"Step 4 - Create a new Client API key"}),"\n",(0,n.jsxs)(t.p,{children:["Navigate to the ",(0,n.jsx)(t.strong,{children:"API Keys"}),' section of the Statsig console (Bottom left "User and Settings"> Project Settings) or via this direct link ',(0,n.jsx)(t.a,{href:"https://console.statsig.com/api_keys",children:"console.statsig.com/api_keys"}),". Here you would see different types of API keys you can generate."]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Server Secret Keys"})," are used only for server side integrations. These keys are secrets that you want to safe-guard and that means not using it on clients."]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Client API Keys"})," are used in product apps or websites to access Statsig features. It's okay to embed these keys in apps or website."]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Console API Keys"})," are used to interact with the /console API. These keys allow you to read and configure your gates/configs without using the console.statsig.com website. These keys should be kept secret and not included any public repositories or client code."]}),"\n",(0,n.jsx)(t.p,{children:"The main differences between client and server keys are that client keys are only able to fetch feature gates and experiments with hashed names (so your unreleased features won't be leaked), and client keys don't have permission to call into certain server SDK only endpoints and CRUD APIs."}),"\n",(0,n.jsxs)(t.p,{children:["For the purposes of this exercise, you will need to view and copy the ",(0,n.jsx)(t.strong,{children:"Client API Key"})," for your project - we're going to use it in the next step."]}),"\n",(0,n.jsx)(t.h3,{id:"step-5---using-your-new-gate-via-the-statsig-sdk",children:"Step 5 - Using your new Gate via the Statsig SDK"}),"\n",(0,n.jsx)(t.p,{children:"Now that we have configured this feature gate, let's go ahead and implement the feature behind this feature gate. For this exercise, let's pick a website that uses our JS SDK."}),"\n",(0,n.jsx)(t.admonition,{title:"Other SDKs",type:"info",children:(0,n.jsxs)(t.p,{children:["Statsig supports many different SDKs. Please checkout ",(0,n.jsx)(t.a,{href:"/",children:"Getting Started"})," for the full list of Client side SDKs"]})}),"\n",(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.code,{children:"@statsig/js-client"})," sdk is available from ",(0,n.jsx)(t.a,{href:"http://www.jsdelivr.com/",children:"jsdelivr"}),", an open source CDN. So let's open the Console Window of a new Chrome browser window for the next set of steps."]}),"\n",(0,n.jsxs)(t.p,{children:["Use this link ",(0,n.jsx)(t.a,{href:"https://cdn.jsdelivr.net/npm/@statsig/js-client/build/statsig-js-client+session-replay+web-analytics.min.js",children:"https://cdn.jsdelivr.net/npm/@statsig/js-client/build/statsig-js-client+session-replay+web-analytics.min.js"})," to get you the latest SDK version that's available."]}),"\n",(0,n.jsx)(t.p,{children:"Go to any website - say the google homepage, and open the debugging console. Copy and paste the following code in your console:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",children:'var scrpt = document.createElement("script");\nscrpt.src =\n  "https://cdn.jsdelivr.net/npm/@statsig/js-client@3/build/statsig-js-client+session-replay+web-analytics.min.js";\ndocument.getElementsByTagName("head")[0].appendChild(scrpt);\n'})}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://github.com/user-attachments/assets/5cca1a8d-ca64-40b5-9107-567f0e2a4dd4",alt:"Adding the sdk"})}),"\n",(0,n.jsx)(t.h3,{id:"step-6---check-gates-using-the-sdk",children:"Step 6 - Check gates using the SDK"}),"\n",(0,n.jsxs)(t.p,{children:["Copy and paste the following code in your console, being sure to replace ",(0,n.jsx)(t.code,{children:"YOUR_SDK_KEY"})," with the Client API Key you copied in Step 4:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",children:'const client = new window.Statsig.StatsigClient(\n  "YOUR_SDK_KEY",\n  {},\n);\nawait client.initializeAsync();\n'})}),"\n",(0,n.jsx)(t.p,{children:"Now that we have initialized Statsig, we can go ahead and make a call to our newly created Feature Gate. Copy and paste the following code in the console."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",children:'client.checkGate("mobile_registration");\n'})}),"\n",(0,n.jsxs)(t.p,{children:["You should get a response 'false' back - we didn't initialize from a mobile client, nor with an email containing ",(0,n.jsx)(t.code,{children:"@statsig.com"}),"."]}),"\n",(0,n.jsx)(t.p,{children:"This is because we are not running this code on iOS or Android. And the way we configured our Feature Gate, the feature is only available on mobile."}),"\n",(0,n.jsx)(t.h3,{id:"step-7---change-the-environment-to-mobile",children:"Step 7 - Change the Environment to Mobile"}),"\n",(0,n.jsx)(t.p,{children:"Chrome DevTools allows us to change our Device type to mobile. Let's use that feature to simulate the request coming from a mobile device. First, go ahead and toggle the Mobile Device toolbar to ON by clicking on this icon at the top left corner:"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://user-images.githubusercontent.com/74588208/117494211-de6a6780-af28-11eb-8d99-c2f557d4ccde.png",alt:"Chrome DevTools mobile device toolbar icon"})}),"\n",(0,n.jsx)(t.p,{children:"Since the environment has changed, we need to call updateUser on Statsig.  This will reevaluate the Feature Gates against the new environment. Copy and paste the following code in the console."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",children:"await client.updateUserAsync({});\n"})}),"\n",(0,n.jsx)(t.p,{children:"Now, let's rerun the gate check again."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",children:'client.checkGate("mobile_registration");\n'})}),"\n",(0,n.jsxs)(t.p,{children:["This time, you should see ",(0,n.jsx)(t.code,{children:"true"}),", meaning that this feature is now available on this 'mobile' device!"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://github.com/user-attachments/assets/b2c6922e-e5e4-46d4-b3d9-41ff77e81b91",alt:"Update user and get true"})}),"\n",(0,n.jsx)(t.h3,{id:"step-7---lets-try-a-different-check",children:"Step 7 - Let's try a different check"}),"\n",(0,n.jsx)(t.p,{children:"Let's toggle the mobile device to off, so we're now back to Desktop device. This time let's try a different check - one that uses the user email as the condition. When we update the user this time, we will provide an employee email address."}),"\n",(0,n.jsx)(t.p,{children:"Type the following code in your console:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",children:'await client.updateUserAsync({ email: "vincent.james@statsig.com" });\n'})}),"\n",(0,n.jsx)(t.p,{children:"And let's try the same checkGate once more"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",children:'client.checkGate("mobile_registration");\n'})}),"\n",(0,n.jsxs)(t.p,{children:["This time, you should get back a ",(0,n.jsx)(t.code,{children:"true"})," indicating that this feature is available for this user."]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://github.com/user-attachments/assets/249702d3-0798-439c-b99d-1df01f0367a5",alt:"Update the user and trying again"})}),"\n",(0,n.jsx)(t.p,{children:"Finally, since we added this via the debugger, lets manually flush these events to Statsig so we can see them in the dashboard."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"client.flush();\n"})}),"\n",(0,n.jsxs)(t.p,{children:["If you're ever wondering ",(0,n.jsx)(t.em,{children:"why"}),' you are getting a certain value, you can use the "Diagnostics" tab on your feature gate.  This will show checks in near real time, and evaluation results, along with the rule that was evaluated, or reason you got the value.']}),"\n",(0,n.jsx)(t.p,{children:'Scroll down in the "Diagnostics" tab to see the "Exposure Stream".  For our three checks we just made, we should see a fail, a Pass on the Mobile OS rule, and then a Pass on the employee rule:'}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://github.com/user-attachments/assets/851b4455-e63d-4bb0-9566-b3c149d463c2",alt:"Diagnostics Exposure Stream"})}),"\n",(0,n.jsx)(t.h3,{id:"step-8---how-to-use-these-gates-in-production",children:"Step 8 - How to use these gates in production"}),"\n",(0,n.jsx)(t.p,{children:"The pseudocode for feature gates would look something like this:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",children:'if (client.checkGate("mobile_registration")) {\n  // Show mobile registration UI\n  show(mobileRegistrationPage);\n} else {\n  // Use the default path\n  show(oldRegistrationPage);\n}\n'})}),"\n",(0,n.jsx)(t.h2,{id:"happy-feature-gating",children:"Happy Feature Gating!"})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},28453:(e,t,s)=>{s.d(t,{R:()=>o,x:()=>r});var n=s(96540);const i={},a=n.createContext(i);function o(e){const t=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),n.createElement(a.Provider,{value:t},e.children)}}}]);