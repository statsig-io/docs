"use strict";(self.webpackChunkstatsig_docs=self.webpackChunkstatsig_docs||[]).push([[51732],{36620:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>o});var i=t(74848),n=t(28453);const r={title:"Pipeline Overview",slug:"/statsig-warehouse-native/pipeline-overview",sidebar_label:"Pipeline Overview",description:"Understand what we're running on your warehouse",keywords:["owner:vm"],last_update:{date:new Date("2025-09-18T00:00:00.000Z")}},l=void 0,a={id:"statsig-warehouse-native/analysis-tools/pipeline-overview",title:"Pipeline Overview",description:"Understand what we're running on your warehouse",source:"@site/docs/statsig-warehouse-native/analysis-tools/pipeline-overview.md",sourceDirName:"statsig-warehouse-native/analysis-tools",slug:"/statsig-warehouse-native/pipeline-overview",permalink:"/statsig-warehouse-native/pipeline-overview",draft:!1,unlisted:!1,editUrl:"https://github.com/statsig-io/docs/edit/main/docs/statsig-warehouse-native/analysis-tools/pipeline-overview.md",tags:[],version:"current",lastUpdatedAt:17581536e5,frontMatter:{title:"Pipeline Overview",slug:"/statsig-warehouse-native/pipeline-overview",sidebar_label:"Pipeline Overview",description:"Understand what we're running on your warehouse",keywords:["owner:vm"],last_update:{date:"2025-09-18T00:00:00.000Z"}},sidebar:"warehouse",previous:{title:"Scheduled Reloads",permalink:"/statsig-warehouse-native/connecting-your-warehouse/scheduled-reloads"},next:{title:"Early Diagnostics",permalink:"/statsig-warehouse-native/features/early-diagnostics"}},d={},o=[{value:"Main Steps",id:"main-steps",level:2},{value:"Types of DAGs",id:"types-of-dags",level:2},{value:"Artifacts and Entity Relationships",id:"artifacts-and-entity-relationships",level:2},{value:"Other Jobs",id:"other-jobs",level:2},{value:"Visibility",id:"visibility",level:2},{value:"Exposure Export Table",id:"exposure-export-table",level:2}];function c(e){const s={code:"code",h2:"h2",img:"img",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,n.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.p,{children:"This page is intended to give you a high level overview of the pipeline Statsig Warehouse Native will run on your warehouse."}),"\n",(0,i.jsx)(s.h2,{id:"main-steps",children:"Main Steps"}),"\n",(0,i.jsx)(s.p,{children:"The main steps in the pipeline are:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Identifying users' first exposures"}),"\n",(0,i.jsx)(s.li,{children:"Annotating Metric Sources with exposure data"}),"\n",(0,i.jsx)(s.li,{children:"Creating metric-user-day level staging data"}),"\n",(0,i.jsx)(s.li,{children:"Running intermediate rollups for better performance"}),"\n",(0,i.jsx)(s.li,{children:"Calculating group-level summary Statistics"}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{src:"https://user-images.githubusercontent.com/102695539/264113011-b0bdf1af-3ec6-4770-aabd-35f948ea842d.png",alt:"Pipeline View"})}),"\n",(0,i.jsx)(s.h2,{id:"types-of-dags",children:"Types of DAGs"}),"\n",(0,i.jsx)(s.p,{children:"Statsig lets you run your pipeline in a few different ways:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["A ",(0,i.jsx)(s.strong,{children:"Full Refresh"})," totally restates the experiment's data and calculates it from scratch. This is useful for starting an experiment, or if underlying data has changed"]}),"\n",(0,i.jsxs)(s.li,{children:["An ",(0,i.jsx)(s.strong,{children:"Incremental Refresh"})," appends new data to your experiment data. This reduces the cost of running scheduled updates to your results"]}),"\n",(0,i.jsxs)(s.li,{children:["A ",(0,i.jsx)(s.strong,{children:"Metric"})," refresh allows you to update a specific metric in case you changed a definition, or want to add new metrics to your analysis"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"artifacts-and-entity-relationships",children:"Artifacts and Entity Relationships"}),"\n",(0,i.jsxs)(s.p,{children:["The following tables will be generated and stored in your warehouse per-experiment. You have full access to these data sources for your own analysis, models, or visualizations. For experiments, ",(0,i.jsx)(s.code,{children:"experiment_id"})," will be the name of the experiment; for Feature Gates, ",(0,i.jsx)(s.code,{children:"experiment_id"})," will be the name of the gate along with the specific rule ID (e.g. ",(0,i.jsx)(s.code,{children:"chatbot_llm_model_switch_31e9jwlgO1bSSznKntb2gp_exposures_summary"}),")"]}),"\n",(0,i.jsx)(s.p,{children:"This is not an exhaustive list, but includes most of the core result/staging tables that you might be interested in using for your own analysis. Note - These are internal tables and will change as the product evolves. Changes will be documented here."}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Table"}),(0,i.jsx)(s.th,{children:"Description"}),(0,i.jsx)(s.th,{children:"Notes"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"first_exposures_<experiment_id>"})}),(0,i.jsx)(s.td,{children:"Deduplicated and stitched (for experiments with ID resolution) first exposure events"}),(0,i.jsx)(s.td,{children:"Useful for ad-hoc analysis"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"exposures_summary_<experiment_id>"})}),(0,i.jsx)(s.td,{children:"Timeseries of exposures per group for display in Pulse"}),(0,i.jsx)(s.td,{})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"unit_day_metrics_<experiment_id>"})}),(0,i.jsx)(s.td,{children:"User-day level metric aggregations table"}),(0,i.jsx)(s.td,{children:"Useful for ad-hoc analysis"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"unit_covariate_metrics_<experiment_id>"})}),(0,i.jsx)(s.td,{children:"User-level pre-experiment aggregations for regression adjustment/CUPED"}),(0,i.jsx)(s.td,{})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"funnel_events_<experiment_id>"})}),(0,i.jsx)(s.td,{children:"Staging table for running funnel analysis"}),(0,i.jsx)(s.td,{})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"percentile_values_<experiment_id>"})}),(0,i.jsx)(s.td,{children:"Staging table for running percentile analysis"}),(0,i.jsx)(s.td,{})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"distinct_values_<experiment_id>"})}),(0,i.jsx)(s.td,{children:"Staging table for running count distinct analysis"}),(0,i.jsx)(s.td,{})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"windowed_metrics_<experiment_id>"})}),(0,i.jsx)(s.td,{children:"Staging table for generating running totals when restating Pulse"}),(0,i.jsx)(s.td,{})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"ratio_aggregations_<experiment_id>"})}),(0,i.jsx)(s.td,{children:"Staging table for generating running totals when restating Pulse"}),(0,i.jsx)(s.td,{})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"results_<rollup>_<experiment_id>"})}),(0,i.jsx)(s.td,{children:"Outputs of Statistical Analysis for different rollups (e.g. daily, days-since-exposure, cumulative, 7-day). Exported to Statsig"}),(0,i.jsx)(s.td,{children:"Pulse inputs - useful for replicating Statistical analysis"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"ratio_results_<rollup>_<experiment_id>"})}),(0,i.jsx)(s.td,{children:"Outputs of Statistical Analysis for ratio metrics in different rollups (e.g. daily, days-since-exposure, cumulative, 7-day). Exported to Statsig"}),(0,i.jsx)(s.td,{children:"Pulse inputs - useful for replicating Statistical analysis"})]})]})]}),"\n",(0,i.jsx)(s.p,{children:"The high level relationships/contents of these tables are represented below - refer to the Main Steps image below for scheduling details."}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{src:"https://github.com/statsig-io/docs/assets/102695539/120eb9ed-fe35-4a66-8acd-cbcd819a2bdf",alt:"WHN ER Diagram"})}),"\n",(0,i.jsx)(s.h2,{id:"other-jobs",children:"Other Jobs"}),"\n",(0,i.jsx)(s.p,{children:"Alongside and inside this main flow, Statsig will also:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Run Health Checks and a Summary View for exposures"}),"\n",(0,i.jsx)(s.li,{children:"Calculate top dimensions for dimensional metrics"}),"\n",(0,i.jsx)(s.li,{children:"Calculate funnel steps"}),"\n",(0,i.jsx)(s.li,{children:"Run CUPED and Winsorization procedures during the group-level summaries to reduce variance and outlier influence"}),"\n",(0,i.jsx)(s.li,{children:"Calculate inputs to the Delta Method to avoid bias on Ratio and Mean metrics"}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"Statsig generates experiment-level tables - this makes it easy to do your own follow-up analyses on specific experiments."}),"\n",(0,i.jsx)(s.h2,{id:"visibility",children:"Visibility"}),"\n",(0,i.jsx)(s.p,{children:"Clicking into the history icon on your pulse results, you'll be able to see the Jobs and IDs we ran for each pulse reload, alongside relevant information on compute time and cost."}),"\n",(0,i.jsx)(s.p,{children:"This will also be fully transparent from your own Warehouse's history and usage management, but having the costs in console is helpful knowledge for the cross-functional experimentation teams running the analysis."}),"\n",(0,i.jsx)(s.h2,{id:"exposure-export-table",children:"Exposure Export Table"}),"\n",(0,i.jsx)(s.p,{children:"Statsig dedupes and records each user's first exposure to an experiment into a table in your warehouse. This table name is configurable in the Data Connection setup and defaults to statsig_forwarded_exposures. This table contains each user's first exposure to an experiment. For feature gates, we dedupe and record exposures for partial rollouts (e.g. 5% or 50% rollouts - but not 0% or 100% rollouts)."}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Column Name"}),(0,i.jsx)(s.th,{children:"Data Type"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"experiment_id"}),(0,i.jsx)(s.td,{children:"string"}),(0,i.jsx)(s.td,{children:"The identifier for the gate/experiment"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"group_id"}),(0,i.jsx)(s.td,{children:"string"}),(0,i.jsx)(s.td,{children:"groupID for experiments; ruleID+Pass/Fail for gates"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"group_name"}),(0,i.jsx)(s.td,{children:"string"}),(0,i.jsx)(s.td,{children:"Name of the experiment group (e.g. Control vs Test)"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"user_id"}),(0,i.jsx)(s.td,{children:"string"}),(0,i.jsx)(s.td,{children:"The ID passed in as the Statsig userID"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"stable_id"}),(0,i.jsx)(s.td,{children:"string"}),(0,i.jsx)(s.td,{children:"Statsig Client SDK managed stable device identifier"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"[your custom ids]"}),(0,i.jsx)(s.td,{children:"string"}),(0,i.jsx)(s.td,{children:"One column for every custom unitID you use on Statsig"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"timestamp"}),(0,i.jsx)(s.td,{children:"timestamp"}),(0,i.jsx)(s.td,{children:"Statsig Client SDK managed stable device identifier"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"user_dimensions"}),(0,i.jsx)(s.td,{children:"object"}),(0,i.jsx)(s.td,{children:"Warehouse specific object with all the user dimensions"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"ts"}),(0,i.jsx)(s.td,{children:"timestamp"}),(0,i.jsx)(s.td,{children:"Timestamp of the first exposure"})]})]})]})]})}function h(e={}){const{wrapper:s}={...(0,n.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},28453:(e,s,t)=>{t.d(s,{R:()=>l,x:()=>a});var i=t(96540);const n={},r=i.createContext(n);function l(e){const s=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:l(e.components),i.createElement(r.Provider,{value:s},e.children)}}}]);