"use strict";(self.webpackChunkstatsig_docs=self.webpackChunkstatsig_docs||[]).push([[60189],{12946:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>u,frontMatter:()=>i,metadata:()=>o,toc:()=>l});var a=s(74848),n=s(28453);const i={title:"Databricks Connection",slug:"/statsig-warehouse-native/connecting-your-warehouse/databricks",sidebar_label:"Databricks",keywords:["owner:vm"],last_update:{date:new Date("2025-09-18T00:00:00.000Z")}},r=void 0,o={id:"statsig-warehouse-native/connecting-your-warehouse/databricks",title:"Databricks Connection",description:"Overview",source:"@site/docs/statsig-warehouse-native/connecting-your-warehouse/databricks.md",sourceDirName:"statsig-warehouse-native/connecting-your-warehouse",slug:"/statsig-warehouse-native/connecting-your-warehouse/databricks",permalink:"/statsig-warehouse-native/connecting-your-warehouse/databricks",draft:!1,unlisted:!1,editUrl:"https://github.com/statsig-io/docs/edit/main/docs/statsig-warehouse-native/connecting-your-warehouse/databricks.md",tags:[],version:"current",lastUpdatedAt:17581536e5,frontMatter:{title:"Databricks Connection",slug:"/statsig-warehouse-native/connecting-your-warehouse/databricks",sidebar_label:"Databricks",keywords:["owner:vm"],last_update:{date:"2025-09-18T00:00:00.000Z"}},sidebar:"warehouse",previous:{title:"BigQuery",permalink:"/statsig-warehouse-native/connecting-your-warehouse/bigquery"},next:{title:"Redshift",permalink:"/statsig-warehouse-native/connecting-your-warehouse/redshift"}},c={},l=[{value:"Overview",id:"overview",level:2},{value:"Note on Databricks Access",id:"note-on-databricks-access",level:2},{value:"Getting Connection Information",id:"getting-connection-information",level:2},{value:"What IP addresses will Statsig access data warehouses from?",id:"what-ip-addresses-will-statsig-access-data-warehouses-from",level:3}];function d(e){const t={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,n.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h2,{id:"overview",children:"Overview"}),"\n",(0,a.jsx)(t.p,{children:"To set up a connection with Databricks, you will need the following:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"Your Databricks Server Hostname"}),"\n",(0,a.jsx)(t.li,{children:"An HTTP Path to a Cluster or SQL Warehouse"}),"\n",(0,a.jsx)(t.li,{children:"A staging database for writing results and intermediate tables into"}),"\n",(0,a.jsx)(t.li,{children:"An access token with read access on your experiment data and write access to the staging database"}),"\n",(0,a.jsx)(t.li,{children:"Use either Serverless SQL Warehouse or an always-on cluster. Statsig uses interactive queries during setup (and some analysis) which will fail if the cluster takes several minutes to start up."}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"Start by enabling the Databricks source in your project settings."}),"\n",(0,a.jsx)(t.h2,{id:"note-on-databricks-access",children:"Note on Databricks Access"}),"\n",(0,a.jsx)(t.p,{children:"For users who use databricks and a dbfs-based deltalake as their primary warehouse, permissions are managed easily for databricks. For customers using databricks as an intermediary to other data sources, you need to make sure that databricks and the Statsig user through databricks has appropriate access to your storage (e.g. S3 for athena tables). Often, permissions are reset at some point which will start to cause errors; to validate this, try creating tables through the Statsig console to verify that the permissions on Statsig's side are sufficient."}),"\n",(0,a.jsx)(t.h2,{id:"getting-connection-information",children:"Getting Connection Information"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["Follow the ",(0,a.jsx)(t.a,{href:"https://docs.databricks.com/integrations/jdbc-odbc-bi.html#get-connection-details-for-a-cluster",children:"Databricks documentation"})," to get the hostname and http path of the cluster you'll use to run your experimental analysis. You may want to create a specific cluster for this use case."]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{src:"https://user-images.githubusercontent.com/102695539/242474157-e6329ea8-92ae-43af-95dc-7bce2a26a3e6.png",alt:"credentials"})}),"\n",(0,a.jsx)("br",{}),"\n",(0,a.jsxs)(t.ol,{start:"2",children:["\n",(0,a.jsxs)(t.li,{children:["Follow ",(0,a.jsx)(t.a,{href:"https://docs.databricks.com/dev-tools/auth.html#databricks-personal-access-tokens",children:"these instructions"})," to get the personal access token that will be used to calculate experiment results on your warehouse. Alternatively, you can follow ",(0,a.jsx)(t.a,{href:"https://docs.databricks.com/en/administration-guide/users-groups/service-principals.html#manage-personal-access-tokens-for-a-service-principal",children:"these instructions"})," to get a personal access token for a service principal."]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{src:"https://user-images.githubusercontent.com/108023879/188731186-ecdc0872-de06-4576-b387-fa08bdca447d.png",alt:"databricks info"})}),"\n",(0,a.jsxs)(t.ol,{start:"3",children:["\n",(0,a.jsx)(t.li,{children:"Create or choose a database to use. For example, you could run this sql in a notebook:"}),"\n"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:"staging_database_name = '<my_name>'\nspark.sql(f\"CREATE DATABASE IF NOT EXISTS {staging_database_name}\")\n"})}),"\n",(0,a.jsx)(t.h3,{id:"what-ip-addresses-will-statsig-access-data-warehouses-from",children:"What IP addresses will Statsig access data warehouses from?"}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.a,{href:"/data-warehouse-ingestion/faq#what-ip-addresses-will-statsig-access-data-warehouses-from",children:"See FAQ"})})]})}function u(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},28453:(e,t,s)=>{s.d(t,{R:()=>r,x:()=>o});var a=s(96540);const n={},i=a.createContext(n);function r(e){const t=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:r(e.components),a.createElement(i.Provider,{value:t},e.children)}}}]);