"use strict";(self.webpackChunkstatsig_docs=self.webpackChunkstatsig_docs||[]).push([[26581],{3370:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>l,toc:()=>d});var i=t(74848),s=t(28453);const r={sidebar_label:"Environments",title:"Using Environments for Conditional Evaluation outside of Production",keywords:["owner:brock"],last_update:{date:new Date("2025-09-18T00:00:00.000Z")}},o=void 0,l={id:"guides/using-environments",title:"Using Environments for Conditional Evaluation outside of Production",description:"Statsig SDKs allow you to set the environment tier for your app during initialization. This helps you evaluate feature gates, dynamic configs, and experiments differently in non-production environments like development or staging. All you need to do is configure the appropriate environment in your code and adjust feature rules in the Statsig Console.",source:"@site/docs/guides/using-environments.md",sourceDirName:"guides",slug:"/guides/using-environments",permalink:"/guides/using-environments",draft:!1,unlisted:!1,editUrl:"https://github.com/statsig-io/docs/edit/main/docs/guides/using-environments.md",tags:[],version:"current",lastUpdatedAt:17581536e5,frontMatter:{sidebar_label:"Environments",title:"Using Environments for Conditional Evaluation outside of Production",keywords:["owner:brock"],last_update:{date:"2025-09-18T00:00:00.000Z"}},sidebar:"cloud",previous:{title:"Custom ID Types",permalink:"/guides/experiment-on-custom-id-types"},next:{title:"Open Telemetry Logs and Metrics",permalink:"/server/concepts/open_telemetry"}},a={},d=[{value:"SDK Usage",id:"sdk-usage",level:2},{value:"1. Environment-specific SDK Keys",id:"1-environment-specific-sdk-keys",level:3},{value:"2. Environment Tier Parameter",id:"2-environment-tier-parameter",level:3},{value:"Example (JS Client SDK):",id:"example-js-client-sdk",level:4},{value:"Example (Node Server SDK):",id:"example-node-server-sdk",level:4},{value:"Using Environments in Feature Gates",id:"using-environments-in-feature-gates",level:2},{value:"Configuring Environments",id:"configuring-environments",level:2},{value:"Steps to Add or Edit Environments:",id:"steps-to-add-or-edit-environments",level:3},{value:"Per-Environment API Keys",id:"per-environment-api-keys",level:2},{value:"Steps to Generate Environment-Specific API Keys:",id:"steps-to-generate-environment-specific-api-keys",level:3}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Statsig SDKs allow you to set the environment tier for your app during initialization. This helps you evaluate feature gates, dynamic configs, and experiments differently in non-production environments like development or staging. All you need to do is configure the appropriate environment in your code and adjust feature rules in the Statsig Console."}),"\n",(0,i.jsx)(n.p,{children:"Here\u2019s a step-by-step guide on how to configure and use environments effectively."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"sdk-usage",children:"SDK Usage"}),"\n",(0,i.jsx)(n.p,{children:"There are two key ways to set up environments within your app:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Environment-specific SDK keys"}),": These determine which rule sets are downloaded by the SDK based on the environment."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Environment tier at SDK initialization"}),": This defines how rules are evaluated for the app."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"1-environment-specific-sdk-keys",children:"1. Environment-specific SDK Keys"}),"\n",(0,i.jsxs)(n.p,{children:["Setting up environment-specific SDK keys allows you to control which rules are sent to the SDK. For instance, if an SDK is initialized with a key for the development environment, it will not receive rules set for staging or production environments. For more information, see ",(0,i.jsx)(n.a,{href:"#per-environment-api-keys",children:"Per-Environment API Keys"})," below."]}),"\n",(0,i.jsx)(n.h3,{id:"2-environment-tier-parameter",children:"2. Environment Tier Parameter"}),"\n",(0,i.jsx)(n.p,{children:"SDK keys can correspond to multiple environments. Therefore, it\u2019s important to explicitly set the environment tier during SDK initialization to ensure the correct rules are applied."}),"\n",(0,i.jsxs)(n.p,{children:["All SDKs accept an ",(0,i.jsx)(n.code,{children:"SDK Key"})," and an optional ",(0,i.jsx)(n.code,{children:"StatsigOptions"})," dictionary. The ",(0,i.jsx)(n.code,{children:"StatsigOptions"})," parameter includes the ",(0,i.jsx)(n.code,{children:"environment"})," key, which has a ",(0,i.jsx)(n.code,{children:"tier"})," field. This tier corresponds to one of your pre-configured environments (e.g., development, staging)."]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),': If the environment tier is unset, all checks and event logs will default to "production."']}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Here\u2019s an example of setting the environment tier in your code for the ",(0,i.jsx)(n.strong,{children:"development"})," environment:"]}),"\n",(0,i.jsx)(n.h4,{id:"example-js-client-sdk",children:"Example (JS Client SDK):"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"const client = new StatsigClient(<SDK_KEY>, user, { environment: { tier: 'development' } });\n"})}),"\n",(0,i.jsx)(n.h4,{id:"example-node-server-sdk",children:"Example (Node Server SDK):"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"await statsig.initialize(<SDK_KEY>, { environment: { tier: 'development' } });\n"})}),"\n",(0,i.jsx)(n.p,{children:"Refer to your language-specific SDK documentation for further details."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"using-environments-in-feature-gates",children:"Using Environments in Feature Gates"}),"\n",(0,i.jsxs)(n.p,{children:["To configure environment-specific rules for a ",(0,i.jsx)(n.strong,{children:"Feature Gate"}),", follow these steps:"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Create a new Feature Gate"}),': In the Statsig Console, create a new Feature Gate. For example, name it "development mode" to target only your development environment.']}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"https://user-images.githubusercontent.com/101903926/221443079-59d81448-d070-4da0-a010-f038016a6b09.png",alt:"Feature Gate"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Specify Environments"}),": When configuring the rule, check the ",(0,i.jsx)(n.strong,{children:"Specify Environments"})," box and select the environments you want to target. By default, rules are enabled for all environments unless specified otherwise."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"https://user-images.githubusercontent.com/101903926/221443202-de70eab5-68d5-4173-8f6d-7c680762212e.png",alt:"Specify Environment"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Save your settings"}),": After saving, the environment(s) for which the rule is enabled will be displayed below the rule name."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"https://user-images.githubusercontent.com/101903926/221443319-597f1e1e-facc-41a0-8b7a-dcff0fec4405.png",alt:"Enabled Environments"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"You can also filter rules by environment using the filter in the upper-right corner of the Feature Gate UI."}),"\n",(0,i.jsxs)(n.p,{children:['To edit the target environments of a rule, click the "..." next to the rule name and select ',(0,i.jsx)(n.strong,{children:"Edit Rule"}),"."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"https://user-images.githubusercontent.com/101903926/221443425-c8a5e4fe-f49a-47f9-96a7-568ef2f2dd5d.png",alt:"Edit Rule"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"configuring-environments",children:"Configuring Environments"}),"\n",(0,i.jsxs)(n.p,{children:["By default, Statsig provides three environments: ",(0,i.jsx)(n.strong,{children:"Development"}),", ",(0,i.jsx)(n.strong,{children:"Staging"}),", and ",(0,i.jsx)(n.strong,{children:"Production"}),". You can add more environments or rename the default ones, but the ",(0,i.jsx)(n.strong,{children:"Production"})," environment cannot be deleted or modified."]}),"\n",(0,i.jsx)(n.h3,{id:"steps-to-add-or-edit-environments",children:"Steps to Add or Edit Environments:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Navigate to ",(0,i.jsx)(n.strong,{children:"Project Settings"})," > ",(0,i.jsx)(n.strong,{children:"Environments & Keys"}),"."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"https://user-images.githubusercontent.com/101903926/221449870-797a2f0f-9310-48ce-b299-d4aaf9bd61fb.png",alt:"Project Settings"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Click ",(0,i.jsx)(n.strong,{children:"Edit"})," to add new environments or reorder the existing ones using drag-and-drop."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"https://user-images.githubusercontent.com/101903926/221449939-0ba6e53f-bad1-4600-ac99-1833d55230be.png",alt:"Edit Environments"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": Reordering environments doesn\u2019t affect any rule logic, but it helps convey the rollout hierarchy (e.g., development -> staging -> production) to your teams."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"per-environment-api-keys",children:"Per-Environment API Keys"}),"\n",(0,i.jsx)(n.p,{children:"To enhance security and privacy, Statsig allows you to create per-environment API keys. This ensures that SDKs initialized with specific environment keys will only access the rules relevant to that environment."}),"\n",(0,i.jsx)(n.h3,{id:"steps-to-generate-environment-specific-api-keys",children:"Steps to Generate Environment-Specific API Keys:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Go to ",(0,i.jsx)(n.strong,{children:"Project Settings"})," > ",(0,i.jsx)(n.strong,{children:"Environments & Keys"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Click ",(0,i.jsx)(n.strong,{children:"Generate New Key"}),", and specify the environment for which you want to generate the API key."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"https://user-images.githubusercontent.com/101903926/221450416-44348e77-631a-4ae1-98d1-00d5a4c282ad.png",alt:"Generate API Key"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": The default environments\u2014Development, Staging, and Production\u2014share the same server and client-side API keys. You can generate new keys for custom environments as needed."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>l});var i=t(96540);const s={},r=i.createContext(s);function o(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);