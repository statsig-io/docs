"use strict";(self.webpackChunkstatsig_docs=self.webpackChunkstatsig_docs||[]).push([[78500],{74971:(e,i,t)=>{t.r(i),t.d(i,{assets:()=>c,contentTitle:()=>a,default:()=>d,frontMatter:()=>o,metadata:()=>r,toc:()=>l});var s=t(74848),n=t(28453);const o={title:"Warehouse Native Debugging Guide",slug:"/statsig-warehouse-native/guides/debugging",sidebar_label:"Debugging",keywords:["owner:vm"],last_update:{date:new Date("2025-09-18T00:00:00.000Z")}},a=void 0,r={id:"statsig-warehouse-native/guides/debugging",title:"Warehouse Native Debugging Guide",description:"Debugging",source:"@site/docs/statsig-warehouse-native/guides/debugging.md",sourceDirName:"statsig-warehouse-native/guides",slug:"/statsig-warehouse-native/guides/debugging",permalink:"/statsig-warehouse-native/guides/debugging",draft:!1,unlisted:!1,editUrl:"https://github.com/statsig-io/docs/edit/main/docs/statsig-warehouse-native/guides/debugging.md",tags:[],version:"current",lastUpdatedAt:17581536e5,frontMatter:{title:"Warehouse Native Debugging Guide",slug:"/statsig-warehouse-native/guides/debugging",sidebar_label:"Debugging",keywords:["owner:vm"],last_update:{date:"2025-09-18T00:00:00.000Z"}},sidebar:"warehouse",previous:{title:"Setup Checklist",permalink:"/statsig-warehouse-native/guides/checklist"},next:{title:"View SQL",permalink:"/statsig-warehouse-native/guides/sql"}},c={},l=[{value:"Debugging",id:"debugging",level:2},{value:"Common Issues",id:"common-issues",level:2},{value:"Mismatched IDs",id:"mismatched-ids",level:3},{value:"Conflicting Filters",id:"conflicting-filters",level:3},{value:"Common Points of Confusion",id:"common-points-of-confusion",level:2},{value:"Join conditions",id:"join-conditions",level:3},{value:"Winsorization/Capping",id:"winsorizationcapping",level:3},{value:"CUPED",id:"cuped",level:3},{value:"Metric Types",id:"metric-types",level:3}];function u(e){const i={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",ul:"ul",...(0,n.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.h2,{id:"debugging",children:"Debugging"}),"\n",(0,s.jsx)(i.p,{children:"When you're interacting with complex data sources, it's common to run into strange artifacts or results that don't make sense. Statsig will proactively monitor for these and let you know if something looks off. This guide is to help with the next steps of identifying what went wrong, and for reconciling differences in results between Statsig's analysis and your own."}),"\n",(0,s.jsx)(i.h2,{id:"common-issues",children:"Common Issues"}),"\n",(0,s.jsx)(i.h3,{id:"mismatched-ids",children:"Mismatched IDs"}),"\n",(0,s.jsxs)(i.p,{children:["In many cases, you may have multiple versions of the same ID across tables. For example, the user ",(0,s.jsx)(i.code,{children:"abc123"})," in one source might be ",(0,s.jsx)(i.code,{children:"USER_abc123"})," in another; or, in some cases, certain loggers will hash ID values for privacy reasons."]}),"\n",(0,s.jsx)(i.p,{children:"This will usually result in Statsig triggering an alert that it was unable to join data between sources. What we recommend doing is:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Going to the relevant sources and running the sample queries to check for obvious ID mismatches"}),"\n",(0,s.jsx)(i.li,{children:"Failing that, find the job which isn't able to join sources and copy SQL. By working through the SQL query you should be able to pinpoint where the mismatch is occurring"}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"conflicting-filters",children:"Conflicting Filters"}),"\n",(0,s.jsx)(i.p,{children:"Statsig allows a high degree of customization in explore queries and on explore pages. This can lead to scenarios where you add two conflicting filters that, together, will never pass. For example:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"You have a metric with a cohort window from 7 to 13 days, but set up your experiment analysis to run on users' first 6 days. These two filters return no users."}),"\n",(0,s.jsxs)(i.li,{children:["You create a count metric filtered to ",(0,s.jsx)(i.code,{children:"event='purchase"}),"', and then create a local metric that filters to ",(0,s.jsx)(i.code,{children:"event='checkout'"}),". This set of filters will also return a null set."]}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:"Like the above, we recommend going to the Unit-Level Aggregations jobs (where filters are rendered) and checking the filter by searching for the metric name of interest in the SQL code."}),"\n",(0,s.jsx)(i.h2,{id:"common-points-of-confusion",children:"Common Points of Confusion"}),"\n",(0,s.jsx)(i.p,{children:"Many data scientists run their own analyses using the Statsig staging data in their warehouse. In some cases, they can see very different results. There's a few common methodology differences that tend to explain this:"}),"\n",(0,s.jsx)(i.h3,{id:"join-conditions",children:"Join conditions"}),"\n",(0,s.jsx)(i.p,{children:"Statsig joins events/metrics to exposures based on the event or metric input data occurring after the user was exposed to the experiment that's being analyzed. If you check the Treat Timestamp as Date setting, this is done by comparing dates. By default, it uses a timestamp. Not having a time filter, or using a Date when Statsig uses a timestamp (or vice versa) can yield very different results in some cases."}),"\n",(0,s.jsx)(i.h3,{id:"winsorizationcapping",children:"Winsorization/Capping"}),"\n",(0,s.jsx)(i.p,{children:"Metrics can be configured to be capped or winsorized in Statsig. If you have extreme outliers, you will see significant differences in results if this procedure is not carried out. You can perform this procedure yourself, or create a local metric (or clone the metric) without winsorization."}),"\n",(0,s.jsx)(i.h3,{id:"cuped",children:"CUPED"}),"\n",(0,s.jsx)(i.p,{children:"CUPED can greatly reduce variance, and for aggregation (non-ratio) metrics can shift the group-level mean estimates if there's pre-experiment bias. You can turn this off in the scorecard any time to view the non-cuped results for comparison."}),"\n",(0,s.jsx)(i.h3,{id:"metric-types",children:"Metric Types"}),"\n",(0,s.jsx)(i.p,{children:"In some cases, users have assumed that their input data is binomial - that is, the metric will only be 1-or-0 at a unit/user level. If this isn't the case, and the metric is configured as a count or sum, it can lead to much higher variance than expected."})]})}function d(e={}){const{wrapper:i}={...(0,n.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},28453:(e,i,t)=>{t.d(i,{R:()=>a,x:()=>r});var s=t(96540);const n={},o=s.createContext(n);function a(e){const i=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function r(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:a(e.components),s.createElement(o.Provider,{value:i},e.children)}}}]);