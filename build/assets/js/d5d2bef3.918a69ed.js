"use strict";(self.webpackChunkstatsig_docs=self.webpackChunkstatsig_docs||[]).push([[52750],{49046:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>r,toc:()=>c});var s=n(74848),a=n(28453);const i={title:"Mean Metrics",sidebar_label:"Mean",keywords:["owner:vm"],last_update:{date:new Date("2025-09-18T00:00:00.000Z")}},o=void 0,r={id:"statsig-warehouse-native/metrics/mean",title:"Mean Metrics",description:"Summary",source:"@site/docs/statsig-warehouse-native/metrics/mean.md",sourceDirName:"statsig-warehouse-native/metrics",slug:"/statsig-warehouse-native/metrics/mean",permalink:"/statsig-warehouse-native/metrics/mean",draft:!1,unlisted:!1,editUrl:"https://github.com/statsig-io/docs/edit/main/docs/statsig-warehouse-native/metrics/mean.md",tags:[],version:"current",lastUpdatedAt:17581536e5,frontMatter:{title:"Mean Metrics",sidebar_label:"Mean",keywords:["owner:vm"],last_update:{date:"2025-09-18T00:00:00.000Z"}},sidebar:"warehouse",previous:{title:"Unit Count (Daily Participation)",permalink:"/statsig-warehouse-native/metrics/unit-count-rate"},next:{title:"Ratio",permalink:"/statsig-warehouse-native/metrics/ratio"}},l={},c=[{value:"Summary",id:"summary",level:2},{value:"Use Cases",id:"use-cases",level:3},{value:"Calculation",id:"calculation",level:2},{value:"Methodology Notes",id:"methodology-notes",level:3},{value:"Options",id:"options",level:2}];function u(e){const t={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h2,{id:"summary",children:"Summary"}),"\n",(0,s.jsx)(t.p,{children:"Mean metrics calculate the mean value of a numeric column in a metric source."}),"\n",(0,s.jsx)(t.h3,{id:"use-cases",children:"Use Cases"}),"\n",(0,s.jsx)(t.p,{children:'This is most often used on event-level data, e.g. measure the "Average Time to Load", or "Average Purchase Value".'}),"\n",(0,s.jsx)(t.h2,{id:"calculation",children:"Calculation"}),"\n",(0,s.jsx)(t.p,{children:"At the unit level, mean metrics SUM their value column, and COUNT records where the value column is non-null."}),"\n",(0,s.jsx)(t.p,{children:"At the group level, the mean is calculated as the SUM of the unit-level sums, and the SUM of the unit-level counts."}),"\n",(0,s.jsx)(t.p,{children:"This would look like the SQL below:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:'-- Unit Level\nSELECT\n  source_data.unit_id,\n  exposure_data.group_id,\n  SUM(source_data.value_column) as value,\n  COUNT(source_data.value_column) as records\nFROM source_data\nJOIN exposure_data\nON\n  -- Only include users who saw the experiment\n  source_data.unit_id = exposure_data.unit_id\n  -- Only include data from after the user saw the experiment\n  -- In this case exposure_data is already deduped to the "first exposure"\n  AND source_data.timestamp >= exposure_data.timestamp\nWHERE value_column IS NOT NULL\nGROUP BY\n  source_data.unit_id,\n  exposure_data.group_id;\n\n-- Group Level\nSELECT\n  group_id,\n  SUM(value)/SUM(records) as mean\nFROM unit_data\nGROUP BY group_id;\n'})}),"\n",(0,s.jsx)(t.h3,{id:"methodology-notes",children:"Methodology Notes"}),"\n",(0,s.jsxs)(t.p,{children:["Under the hood, mean metrics function like a SUM/COUNT ",(0,s.jsx)(t.a,{href:"./ratio",children:"Ratio"})," metric.\nMean metrics have the delta method applied to account for covariance between unit-level numerators and denominators."]}),"\n",(0,s.jsx)(t.h2,{id:"options",children:"Options"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["Metric Breakdowns","\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"You can configure Metadata Columns to group results by, getting easy access to dimensional views in pulse results"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["Winsorization","\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Specify a lower and/or upper percentile bound to winsorize at. All values below the lower threshold, or above the upper threshold, will be clamped to that threshold to reduce the outsized impact of outliers on your analysis"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.a,{href:"/statsig-warehouse-native/features/cohort-metrics",children:"Cohort Windows"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["You can specify a window for data collection after a unit's exposure. For example, a 0-1 day cohort window would only count actions from days 0 and 1 after a unit was exposed to an experiment","\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Only include units with a completed window"})," can be selected to remove units out of pulse analysis for this metric until the cohort window has completed"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.a,{href:"/statsig-warehouse-native/features/cohort-metrics",children:"Baked Metrics"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.a,{href:"/statsig-warehouse-native/features/cohort-metrics",children:"Baked Metrics"})," allow you to specify how long a metric needs to mature. This is common in situations like chargebacks or cancellations. Statsig will delay loading the data until the window has elapsed, and only calculate pulse results for that metric if a unit's metric has matured."]}),"\n"]}),"\n"]}),"\n"]})]})}function d(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>r});var s=n(96540);const a={},i=s.createContext(a);function o(e){const t=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),s.createElement(i.Provider,{value:t},e.children)}}}]);