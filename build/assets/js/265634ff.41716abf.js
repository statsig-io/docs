"use strict";(self.webpackChunkstatsig_docs=self.webpackChunkstatsig_docs||[]).push([[69211],{46820:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>a,contentTitle:()=>l,default:()=>u,frontMatter:()=>r,metadata:()=>i,toc:()=>c});var n=t(74848),o=t(28453);const r={title:"Ingesting Cloudflare Logs and Metrics into Statsig",sidebar_label:"Cloudflare Logs",slug:"/server/concepts/cloudflare",keywords:["owner:hoa"],last_update:{date:new Date("2025-09-18T00:00:00.000Z")}},l="Ingesting Cloudflare Logs into Statsig",i={id:"server/concepts/cloudflare",title:"Ingesting Cloudflare Logs and Metrics into Statsig",description:"Overview",source:"@site/docs/server/concepts/cloudflare.mdx",sourceDirName:"server/concepts",slug:"/server/concepts/cloudflare",permalink:"/server/concepts/cloudflare",draft:!1,unlisted:!1,editUrl:"https://github.com/statsig-io/docs/edit/main/docs/server/concepts/cloudflare.mdx",tags:[],version:"current",lastUpdatedAt:17581536e5,frontMatter:{title:"Ingesting Cloudflare Logs and Metrics into Statsig",sidebar_label:"Cloudflare Logs",slug:"/server/concepts/cloudflare",keywords:["owner:hoa"],last_update:{date:"2025-09-18T00:00:00.000Z"}},sidebar:"cloud",previous:{title:"Open Telemetry Logs and Metrics",permalink:"/server/concepts/open_telemetry"},next:{title:"Statsig IP Ranges",permalink:"/infrastructure/statsig_ip_ranges"}},a={},c=[{value:"Overview",id:"overview",level:2},{value:"\u2705 Prerequisites",id:"-prerequisites",level:2},{value:"Configuring Logpush Worker",id:"configuring-logpush-worker",level:2},{value:"Verify Logs on Statsig Console",id:"verify-logs-on-statsig-console",level:2},{value:"\ud83d\udd17 Resources",id:"-resources",level:2}];function d(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.header,{children:(0,n.jsx)(s.h1,{id:"ingesting-cloudflare-logs-into-statsig",children:"Ingesting Cloudflare Logs into Statsig"})}),"\n",(0,n.jsx)(s.h2,{id:"overview",children:"Overview"}),"\n",(0,n.jsx)(s.p,{children:"This guide walks you through setting up the Cloudflare Logpush worker in your Cloudflare account and configuring it to send logs and metrics to Statsig using cURL and the Logpush API"}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsx)(s.h2,{id:"-prerequisites",children:"\u2705 Prerequisites"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"https://developers.cloudflare.com/logs/logpush/",children:"Cloudflare Logpush enabled for your account"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"https://docs.statsig.com/server-core/",children:"Statsig Server SDK Key"})}),"\n"]}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsx)(s.h2,{id:"configuring-logpush-worker",children:"Configuring Logpush Worker"}),"\n",(0,n.jsxs)(s.ol,{children:["\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"https://developers.cloudflare.com/fundamentals/api/get-started/create-token/",children:"Create api token"})}),"\n",(0,n.jsx)(s.li,{children:"Make sure token has logs edit permissions at the account level"}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"https://developers.cloudflare.com/fundamentals/account/find-account-and-zone-ids/",children:"Locate cloudflare account ID"})}),"\n",(0,n.jsx)(s.li,{children:"Run the following command and get the job id"}),"\n"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:'ACCOUNT_ID=<my account id>\nCLOUDFLARE_API_TOKEN=<cloudflare token>\ncurl "https://api.cloudflare.com/client/v4/accounts/$ACCOUNT_ID/logpush/jobs" \\\n  --request POST \\\n  --header "Authorization: Bearer $CLOUDFLARE_API_TOKEN" \\\n  --json \'{\n    "name": "statsig-logpush-job",\n    "destination_conf": "https://api.statsig.com/v1/log_event/cf_log_drain?header_statsig-api-key=<statsig-secret-key>&header_Content-Type=application%2Fjson",\n    "dataset": "workers_trace_events",\n    "output_options": {\n      "field_names": [],\n      "output_type": "ndjson",\n      "batch_prefix": "{\\"events\\":[",\n      "batch_suffix": "\\n]}\\n",\n      "record_prefix": "\\n  {\\"info\\":{",\n      "record_suffix": "}}",\n      "record_delimiter": ",",\n      "timestamp_format": "rfc3339"\n    }\n  }\'\n'})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:'In Cloudflare dashboard, navigate to "Analytics & Logs" -> "Logpush", and enable the logpush job'}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"verify-logs-on-statsig-console",children:"Verify Logs on Statsig Console"}),"\n",(0,n.jsxs)(s.p,{children:["Explore your Logs and Metrics at ",(0,n.jsx)(s.a,{href:"http://console.statsig.com",children:"console.statsig.com"})," with the Logs Explorer and Metrics Explorer products under Analytics on the sidebar menu \ud83d\ude42"]}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsx)(s.h2,{id:"-resources",children:"\ud83d\udd17 Resources"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"https://developers.cloudflare.com/logs/logpush/examples/example-logpush-curl/",children:"Manage Logpush with cURL"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"https://developers.cloudflare.com/logs/logpush/logpush-job/log-output-options/#output-types",children:"Logpush output types"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"https://developers.cloudflare.com/api/resources/logpush/subresources/jobs/methods/create/",children:"Create logpush API docs"})}),"\n"]})]})}function u(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},28453:(e,s,t)=>{t.d(s,{R:()=>l,x:()=>i});var n=t(96540);const o={},r=n.createContext(o);function l(e){const s=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),n.createElement(r.Provider,{value:s},e.children)}}}]);