"use strict";(self.webpackChunkstatsig_docs=self.webpackChunkstatsig_docs||[]).push([[17323],{28717:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>o,default:()=>c,frontMatter:()=>a,metadata:()=>r,toc:()=>l});var i=n(74848),s=n(28453);const a={title:"Unit Count (One-Time Event) Metrics",sidebar_label:"Unit Count (One-Time Event)",keywords:["owner:vm"],last_update:{date:new Date("2025-09-18T00:00:00.000Z")}},o=void 0,r={id:"statsig-warehouse-native/metrics/unit-count-once",title:"Unit Count (One-Time Event) Metrics",description:"Summary",source:"@site/docs/statsig-warehouse-native/metrics/unit-count-once.md",sourceDirName:"statsig-warehouse-native/metrics",slug:"/statsig-warehouse-native/metrics/unit-count-once",permalink:"/statsig-warehouse-native/metrics/unit-count-once",draft:!1,unlisted:!1,editUrl:"https://github.com/statsig-io/docs/edit/main/docs/statsig-warehouse-native/metrics/unit-count-once.md",tags:[],version:"current",lastUpdatedAt:17581536e5,frontMatter:{title:"Unit Count (One-Time Event) Metrics",sidebar_label:"Unit Count (One-Time Event)",keywords:["owner:vm"],last_update:{date:"2025-09-18T00:00:00.000Z"}},sidebar:"warehouse",previous:{title:"Count Distinct",permalink:"/statsig-warehouse-native/metrics/count-distinct"},next:{title:"Unit Count (Window)",permalink:"/statsig-warehouse-native/metrics/unit-count-window"}},u={},l=[{value:"Summary",id:"summary",level:2},{value:"Use Cases",id:"use-cases",level:3},{value:"Calculation",id:"calculation",level:2},{value:"Methodology Notes",id:"methodology-notes",level:3},{value:"Options",id:"options",level:2}];function d(e){const t={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h2,{id:"summary",children:"Summary"}),"\n",(0,i.jsx)(t.p,{children:"Unit count metrics with the one-time event rollup type measure if a unit performed an action any time after being exposed to the experiment."}),"\n",(0,i.jsx)(t.h3,{id:"use-cases",children:"Use Cases"}),"\n",(0,i.jsx)(t.p,{children:"This is an extremely common metric type, used to measure participation rates among users in the experiment."}),"\n",(0,i.jsx)(t.h2,{id:"calculation",children:"Calculation"}),"\n",(0,i.jsx)(t.p,{children:"At the unit level, unit count metrics create a 1/0 flag for if they participated."}),"\n",(0,i.jsx)(t.p,{children:"At the group level, the mean is calculated as the SUM of the unit-level flags, divided by the count of UNIQUE UNITS exposed to the experiment."}),"\n",(0,i.jsx)(t.p,{children:"This would look like the SQL below:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:'-- Unit Level\nSELECT distinct\n  source_data.unit_id,\n  exposure_data.group_id,\n  1 as value\nFROM source_data\nJOIN exposure_data\nON\n  -- Only include users who saw the experiment\n  source_data.unit_id = exposure_data.unit_id\n  -- Only include data from after the user saw the experiment\n  -- In this case exposure_data is already deduped to the "first exposure"\n  AND source_data.timestamp >= exposure_data.timestamp\n;\n\n-- Experiment\nSELECT\n  group_id,\n  COUNT(distinct unit_id) total_units\nFROM exposure_data\nGROUP BY group_id;\n\n-- Group Level\nSELECT\n  group_id,\n  SUM(value)/SUM(total_units) as mean\nFROM unit_data\nJOIN group_data\nUSING (group_id)\nGROUP BY group_id;\n'})}),"\n",(0,i.jsx)(t.h3,{id:"methodology-notes",children:"Methodology Notes"}),"\n",(0,i.jsx)(t.p,{children:"Note that daily/days-since-exposure views for user-day metrics are calculated per-day. That is, if a user is active on all 14 days of an experiment, they would contribute 1 to the overall cumulative numerator, but 1 to each day of the daily view; that is, they are not deduped in that view. This generally yields a more intuitive interpretation, and leads to less sparse timeseries data on long experiments. However, this can lead to mix-shift effects where the daily trend goes in the opposite direction of the cumulative timeseries since the daily returning users have already been seen and do not contribute additional metric value to the cumulative view."}),"\n",(0,i.jsx)(t.p,{children:"Unit count metrics are simple, and will use the sql SUM aggregation. However, there are many advanced options you can apply."}),"\n",(0,i.jsx)(t.h2,{id:"options",children:"Options"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["Metric Breakdowns","\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"You can configure Metadata Columns to group results by, getting easy access to dimensional views in pulse results"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["Multi Source","\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Sums can be built with inputs from multiple metric sources; think of this as a UNION in SQL. This can be useful if you have the same measure in sharded or disparate tables"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["Rollup Mode","\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Rollup Mode controls the specific way that Unit Count metrics are aggregated"}),"\n"]}),"\n"]}),"\n"]})]})}function c(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>r});var i=n(96540);const s={},a=i.createContext(s);function o(e){const t=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(a.Provider,{value:t},e.children)}}}]);