"use strict";(self.webpackChunkstatsig_docs=self.webpackChunkstatsig_docs||[]).push([[88729],{29264:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>o,default:()=>l,frontMatter:()=>a,metadata:()=>r,toc:()=>d});var i=n(74848),s=n(28453);const a={title:"Unit Count (Window) Metrics",slug:"/statsig-warehouse-native/metrics/unit-count-window",sidebar_label:"Unit Count (Window)",keywords:["owner:vm"],last_update:{date:new Date("2025-09-18T00:00:00.000Z")}},o=void 0,r={id:"statsig-warehouse-native/metrics/unit-count-window",title:"Unit Count (Window) Metrics",description:"Summary",source:"@site/docs/statsig-warehouse-native/metrics/unit-count-window.md",sourceDirName:"statsig-warehouse-native/metrics",slug:"/statsig-warehouse-native/metrics/unit-count-window",permalink:"/statsig-warehouse-native/metrics/unit-count-window",draft:!1,unlisted:!1,editUrl:"https://github.com/statsig-io/docs/edit/main/docs/statsig-warehouse-native/metrics/unit-count-window.md",tags:[],version:"current",lastUpdatedAt:17581536e5,frontMatter:{title:"Unit Count (Window) Metrics",slug:"/statsig-warehouse-native/metrics/unit-count-window",sidebar_label:"Unit Count (Window)",keywords:["owner:vm"],last_update:{date:"2025-09-18T00:00:00.000Z"}},sidebar:"warehouse",previous:{title:"Unit Count (One-Time Event)",permalink:"/statsig-warehouse-native/metrics/unit-count-once"},next:{title:"Unit Count (Latest Value)",permalink:"/statsig-warehouse-native/metrics/unit-count-latest"}},u={},d=[{value:"Summary",id:"summary",level:2},{value:"Use Cases",id:"use-cases",level:3},{value:"Calculation",id:"calculation",level:2},{value:"Options",id:"options",level:2}];function c(e){const t={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h2,{id:"summary",children:"Summary"}),"\n",(0,i.jsx)(t.p,{children:"Unit count metrics with the windowed event rollup type measure if a unit performed an action in a specific period of time after first being exposed to the experiment."}),"\n",(0,i.jsx)(t.h3,{id:"use-cases",children:"Use Cases"}),"\n",(0,i.jsx)(t.p,{children:"This is an extremely common metric type, used to measure participation rates early in experiments, or to measure retention later into an experiment (e.g. did a user come back in their second week)."}),"\n",(0,i.jsx)(t.h2,{id:"calculation",children:"Calculation"}),"\n",(0,i.jsx)(t.p,{children:"At the unit level, unit count metrics create a 1/0 flag for if they participated during the time window. The time window is defined relative to the unit's first exposure. Subsequent exposures are not considered."}),"\n",(0,i.jsx)(t.p,{children:"At the group level, the mean is calculated as the SUM of the unit-level flags, divided by the count of UNIQUE UNITS exposed to the experiment."}),"\n",(0,i.jsx)(t.p,{children:"This would look like the SQL below:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:'-- Unit Level\nSELECT distinct\n  source_data.unit_id,\n  exposure_data.group_id,\n  MAX(if(source_data.in_time_window, 1, 0)) as value\nFROM source_data\nJOIN exposure_data\nON\n  -- Only include users who saw the experiment\n  source_data.unit_id = exposure_data.unit_id\n  -- Only include data from after the user saw the experiment\n  -- In this case exposure_data is already deduped to the "first exposure"\n  AND source_data.timestamp >= exposure_data.timestamp\nGROUP BY\n  source_data.unit_id,\n  exposure_data.group_id;\n;\n\n-- Experiment\nSELECT\n  group_id,\n  COUNT(distinct unit_id) total_units\nFROM exposure_data\nGROUP BY group_id;\n\n-- Group Level\nSELECT\n  group_id,\n  SUM(value)/SUM(total_units) as mean\nFROM unit_data\nJOIN group_data\nUSING (group_id)\nGROUP BY group_id;\n'})}),"\n",(0,i.jsx)(t.h2,{id:"options",children:"Options"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["Metric Breakdowns","\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"You can configure Metadata Columns to group results by, getting easy access to dimensional views in pulse results"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["Multi Source","\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Sums can be built with inputs from multiple metric sources; think of this as a UNION in SQL. This can be useful if you have the same measure in sharded or disparate tables"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["Rollup Mode","\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Rollup Mode controls the specific way that Unit Count metrics are aggregated"}),"\n"]}),"\n"]}),"\n"]})]})}function l(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>r});var i=n(96540);const s={},a=i.createContext(s);function o(e){const t=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(a.Provider,{value:t},e.children)}}}]);