"use strict";(self.webpackChunkstatsig_docs=self.webpackChunkstatsig_docs||[]).push([[97522],{43102:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>c,contentTitle:()=>a,default:()=>d,frontMatter:()=>r,metadata:()=>o,toc:()=>l});var i=t(74848),n=t(28453);const r={title:"Bigquery Connection",slug:"/statsig-warehouse-native/connecting-your-warehouse/bigquery",sidebar_label:"BigQuery",keywords:["owner:vm"],last_update:{date:new Date("2025-09-18T00:00:00.000Z")}},a=void 0,o={id:"statsig-warehouse-native/connecting-your-warehouse/bigquery",title:"Bigquery Connection",description:"Overview",source:"@site/docs/statsig-warehouse-native/connecting-your-warehouse/bigquery.md",sourceDirName:"statsig-warehouse-native/connecting-your-warehouse",slug:"/statsig-warehouse-native/connecting-your-warehouse/bigquery",permalink:"/statsig-warehouse-native/connecting-your-warehouse/bigquery",draft:!1,unlisted:!1,editUrl:"https://github.com/statsig-io/docs/edit/main/docs/statsig-warehouse-native/connecting-your-warehouse/bigquery.md",tags:[],version:"current",lastUpdatedAt:17581536e5,frontMatter:{title:"Bigquery Connection",slug:"/statsig-warehouse-native/connecting-your-warehouse/bigquery",sidebar_label:"BigQuery",keywords:["owner:vm"],last_update:{date:"2025-09-18T00:00:00.000Z"}},sidebar:"warehouse",previous:{title:"Athena",permalink:"/statsig-warehouse-native/connecting-your-warehouse/athena"},next:{title:"Databricks",permalink:"/statsig-warehouse-native/connecting-your-warehouse/databricks"}},c={},l=[{value:"Overview",id:"overview",level:2},{value:"Grant Permissions to Statsig&#39;s Service Account",id:"grant-permissions-to-statsigs-service-account",level:2},{value:"Using a First Party Service Account",id:"using-a-first-party-service-account",level:2},{value:"BigQuery Project ID",id:"bigquery-project-id",level:2},{value:"What is Statsig&#39;s Customer ID on BigQuery",id:"what-is-statsigs-customer-id-on-bigquery",level:3},{value:"What IP addresses will Statsig access data warehouses from?",id:"what-ip-addresses-will-statsig-access-data-warehouses-from",level:3}];function u(e){const s={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",ul:"ul",...(0,n.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(s.p,{children:"To set up a connection with BigQuery, there are two supported methods:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Grant Permissions to a Statsig-owned Service Account"}),"\n",(0,i.jsx)(s.li,{children:"Provide Credentials for Your Own First-Party Service Account"}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"In both cases, you'll need:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Your BigQuery Project ID"}),"\n",(0,i.jsx)(s.li,{children:"The dataset Statsig will use to save temporary tables and materialized results"}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"Once you\u2019ve chosen your method, start by enabling the BigQuery source in your project settings."}),"\n",(0,i.jsx)(s.h2,{id:"grant-permissions-to-statsigs-service-account",children:"Grant Permissions to Statsig's Service Account"}),"\n",(0,i.jsx)(s.p,{children:"You need to grant some permissions for Statsig from your Google Cloud console in order for us to access your BigQuery data."}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["In your BigQuery's ",(0,i.jsx)(s.a,{href:"https://console.cloud.google.com/iam-admin/",children:"IAM & Admin settings"}),", add the Statsig service account you copied in the Statsig Console as a new principal for your project, and give it the following roles:","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"BigQuery User"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{src:"https://user-images.githubusercontent.com/87334575/198107543-b3bcc19a-3231-4128-be42-a5dd52fb168a.png",alt:"BigQuery IAM permissions configuration"})}),"\n",(0,i.jsx)("br",{}),"\n",(0,i.jsxs)(s.ol,{start:"2",children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["Navigate to your ",(0,i.jsx)(s.a,{href:"https://console.cloud.google.com/bigquery",children:"BigQuery SQL Workspace"}),', choose the dataset, click on "+ Sharing" -> "Permissions" -> "Add Principal" to give the same Statsig service account "BigQuery Data Viewer" role on a dataset. Do this for any datasets you want the service user to be able to access.']}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{src:"https://user-images.githubusercontent.com/77478330/175113611-90e618ad-f6e8-4005-933e-2a5660a14466.png",alt:"BigQuery dataset permissions interface"})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:'Following the steps above, give the "BigQuery Data Editor" role on the dataset you want Statsig to use for its staging data.'}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"Now the service account should have the required permissions to run queries and materialize results."}),"\n",(0,i.jsx)(s.h2,{id:"using-a-first-party-service-account",children:"Using a First Party Service Account"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:"Speak with your Statsig technical point of contact and request enabling 1st party service account connectivity for Big Query"}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:"On the BQ service accounts page, click 'Manage Keys' for the service account you want to use"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{alt:"BQ 1st party service account",src:t(63678).A+"",width:"2826",height:"1088"})}),"\n",(0,i.jsxs)(s.ol,{start:"3",children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["Create a new JSON key (which will download a JSON file)\n",(0,i.jsx)(s.img,{alt:"BQ 1st party service account",src:t(28142).A+"",width:"1633",height:"758"}),"\n",(0,i.jsx)(s.img,{alt:"BQ 1st party service account",src:t(71159).A+"",width:"1758",height:"494"})]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:"Copy/paste the contents of that file into the Service Account Private Key field in the Statsig Console and save the connection"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"bigquery-project-id",children:"BigQuery Project ID"}),"\n",(0,i.jsx)(s.p,{children:"Find your BigQuery Project ID below"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsx)(s.li,{children:"Click on your Project Dropdown inside your Cloud Console."}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{src:"https://user-images.githubusercontent.com/108023879/187518062-7027f682-d1fd-445e-9947-897e44ea929e.png",alt:"Frame 4"})}),"\n",(0,i.jsxs)(s.ol,{start:"2",children:["\n",(0,i.jsx)(s.li,{children:"Copy and paste relevant Project ID from the modal pop-up."}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{src:"https://user-images.githubusercontent.com/108023879/187517901-9e7fd237-8325-4254-a1bd-c75f0ea08497.png",alt:"Frame 5"})}),"\n",(0,i.jsx)(s.h3,{id:"what-is-statsigs-customer-id-on-bigquery",children:"What is Statsig's Customer ID on BigQuery"}),"\n",(0,i.jsx)(s.p,{children:"C01d5f80s"}),"\n",(0,i.jsx)(s.h3,{id:"what-ip-addresses-will-statsig-access-data-warehouses-from",children:"What IP addresses will Statsig access data warehouses from?"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.a,{href:"/data-warehouse-ingestion/faq#what-ip-addresses-will-statsig-access-data-warehouses-from",children:"See FAQ"})})]})}function d(e={}){const{wrapper:s}={...(0,n.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}},63678:(e,s,t)=>{t.d(s,{A:()=>i});const i=t.p+"assets/images/1stprtybq-2d4a792339d849b6a6b3e141f86e3601.png"},28142:(e,s,t)=>{t.d(s,{A:()=>i});const i=t.p+"assets/images/1stprtybq2-49844de4f82c241adabecc615faccab6.png"},71159:(e,s,t)=>{t.d(s,{A:()=>i});const i=t.p+"assets/images/1stprtybq3-ff41eebe9fa27db5ce3e47922d2a7c3a.png"},28453:(e,s,t)=>{t.d(s,{R:()=>a,x:()=>o});var i=t(96540);const n={},r=i.createContext(n);function a(e){const s=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:a(e.components),i.createElement(r.Provider,{value:s},e.children)}}}]);