"use strict";(self.webpackChunkstatsig_docs=self.webpackChunkstatsig_docs||[]).push([[18098],{46745:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>u,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>a,toc:()=>l});var i=t(74848),n=t(28453);const r={title:'Custom "Explore" Queries',sidebar_label:'Custom "Explore" Queries',slug:"/pulse/custom-queries",keywords:["owner:vm"],last_update:{date:new Date("2025-09-18T00:00:00.000Z")}},o=void 0,a={id:"pulse/custom-queries",title:'Custom "Explore" Queries',description:'Custom "Explore" Queries',source:"@site/docs/pulse/custom-queries.md",sourceDirName:"pulse",slug:"/pulse/custom-queries",permalink:"/pulse/custom-queries",draft:!1,unlisted:!1,editUrl:"https://github.com/statsig-io/docs/edit/main/docs/pulse/custom-queries.md",tags:[],version:"current",lastUpdatedAt:17581536e5,frontMatter:{title:'Custom "Explore" Queries',sidebar_label:'Custom "Explore" Queries',slug:"/pulse/custom-queries",keywords:["owner:vm"],last_update:{date:"2025-09-18T00:00:00.000Z"}},sidebar:"cloud",previous:{title:"Pulse FAQs",permalink:"/pulse/best-faq"},next:{title:"Aggregated Impact",permalink:"/aggregated-impact"}},u={},l=[{value:"Custom &quot;Explore&quot; Queries",id:"custom-explore-queries",level:2},{value:"Dimension Loading Timing for Precomputed User Dimensions",id:"dimension-loading-timing-for-precomputed-user-dimensions",level:3},{value:"Running a Custom Query",id:"running-a-custom-query",level:3},{value:"Viewing a Custom Query in Explore",id:"viewing-a-custom-query-in-explore",level:3},{value:"Scheduling a Custom Query",id:"scheduling-a-custom-query",level:3},{value:"Reviewing Custom Query Results",id:"reviewing-custom-query-results",level:3},{value:"Sequential Testing and Custom Queries",id:"sequential-testing-and-custom-queries",level:4}];function c(e){const s={a:"a",admonition:"admonition",em:"em",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,n.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.h2,{id:"custom-explore-queries",children:'Custom "Explore" Queries'}),"\n",(0,i.jsx)(s.p,{children:"Custom queries are a way to run additional custom experiment analyses on your existing data beyond what is in your main Results tab. You may run them to gain deeper insights from your experiments and feature roll-outs, debug interesting results, or scope down your results to interesting sub-groups. Custom queries allow you to filter or group metrics by event or user dimensions, or filter to a specific set of users to see how an experiment or launch has impacted these users' experience."}),"\n",(0,i.jsxs)(s.p,{children:["Custom queries are experimental analyses just like in the main Results tab, and all the same statistical procedures apply. Results are computed as p-values and confidence intervals for your metric deltas, and advanced statistical methods like ",(0,i.jsx)(s.a,{href:"/stats-engine/methodologies/cuped",children:"CUPED"})," and ",(0,i.jsx)(s.a,{href:"/experiments-plus/sequential-testing",children:"Sequential Testing"})," can be used."]}),"\n",(0,i.jsx)(s.admonition,{type:"important",children:(0,i.jsx)(s.p,{children:"Be careful when drawing your inferences of Custom Queries, especially when grouping by a dimension with lots of options. This can increase your chance of seeing a false-positive statistically significant result."})}),"\n",(0,i.jsx)(s.h3,{id:"dimension-loading-timing-for-precomputed-user-dimensions",children:"Dimension Loading Timing for Precomputed User Dimensions"}),"\n",(0,i.jsx)(s.p,{children:"When viewing results for precomputed user dimensions (which are configured and run on a schedule), be aware that these dimensions are loaded through separate asynchronous explore queries. This means:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"The main experiment results will appear first"}),"\n",(0,i.jsx)(s.li,{children:"Precomputed dimensions will continue loading in the background and become available within a few minutes"}),"\n",(0,i.jsx)(s.li,{children:"This timing gap is most noticeable immediately after the first reload of the day"}),"\n",(0,i.jsx)(s.li,{children:'If you see "No dimensions available for this time range" for precomputed dimensions, wait a few minutes and refresh to see if dimensions have completed loading'}),"\n"]}),"\n",(0,i.jsx)(s.admonition,{type:"note",children:(0,i.jsx)(s.p,{children:"This timing behavior only affects precomputed user dimensions that run on a schedule. User-triggered custom queries do not experience this asynchronous loading delay."})}),"\n",(0,i.jsx)(s.h3,{id:"running-a-custom-query",children:"Running a Custom Query"}),"\n",(0,i.jsxs)(s.p,{children:["To run a Custom Query, navigate to the ",(0,i.jsx)(s.strong,{children:"Explore"})," tab within your experiment."]}),"\n",(0,i.jsx)("img",{width:"467",alt:"Custom query explore tab interface",src:"https://github.com/user-attachments/assets/b2737ba1-dbf4-4235-a806-afea5dfe9a78"}),"\n",(0,i.jsx)(s.p,{children:"Custom Query fields:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Metric(s):"}),' The metric(s) you want to analyze. You can select a single metric, a few metrics, or a Metric Tag. Adding a Tag will include all the metrics within that Tag in your Custom Query. There are three "default" metric selections included as shortcuts:',"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:'"Scorecard Metrics", all metrics included in your experiment setup\'s Primary and Secondary Metrics sections'}),"\n",(0,i.jsx)(s.li,{children:'"Primary Metrics"'}),"\n",(0,i.jsx)(s.li,{children:'"Secondary Metrics"'}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Metric Filter:"}),' With metrics selected, you can filter metrics by either Event or User dimensions using the "Add Filter" dropdown. For example, if you wanted to look at your experiment results for Canadian users only, you could filter to "Country = CA".\n',(0,i.jsx)(s.img,{src:"https://github.com/user-attachments/assets/f56b4259-4d18-44d1-9646-9d7aa2f8f847",alt:"Screenshot 2025-02-26 at 10 29 27\u202fAM"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Group By:"})," You can group your Custom Query results by either an Event or User dimension. Whereas Custom Query filters can be applied at the ",(0,i.jsx)(s.em,{children:"per-metric"})," level, the Group By action is at the ",(0,i.jsx)(s.em,{children:"query"})," level (so all included metrics will have whatever Group By you select applied to them)."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Time Range for Metric Data:"}),' The date range you\'re running your analysis on. By default this will be the "Full date range" of your experiment data.']}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"(Advanced) ID List Segment filters:"})," You can choose an ID-list based ",(0,i.jsx)(s.a,{href:"/segments",children:"Segment"}),", and your results will only be calculated for users who are in that segment. This can be useful if you forgot to log an important user dimension that you want to filter to, or realized that you only care about a sub-population that you've defined in your own data warehouse.","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Careful! This option can easily lead to erroneous and biased results. You will need to make sure the segment is defined based on the user's status ",(0,i.jsx)(s.em,{children:"before"})," they were exposed to the experiment or feature gate."]}),"\n",(0,i.jsxs)(s.li,{children:["Similarly, you can choose to ",(0,i.jsx)(s.em,{children:"exclude"})," a certain ID list segment, for example if you want to exclude a set of users who have been retroactively identified as bad actors from your lifts analysis."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"(Advanced) Filter by Exposure Date:"})," You can also filter the results by Exposure Date which can give you more flexibility. You can choose only include or exclude a date range, or in WHN, you can additionally include/exclude users based on when they were first exposed to the experiment.","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"This is useful when your metrics have novelty effect, delayed impact, or specific scenarios where you only want to filter your results to certain users. Use it cautiously because it can lead to biased results."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.admonition,{type:"note",children:(0,i.jsx)(s.p,{children:"User groups in experiment results are based off of first-touch attribution. The filters and grouping applied will be based on the user attributes collected at the time of first exposure in the gate/experiment/layer check."})}),"\n",(0,i.jsx)("img",{width:"1378",alt:"Screenshot 2025-06-08 at 10 33 05\u202fPM",src:"https://github.com/user-attachments/assets/85264260-2f65-4bfd-b4e1-477bd043b87d"}),"\n",(0,i.jsx)(s.h3,{id:"viewing-a-custom-query-in-explore",children:"Viewing a Custom Query in Explore"}),"\n",(0,i.jsxs)(s.p,{children:["These queries take a few minutes to run (don't worry, we'll send you an email once your results are ready in case you want to hop to another task), but once complete the results will be visible in the ",(0,i.jsx)(s.strong,{children:"Query History"})," section of the ",(0,i.jsx)(s.strong,{children:"Explore"})," interface. All historical queries (across your team) will be stored here. You can also give your query a display name inline for easier future identification."]}),"\n",(0,i.jsx)("img",{width:"1374",alt:"Screenshot 2025-06-08 at 10 34 38\u202fPM",src:"https://github.com/user-attachments/assets/46574581-604e-4d29-b231-fa51876c813d"}),"\n",(0,i.jsx)(s.h3,{id:"scheduling-a-custom-query",children:"Scheduling a Custom Query"}),"\n",(0,i.jsxs)(s.p,{children:["If you want a daily refresh of a given Custom Query, you can schedule your Custom Query directly from the ",(0,i.jsx)(s.strong,{children:"Explore"}),' tab. To do this, author the Custom Query you wish to schedule, then tap the "..." menu, then ',(0,i.jsx)(s.strong,{children:"Schedule"}),". This Custom Query will now run daily and live in the ",(0,i.jsx)(s.strong,{children:"Scheduled"})," tab of your Metric Lifts."]}),"\n",(0,i.jsx)("img",{width:"1378",alt:"Screenshot 2025-06-08 at 10 35 21\u202fPM",src:"https://github.com/user-attachments/assets/56d11b46-f2de-4569-89f7-b0a439910964"}),"\n",(0,i.jsx)("img",{width:"505",alt:"Scheduled query configuration interface",src:"https://github.com/user-attachments/assets/fad0c8ce-3f9c-46be-a09c-52263e124259"}),"\n",(0,i.jsx)(s.h3,{id:"reviewing-custom-query-results",children:"Reviewing Custom Query Results"}),"\n",(0,i.jsx)(s.p,{children:"Custom query results look a lot like the main Results tab, because the statistical methods are the same. Statsig uses the same experimental analyses practices on your custom analysis as we do on your main Results."}),"\n",(0,i.jsx)(s.p,{children:"One main point of difference, however, is that your custom query result is a snapshot in time. Once run, the analyses results are saved and will not update if more metric data is collected. If you do want to update your results, you can run a new custom query or schedule custom queries to run at a regular cadence."}),"\n",(0,i.jsx)(s.h4,{id:"sequential-testing-and-custom-queries",children:"Sequential Testing and Custom Queries"}),"\n",(0,i.jsxs)(s.p,{children:["If ",(0,i.jsx)(s.a,{href:"/experiments-plus/sequential-testing",children:"Sequential Testing"})," is enabled for your experiment, it can be applied to your custom query results as well. How much and whether to adjust your confidence intervals and p-values will depend on the regular rules of sequential testing: if your custom query doesn't satisfy the experiment's target Days or Unique Exposures from your setup, sequential testing adjustments will be made to your results to account for the under-powered state of the experiment."]}),"\n",(0,i.jsx)(s.p,{children:"Since custom queries are computed as a snapshot in time, sequential testing adjustments are computed for that specific analysis only. If you run additional custom queries with more or less data (e.g. more days in the analysis, more unique users in the experiment), the sequential testing adjustments will change accordingly. Some custom queries may have no sequential adjustments applied at all if they meet the configured minimum Days or Unique Exposures."}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{src:"https://github.com/user-attachments/assets/df7c4087-82c3-41fb-8f5d-124094ec4526",alt:"Sequential testing adjustments interface"})})]})}function d(e={}){const{wrapper:s}={...(0,n.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},28453:(e,s,t)=>{t.d(s,{R:()=>o,x:()=>a});var i=t(96540);const n={},r=i.createContext(n);function o(e){const s=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:o(e.components),i.createElement(r.Provider,{value:s},e.children)}}}]);