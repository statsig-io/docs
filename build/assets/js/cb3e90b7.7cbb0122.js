"use strict";(self.webpackChunkstatsig_docs=self.webpackChunkstatsig_docs||[]).push([[78418],{1763:(e,t,i)=>{i.r(t),i.d(t,{Builder:()=>w,InitStrats:()=>j,assets:()=>f,contentTitle:()=>x,default:()=>k,frontMatter:()=>g,metadata:()=>v,toc:()=>b});var n={};i.r(n),i.d(n,{contentTitle:()=>u,default:()=>m,frontMatter:()=>d,toc:()=>h});var a=i(74848),s=i(28453),r=i(55088),o=i(96747),l=i(11470),c=i(19365);const d={},u=void 0,h=[{value:"Overview",id:"overview",level:2},{value:"1. Asynchronous Initialization - Awaited",id:"1-asynchronous-initialization---awaited",level:3},{value:"2. Bootstrap Initialization",id:"2-bootstrap-initialization",level:3},{value:"3. Asynchronous Initialization - Not Awaited",id:"3-asynchronous-initialization---not-awaited",level:3},{value:"4. Synchronous Initialization",id:"4-synchronous-initialization",level:3}];function p(e){const t={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h2,{id:"overview",children:"Overview"}),"\n",(0,a.jsxs)(t.p,{children:["We now offer several strategies for initializing ",(0,a.jsx)(t.code,{children:"StatsigClient"})," \u2014 allowing customers to fine-tune and minimize latency. The various strategies carry some tradeoffs, and should be carefully considered based on your performance requirements and experimentation needs."]}),"\n",(0,a.jsx)(t.p,{children:"Below are the various strategies summarized at a high level, ordered from most common to least common:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.a,{href:"#1-asynchronous-initialization---awaited",children:(0,a.jsx)(t.strong,{children:"Asynchronous Initialization (Awaited)"})}),": Ensures user assignments are available after initialization but adds latency due to awaiting fresh assignments being fetched over the network from Statsig servers."]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.a,{href:"#2-bootstrap-initialization",children:(0,a.jsx)(t.strong,{children:"Bootstrap Initialization"})}),": It's best of both worlds in terms of latency and availability of fresh assignments. Use Sync bootstrapping if your architecture permits and you have the engineering bandwidth to implement the server-sdk to generate the client init payload."]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.a,{href:"#3-asynchronous-initialization---not-awaited",children:(0,a.jsx)(t.strong,{children:"Asynchronous Initialization (Not Awaited)"})}),": This ensures immediate rendering, but in a state that reflects stale assignments or no assignments available (resulting in default values being used).","\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["After initialization, the client will then fetch fresh assignments over the network from Statsig. Subsequent calls to check assignments may result in different assignments than the initial state and therefore render a different treatment (",(0,a.jsx)(t.em,{children:'this is referred to as "flicker"'}),"). This mimics the old behavior of ",(0,a.jsx)(t.code,{children:"StatsigProvider.waitForInitialization=false"}),"."]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.a,{href:"#4-synchronous-initialization",children:(0,a.jsx)(t.strong,{children:"Synchronous Initialization"})}),": Ensures immediate rendering but with stale or no assignments available. First-visit users will never be assigned to gates and experiments. These users will only see updated assignments after they do a hard-refresh of the website. Effectively, all assignment information is 1 page load stale."]}),"\n"]}),"\n",(0,a.jsx)(t.h3,{id:"1-asynchronous-initialization---awaited",children:"1. Asynchronous Initialization - Awaited"}),"\n",(0,a.jsxs)(t.blockquote,{children:["\n",(0,a.jsx)(t.p,{children:"Ensures latest assignments but requires a loading state"}),"\n"]}),"\n",(0,a.jsxs)(t.p,{children:["When calling ",(0,a.jsx)(t.code,{children:"StatsigClient.initializeAsync"}),", the client loads values from the cache and fetches the latest values from the network. This approach waits for the latest values before rendering, which means it is not immediate but ensures the values are up-to-date."]}),"\n",(0,a.jsx)(t.p,{children:"Example:"}),"\n",(0,a.jsxs)(l.A,{defaultValue:"react",groupId:"language-choice",values:[{label:"React",value:"react"},{label:"Javascript",value:"js"}],children:[(0,a.jsx)(c.A,{value:"react",children:(0,a.jsx)(r.A,{url:"https://raw.githubusercontent.com/statsig-io/js-client-monorepo/main/samples/react/src/samples/react-precomp/sample-react-init-strat-await-async.tsx"})}),(0,a.jsx)(c.A,{value:"js",children:(0,a.jsx)(r.A,{url:"https://raw.githubusercontent.com/statsig-io/js-client-monorepo/main/samples/react/src/samples/precomputed-client/sample-precomp-initialize.tsx"})})]}),"\n",(0,a.jsx)(t.h3,{id:"2-bootstrap-initialization",children:"2. Bootstrap Initialization"}),"\n",(0,a.jsxs)(t.blockquote,{children:["\n",(0,a.jsx)(t.p,{children:"Ensures both latest assignments with no rendering latency"}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"Bootstrapping allows you to initialize the client with a JSON string. This approach ensures that values are immediately available without the client making any network requests. Note that you will be responsible for keeping these values up to date."}),"\n",(0,a.jsx)(t.p,{children:"Example:"}),"\n",(0,a.jsxs)(l.A,{defaultValue:"react",groupId:"language-choice",values:[{label:"React",value:"react"},{label:"Javascript",value:"js"}],children:[(0,a.jsx)(c.A,{value:"react",children:(0,a.jsx)(r.A,{url:"https://raw.githubusercontent.com/statsig-io/js-client-monorepo/main/samples/react/src/samples/react-precomp/sample-react-init-strat-bootstrap.tsx"})}),(0,a.jsx)(c.A,{value:"js",children:(0,a.jsx)(r.A,{url:"https://raw.githubusercontent.com/statsig-io/js-client-monorepo/main/samples/react/src/samples/precomputed-client/sample-precomp-bootstrap.tsx"})})]}),"\n",(0,a.jsx)(t.h3,{id:"3-asynchronous-initialization---not-awaited",children:"3. Asynchronous Initialization - Not Awaited"}),"\n",(0,a.jsxs)(t.p,{children:["If you want to fetch the latest values without awaiting the asynchronous call, you can call ",(0,a.jsx)(t.code,{children:"initializeAsync"})," and catch the promise.\nThis approach provides immediate rendering with cached values initially, which will update to the latest values mid-session."]}),"\n",(0,a.jsx)(t.admonition,{type:"caution",children:(0,a.jsx)(t.p,{children:"Be aware that the values may switch when checked a second time after the latest values have been loaded."})}),"\n",(0,a.jsx)(t.p,{children:"Example:"}),"\n",(0,a.jsx)(r.A,{url:"https://raw.githubusercontent.com/statsig-io/js-client-monorepo/main/samples/react/src/samples/react-precomp/sample-react-init-strat-unawait-async.tsx"}),"\n",(0,a.jsx)(t.h3,{id:"4-synchronous-initialization",children:"4. Synchronous Initialization"}),"\n",(0,a.jsxs)(t.blockquote,{children:["\n",(0,a.jsx)(t.p,{children:"Ensures immediate rendering but uses cached assignments (when available)"}),"\n"]}),"\n",(0,a.jsxs)(t.p,{children:["When calling ",(0,a.jsx)(t.code,{children:"StatsigClient.initializeSync"}),", the client uses cached values if they are available. The client fetches new values in the background and updates the cache. This approach provides immediate rendering, but the values might be stale or absent during the first session."]}),"\n",(0,a.jsx)(t.p,{children:"Example:"}),"\n",(0,a.jsx)(r.A,{url:"https://raw.githubusercontent.com/statsig-io/js-client-monorepo/main/samples/react/src/samples/react-precomp/sample-react-init-strat-cache.tsx"}),"\n",(0,a.jsx)(t.p,{children:"These strategies help you balance the need for the latest gate / experiment assignment information with the need for immediate application rendering based on your specific requirements."})]})}function m(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(p,{...e})}):p(e)}const g={title:"Initialization Strategies",sidebar_label:"Initialization Strategies",slug:"/client/javascript-sdk/init-strategies",displayed_sidebar:"cloud",keywords:["owner:brock"],last_update:{date:new Date("2025-09-18T00:00:00.000Z")}},x=void 0,v={id:"client/javascript-mono/InitStrategies",title:"Initialization Strategies",description:"{Builder.result}",source:"@site/docs/client/javascript-mono/InitStrategies.mdx",sourceDirName:"client/javascript-mono",slug:"/client/javascript-sdk/init-strategies",permalink:"/client/javascript-sdk/init-strategies",draft:!1,unlisted:!1,editUrl:"https://github.com/statsig-io/docs/edit/main/docs/client/javascript-mono/InitStrategies.mdx",tags:[],version:"current",lastUpdatedAt:17581536e5,frontMatter:{title:"Initialization Strategies",sidebar_label:"Initialization Strategies",slug:"/client/javascript-sdk/init-strategies",displayed_sidebar:"cloud",keywords:["owner:brock"],last_update:{date:"2025-09-18T00:00:00.000Z"}},sidebar:"cloud"},f={},j=n,w=(0,o.PG)({sections:[[j,{}]]}),b=w.toc;function y(e){return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(a.Fragment,{children:w.result})})}function k(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(y,{...e})}):y()}},96747:(e,t,i)=>{i.d(t,{PG:()=>u});var n=i(74848),a=i(28453);function s(e){return(0,n.jsx)("div",{style:{height:4}})}function r(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(s,{...e})}):s()}var o=i(96540),l=(i(65848),i(5338));function c(){let e=null;try{const t=document.querySelector(".theme-last-updated > b > time");t&&null!=t.dateTime&&(e=new Date(t.dateTime).toLocaleDateString("en-us",{year:"numeric",month:"short",day:"numeric"}))}catch(t){}return(0,n.jsx)("div",{onClick:e=>e.preventDefault(),style:{cursor:"default",padding:"10px 20px",backgroundColor:"var(--ifm-navbar-background-color)",borderRadius:10,fontSize:12,color:"var(--ifm-color-content)"},children:(0,n.jsx)("a",{onClick:()=>window.open("https://statsig.com/community?ref=statsig_docs_toc","_blank").focus(),href:"#",children:(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,n.jsx)("img",{src:"/img/slack.webp",style:{height:15,width:15}}),(0,n.jsx)("span",{style:{marginLeft:8},children:"Stuck? Ask Statsig on Slack"})]})})})}function d(){return(0,o.useEffect)((()=>{const e=document.querySelector("#sdk-toc-header");if(e?.getAttribute("x-last-updated")){l.createRoot(document.getElementById("sdk-toc-header")).render((0,n.jsx)(c,{}))}}),[]),(0,n.jsx)(n.Fragment,{})}const u=e=>{const t=e.sections,i=[];i.push({value:`<div id="sdk-toc-header" x-last-updated="${e.lastSDKDocsUpdate}"><div style="min-height: 65px; cursor: default; padding: 10px 20px; background-color: var(--ifm-navbar-background-color); border-radius: 10px; font-size: 12px; margin-bottom: 15px; color: var(--ifm-color-content);">...</div></div>`,id:"0",level:2});const a=t.map((([e,t],a)=>{const s=e.tocFilter,l=e.toc.filter((e=>!0!==s?.includes(e.id)));return i.push(...l),(0,n.jsxs)(o.Fragment,{children:[(0,n.jsx)(e.default,{...t}),(0,n.jsx)(r,{})]},a)}));return{result:[(0,n.jsx)(d,{},"header"),...a],toc:i}}},55088:(e,t,i)=>{i.d(t,{A:()=>c});var n=i(96540),a=i(21432),s=i(74848);let r;function o(){if(r)return r;const{StatsigClient:e,runStatsigAutoCapture:t,runStatsigSessionReplay:i}=window.Statsig;return r=new e("client-rfLvYGag3eyU0jYW5zcIJTQip7GXxSrhOFN69IGMjvq",{userID:""}),t(r),i(r),r.initializeAsync().catch((e=>console.error(e))),r}function l(e){const t=e.split("\n"),i=[];let n=!1;for(const a of t)a.includes("<snippet>")?n=!0:a.includes("</snippet>")?n=!1:n&&i.push(a);return i.join("\n")}function c(e){let{url:t,language:i}=e;const[r,c]=(0,n.useState)(null);return function(){try{return o().checkGate("partial_gate")}catch(e){}}(),(0,n.useEffect)((()=>{!function(e,t){try{o().logEvent({eventName:"gh_embed_render",value:e.replace("https://raw.githubusercontent.com/statsig-io",""),metadata:{language:t}})}catch(i){}}(t,i);(async()=>{try{const e=Date.now(),i=await fetch(t);if(!i.ok)throw new Error("Network response was not ok");const n=500,a=await i.text(),s=Date.now()-e;s<n?setTimeout((()=>c(l(a))),n-s):c(l(a))}catch(e){c(`// Failed to load example.\n// View on GitHub:\n// ${t}`),function(e,t,i){try{o().logEvent({eventName:"gh_embed_error",value:e,metadata:{language:t,error:i}})}catch(i){}}(t,i,e)}})()}),[t]),(0,s.jsxs)("div",{style:{overflow:"hidden"},children:[null==r&&(0,s.jsx)(a.A,{language:i??"tsx",children:(0,s.jsx)("div",{style:{textAlign:"center",padding:"50px 0px 50px 0px"},children:"..."})}),null!=r&&(0,s.jsx)(a.A,{language:i??"tsx",children:r})]})}}}]);