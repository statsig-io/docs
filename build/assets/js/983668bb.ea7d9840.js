"use strict";(self.webpackChunkstatsig_docs=self.webpackChunkstatsig_docs||[]).push([[19645],{42276:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>c,frontMatter:()=>s,metadata:()=>r,toc:()=>h});var a=i(74848),n=i(28453);const s={title:"Cohort Metrics",slug:"/statsig-warehouse-native/features/cohort-metrics",sidebar_label:"Cohort Metrics",description:"Analyzing Cohorts with Statsig",keywords:["owner:craig"],last_update:{date:new Date("2025-09-18T00:00:00.000Z")}},o="Cohort Metrics",r={id:"statsig-warehouse-native/features/cohort-metrics",title:"Cohort Metrics",description:"Analyzing Cohorts with Statsig",source:"@site/docs/statsig-warehouse-native/features/cohort-metrics.md",sourceDirName:"statsig-warehouse-native/features",slug:"/statsig-warehouse-native/features/cohort-metrics",permalink:"/statsig-warehouse-native/features/cohort-metrics",draft:!1,unlisted:!1,editUrl:"https://github.com/statsig-io/docs/edit/main/docs/statsig-warehouse-native/features/cohort-metrics.md",tags:[],version:"current",lastUpdatedAt:17581536e5,frontMatter:{title:"Cohort Metrics",slug:"/statsig-warehouse-native/features/cohort-metrics",sidebar_label:"Cohort Metrics",description:"Analyzing Cohorts with Statsig",keywords:["owner:craig"],last_update:{date:"2025-09-18T00:00:00.000Z"}},sidebar:"warehouse",previous:{title:"Metric Examples",permalink:"/statsig-warehouse-native/configuration/metric-examples"},next:{title:"Dimension Analysis",permalink:"/statsig-warehouse-native/configuration/dimensional-analysis"}},l={},h=[{value:"Basic Cohort Windows",id:"basic-cohort-windows",level:2},{value:"Waiting for Maturation",id:"waiting-for-maturation",level:2},{value:"Visual Examples",id:"visual-examples",level:2},{value:"Experiment-based Cohort Settings",id:"experiment-based-cohort-settings",level:2},{value:"Allow post-experiment cohort data",id:"allow-post-experiment-cohort-data",level:3},{value:"Fixed Duration",id:"fixed-duration",level:3},{value:"Cohorted Duration",id:"cohorted-duration",level:3},{value:"Metric Bake Windows",id:"metric-bake-windows",level:2}];function d(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,n.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"cohort-metrics",children:"Cohort Metrics"})}),"\n",(0,a.jsx)(t.p,{children:"Cohort metrics are a way to analyze the impact of an experiment in a certain time frame per experimental unit."}),"\n",(0,a.jsx)(t.p,{children:"This is useful for many reasons. Common use cases are:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:'By ensuring all users have equal periods for data collection, there is an "apples to apples" comparison across user enrolled early/late in the experiment (which often corresponds to power/occasional users), and across different "time periods" that may have extrinsic factors like holidays'}),"\n",(0,a.jsx)(t.li,{children:"If analyzing an unbounded period, experimental units' variance in the population can increase over time - leading to scenario where error bars don't actually converge towards 0 as the experiment is run for longer!"}),"\n",(0,a.jsx)(t.li,{children:'This allows one to skip noisy early metrics, or focus on outcomes after users might churn - e.g. capturing "week-2 engagement" if a product has a 1-week trial period'}),"\n",(0,a.jsxs)(t.li,{children:['This can also be used to capture "one-shot retention". ',(0,a.jsx)(t.a,{href:"/statsig-warehouse-native/metrics/retention",children:"Retention metrics"})," are used to capture rolling, ongoing retention. A user metric with a window from day X to day Y is a good way to check if an experiment is causing more users to retain at least X days"]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"The downsides of cohort metrics are that:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"They do not capture any sort of long-term impact, or how that evolves over time. This is purely a point in time analysis and may not be appropriate for measuring complex, evolving behaviors"}),"\n",(0,a.jsx)(t.li,{children:"They make topline impact estimates lossier and harder to trust"}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"Some practitioners have made compelling arguments that cohort metrics are a better \"standard\" metric for organizations to use in analysis. Statsig tends to believe that the use of cohorts is dependent on business context, but it's worth considering if they should be at least a part of an experiment's measurement (e.g. measuring topline revenue as an overall evaluation criteria, but also measuring 7d revenue alongside it for additional context)."}),"\n",(0,a.jsx)(t.p,{children:"Cohort metrics on Statsig are feature-rich. This page explains the different settings available, what they do, and how they interact so that you can be confident that you know what's being measured."}),"\n",(0,a.jsx)(t.h2,{id:"basic-cohort-windows",children:"Basic Cohort Windows"}),"\n",(0,a.jsx)(t.p,{children:"Basic cohort windows are fairly simple. They are a filter on metric data with a time range relative to the unit's time of exposure.\nFor example, this cohort metric from 1 to 6 days would filter to events from 24 hours until 144 hours from when they were exposed to the experiment."}),"\n",(0,a.jsx)(t.admonition,{type:"note",children:(0,a.jsx)(t.p,{children:"This is calculated as a timestamp comparison; a unit enrolled at 12pm will have exactly 24 hours until they hit the end of a 0-1 day cohort."})}),"\n",(0,a.jsxs)(t.p,{children:["For metrics from data sources that are marked as daily data, the cohort comparison is truncated to a date so that day-0 data behaves as expected (e.g. a user exposed on ",(0,a.jsx)(t.code,{children:"2025-01-05T09:00"})," will include the date-based data from ",(0,a.jsx)(t.code,{children:"2025-01-05"}),' instead of truncating to times "after 9:00am").']}),"\n",(0,a.jsx)(t.h2,{id:"waiting-for-maturation",children:"Waiting for Maturation"}),"\n",(0,a.jsx)(t.p,{children:'By default, cohort metrics can have a mix of maturation in the experimental population. For a 1-week cohort, users enrolled in the last week of the cohort will have a mix of maturities during analysis. This does yield maximal sample, but can "dilute" the analysis with partial cohort windows. To prevent this, mark the metric as needing to "Wait for cohort window to complete". This will drop units\' metric data from analysis, and removes them from the experiment analysis population.'}),"\n",(0,a.jsxs)(t.p,{children:["In the examples below, one metric forces cohorts to complete. It has ",(0,a.jsx)(t.strong,{children:"less units"})," in the analysis, since many units do not have a complete window, a ",(0,a.jsx)(t.strong,{children:"lower total"})," because of the small unit count, but a ",(0,a.jsx)(t.strong,{children:"higher mean"})," since the units it does have have completed their window and have a longer data collection period on average."]}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.img,{alt:"Metric that did not wait to mature",src:i(72683).A+"",width:"1199",height:"322"}),"\n",(0,a.jsx)(t.img,{alt:"Metric that waited to Mature",src:i(91981).A+"",width:"1204",height:"325"})]}),"\n",(0,a.jsx)(t.p,{children:"This can cause confusion since it leads to different populations between metrics, and also filters out the last few days of an experiment's data in the daily timeseries since new cohorts' data is not including. A metric's cohort settings can be seen quickly by hovering over the name of the metric in the experiment scorecard."}),"\n",(0,a.jsx)(t.h2,{id:"visual-examples",children:"Visual Examples"}),"\n",(0,a.jsxs)(t.p,{children:["This is what the data collection looks like for a standard cohort metric with a 0-6 day window. Note that this collects data for ",(0,a.jsx)(t.strong,{children:"7 days"})," - it's 0-indexed."]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Basic cohort example",src:i(70333).A+"",width:"1305",height:"592"})}),"\n",(0,a.jsx)(t.p,{children:"If the cohort period goes over the end of the experiment, the default behavior is that the data collection is truncated to the end of the experiment"}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Basic cohort over end example",src:i(11984).A+"",width:"1343",height:"604"})}),"\n",(0,a.jsx)(t.p,{children:"If the metric is configured to only allow completed cohort windows, the unit is completely excluded from the analysis. They are not part of the denominator for the average value of a sum or count metric, and their metric data is filtered from the analysis."}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Basic cohort example",src:i(99697).A+"",width:"1297",height:"609"})}),"\n",(0,a.jsx)(t.p,{children:"If mature after end is configured in the experiment, it will continue to collect data after the end of the experiment (whether wait for mature is enabled or not)."}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Basic cohort example",src:i(32638).A+"",width:"1377",height:"634"})}),"\n",(0,a.jsx)(t.h2,{id:"experiment-based-cohort-settings",children:"Experiment-based Cohort Settings"}),"\n",(0,a.jsx)(t.p,{children:"Cohort controls are also available on experiments. This is because the relevance of these features depends on the kind of experiment being run, as discussed below."}),"\n",(0,a.jsx)(t.h3,{id:"allow-post-experiment-cohort-data",children:"Allow post-experiment cohort data"}),"\n",(0,a.jsxs)(t.p,{children:["Checking ",(0,a.jsx)(t.strong,{children:"Allow Cohort Metrics to Mature After Experiment End"})," allows metrics to be collected after the end of the experiment. This is recommended for one-time interventions, e.g. a new signup page; getting post-experiment signal from units who did get the intervention means additional statistical power."]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Allow Cohorts to Mature",src:i(61901).A+"",width:"533",height:"77"})}),"\n",(0,a.jsxs)(t.p,{children:["This is ",(0,a.jsx)(t.strong,{children:"not"})," recommended in cases where the intervention is continuous, e.g. a ranking change; post-experiment data will be diluted (e.g. test users might get the control experience in their post-experiment period), diluting results."]}),"\n",(0,a.jsx)(t.p,{children:"On the data side, the analysis will be extended past the end of the experiment by the length of the longest cohort window on any metric in the analysis. Non-cohorted metrics will have their date constrained to the analysis period, and cohort metrics will be filtered to the end of the experiment + their cohort window."}),"\n",(0,a.jsx)(t.h3,{id:"fixed-duration",children:"Fixed Duration"}),"\n",(0,a.jsxs)(t.p,{children:["On the ",(0,a.jsx)(t.strong,{children:"Experiment Population"})," section of the experiment setup page, there is an option for fixed-window cohorting under ",(0,a.jsx)(t.strong,{children:"Configure Analysis Period"})," with Analysis Type ",(0,a.jsx)(t.strong,{children:"Fixed Duration"}),". This only counts metrics for a certain period after ",(0,a.jsx)(t.strong,{children:"experiment start"}),". This is useful when there's an experiment with a specific point in time, like email campaigns or other cases of fixed enrollment events."]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Analysis Period Settings",src:i(53893).A+"",width:"1214",height:"584"})}),"\n",(0,a.jsx)(t.p,{children:"This setting is only available for assign and analyze experiments."}),"\n",(0,a.jsx)(t.h3,{id:"cohorted-duration",children:"Cohorted Duration"}),"\n",(0,a.jsxs)(t.p,{children:["On the ",(0,a.jsx)(t.strong,{children:"Experiment Population"})," section of the experiment setup page, there is an option for allocation-based cohorting under ",(0,a.jsx)(t.strong,{children:"Configure Analysis Period"})," with Analysis Type ",(0,a.jsx)(t.strong,{children:"Cohorted Duration"}),". This is identical to the metric-based cohort, but applies globally to all possible metrics in the experiment analysis. This is a great way to globally add a cohort when appropriate, e.g. new user experiments."]}),"\n",(0,a.jsx)(t.admonition,{type:"note",children:(0,a.jsx)(t.p,{children:"When this is used in conjunction with metric cohorts, the minimal end of the cohort window will be used.\nFor example, if a metric cohort is set to end at 7 days and the experiment at 10 days, 7 will be used. If the metric cohort is set to end at 7 days and the experiment at 5 days, 5 will be used."})}),"\n",(0,a.jsxs)(t.p,{children:["The ",(0,a.jsx)(t.strong,{children:"only include units with a completed cohort window"})," setting can also be specified at the experiment level and will apply to all metrics in the experiment if so. If not checked, this will be applied on a metric-by-metric basis."]}),"\n",(0,a.jsx)(t.h2,{id:"metric-bake-windows",children:"Metric Bake Windows"}),"\n",(0,a.jsx)(t.p,{children:"In some cases, a metric in your warehouse may not be matured until a certain time period, after which you care about the daily value. Statsig provides the option to specify a bake window for your metrics. Similarly to the option above, metrics who have not reached the bake window's end will be excluded from the numerator and denominator of the metric in the analysis."}),"\n",(0,a.jsx)(t.p,{children:"One example of a metric that may not be immediately mature is daily revenue. If a user makes a purchase but refunds it a few days later, their daily revenue may retroactively change to reflect the refund on a later date. A 28 day long refund period for users might align naturally a 28 day long bake window for revenue metrics."}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{src:"https://github.com/statsig-io/docs/assets/102695539/7c0ca9e7-ae49-4213-96aa-e0815a46940e",alt:"Metric Bake Example"})}),"\n",(0,a.jsx)(t.p,{children:"In the example above, the user has a revenue metric that considers the last 28 days. Instead of calculating a partial result, they will exclude users from the analysis until they've had 28 days for their data to mature."}),"\n",(0,a.jsx)(t.p,{children:"Partial results can happen because if a metric bakes over a long period, part of the metric values are from before the experimental intervention and will dilute the results. If a user had been exposed 1 day ago, 27/28 days of their revenue metric would be from the pre-intervention period and would dilute the experiment results."})]})}function c(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},61901:(e,t,i)=>{i.d(t,{A:()=>a});const a=i.p+"assets/images/allow_cohorts_to_mature-e6b485c65bedd6527c68da9c162beaf8.png"},70333:(e,t,i)=>{i.d(t,{A:()=>a});const a=i.p+"assets/images/basic_cohort_example-34331bb2f12e0fbf6b8380dea2412036.png"},72683:(e,t,i)=>{i.d(t,{A:()=>a});const a=i.p+"assets/images/basic_cohort_metric-f8ff483f40d0710b6add7ef3f9f655a6.png"},11984:(e,t,i)=>{i.d(t,{A:()=>a});const a=i.p+"assets/images/basic_cohort_over_end_example-a4e0963bb3b8dfd877c509cc98bf1f77.png"},99697:(e,t,i)=>{i.d(t,{A:()=>a});const a=i.p+"assets/images/completed_window_example-19dbc9c3a0bfe14fd8a11158d754bd6a.png"},53893:(e,t,i)=>{i.d(t,{A:()=>a});const a=i.p+"assets/images/configure_analysis_period-c5ef080229f6413954ede1873d64b310.png"},32638:(e,t,i)=>{i.d(t,{A:()=>a});const a=i.p+"assets/images/mature_after_end_example-7a32c7a1bcc4c8e09c35761b9c84f004.png"},91981:(e,t,i)=>{i.d(t,{A:()=>a});const a=i.p+"assets/images/wait_to_mature_metric-22197a12663b0c33565a6b75b2560775.png"},28453:(e,t,i)=>{i.d(t,{R:()=>o,x:()=>r});var a=i(96540);const n={},s=a.createContext(n);function o(e){const t=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:o(e.components),a.createElement(s.Provider,{value:t},e.children)}}}]);