"use strict";(self.webpackChunkstatsig_docs=self.webpackChunkstatsig_docs||[]).push([[24994],{53702:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>g,frontMatter:()=>a,metadata:()=>r,toc:()=>d});var s=n(74848),i=n(28453);const a={sidebar_label:"Advanced Configurations",title:"Advanced Configurations",keywords:["owner:brock"],last_update:{date:new Date("2025-10-02T00:00:00.000Z")}},o=void 0,r={id:"guides/sidecar-experiments/advanced-configurations-v3",title:"Advanced Configurations",description:"Advanced Targeting & Segmentation",source:"@site/docs/guides/sidecar-experiments/advanced-configurations-v3.mdx",sourceDirName:"guides/sidecar-experiments",slug:"/guides/sidecar-experiments/advanced-configurations-v3",permalink:"/guides/sidecar-experiments/advanced-configurations-v3",draft:!1,unlisted:!1,editUrl:"https://github.com/statsig-io/docs/edit/main/docs/guides/sidecar-experiments/advanced-configurations-v3.mdx",tags:[],version:"current",lastUpdatedAt:17593632e5,frontMatter:{sidebar_label:"Advanced Configurations",title:"Advanced Configurations",keywords:["owner:brock"],last_update:{date:"2025-10-02T00:00:00.000Z"}},sidebar:"cloud",previous:{title:"Measuring Experiments",permalink:"/guides/sidecar-experiments/measuring-experiments"},next:{title:"Sidecar Setup",permalink:"/guides/sidecar-experiments/setup"}},c={},d=[{value:"Advanced Targeting &amp; Segmentation",id:"advanced-targeting--segmentation",level:2},{value:"Accessing the Statsig js client",id:"accessing-the-statsig-js-client",level:2},{value:"Configuring Runtime Options",id:"configuring-runtime-options",level:2},{value:"Managing Consent",id:"managing-consent",level:2},{value:"Persisting stableID across subdomains",id:"persisting-stableid-across-subdomains",level:2}];function l(e){const t={a:"a",code:"code",em:"em",h2:"h2",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h2,{id:"advanced-targeting--segmentation",children:"Advanced Targeting & Segmentation"}),"\n",(0,s.jsx)(t.p,{children:"This approach allows you to set User Identity and Attributes for Sidecar, enabling you to perform more advanced targeting and results segmentation."}),"\n",(0,s.jsxs)(t.p,{children:["By default, Sidecar & Autocapture use ",(0,s.jsx)(t.code,{children:"stableID"})," (an auto-generated device-level guid that gets stored in the user's localStorage) for tracking purposes. If you wish to enrich autocapture events with known user identities and attributes, you can define the following object ",(0,s.jsx)(t.em,{children:"prior"})," to autocapture/sidecar being loaded."]}),"\n",(0,s.jsxs)(t.p,{children:["Watch this ",(0,s.jsx)(t.a,{href:"https://tinyurl.com/sidecar-targeting",children:"video tutorial"})," on how to configure more advanced targeting for your Sidecar experiments."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:'window.statsigUser = {\n  userID: "<USER ID>",\n  custom: { // optional attributes object\n     isLoggedIn: false \n  }\n}\n'})}),"\n",(0,s.jsx)(t.h2,{id:"accessing-the-statsig-js-client",children:"Accessing the Statsig js client"}),"\n",(0,s.jsxs)(t.p,{children:["For accessing the underlying Statsig js client instance, you can call ",(0,s.jsx)(t.code,{children:"StatsigSidecar.getStatsigInstance()"}),"."]}),"\n",(0,s.jsx)(t.h2,{id:"configuring-runtime-options",children:"Configuring Runtime Options"}),"\n",(0,s.jsxs)(t.p,{children:["This allows you to handle Consent Management, GDPR compliance and more. All of the ",(0,s.jsx)(t.a,{href:"https://docs.statsig.com/client/javascript-sdk/#statsig-options",children:"StatsigOptions"})," provided by the JavaScript SDK are also fully-supported with Sidecar. These can be passed to Sidecar via:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:"window.statsigOptions = {\n  // example of disabling logging for \n  loggingEnabled: 'disabled'\n}\n"})}),"\n",(0,s.jsx)(t.h2,{id:"managing-consent",children:"Managing Consent"}),"\n",(0,s.jsx)(t.p,{children:"Prior to Sidecar script tag, configure these runtime options to disable browser storage and tracking:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:'window.statsigOptions = {\n  loggingEnabled: "disabled",\n  disableStorage: true\n}\n'})}),"\n",(0,s.jsx)(t.p,{children:"Later on, after the user gives consent, re-enable storage and tracking:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:'__STATSIG__.instance().updateRuntimeOptions({loggingEnabled: "browser-only", disableStorage: false});\n'})}),"\n",(0,s.jsx)(t.h2,{id:"persisting-stableid-across-subdomains",children:"Persisting stableID across subdomains"}),"\n",(0,s.jsxs)(t.p,{children:["Statsig uses ",(0,s.jsx)(t.code,{children:"localStorage"})," as the preferred mechanism for storing the user's stableID. Localstorage keys do not persist across any origin boundaries including across subdomains. For example, a user visiting ",(0,s.jsx)(t.code,{children:"https://example.com"}),", ",(0,s.jsx)(t.code,{children:"https://show.example.com"})," and ",(0,s.jsx)(t.code,{children:"https://account.example.com"})," would be issued three distinct stableIDs."]}),"\n",(0,s.jsx)(t.p,{children:"If you are assigning a user to a test on one subdomain, and tracking behavior for metrics purposes on a different subdomain, you'll need to have this solution in place to ensure Statsig can properly attribute cross-origin behavior to the Test Group assignment that took place on the initial experiment domain."}),"\n",(0,s.jsx)(t.p,{children:"To install, simply paste the following in your HEAD section."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-html",children:'\x3c!-- cross domain id script --\x3e\n<script>!function(){let t="STATSIG_LOCAL_STORAGE_STABLE_ID";function e(){if(crypto&&crypto.randomUUID)return crypto.randomUUID();let t=()=>Math.floor(65536*Math.random()).toString(16).padStart(4,"0");return`${t()}${t()}-${t()}-4${t().substring(1)}-${t()}-${t()}${t()}${t()}`}let i=null,n=localStorage.getItem(t)||null;if(document.cookie.match(/statsiguuid=([\\w-]+);?/)&&([,i]=document.cookie.match(/statsiguuid=([\\w-]+);?/)),i&&n&&i===n);else if(i&&n&&i!==n)localStorage.setItem(t,i);else if(i&&!n)localStorage.setItem(t,i);else{let o=e();localStorage.setItem(t,o),function t(i){let n=new Date;n.setMonth(n.getMonth()+12);let o=window.location.host.split(".");o.length>2&&o.shift();let s=`.${o.join(".")}`;document.cookie=`statsiguuid=${i||e()};Expires=${n};Domain=${s};Path=/`}(o)}}();<\/script>\n\n\x3c!-- Manually attach stableID from local storage --\x3e\n<script>\nif(localStorage.getItem(\'STATSIG_LOCAL_STORAGE_STABLE_ID\')) {\n  window.statsigUser = {\n    customIDs: {stableID: localStorage.getItem(\'STATSIG_LOCAL_STORAGE_STABLE_ID\')}\n  }\n}\n<\/script>\n\n\x3c!-- sidecar script below --\x3e\n<script src="https://cdn.jsdelivr.net/npm/statsig-sidecar/dist/index.min.js?apikey=[client-YOUR-STATSIG-CLIENT-KEY]"><\/script>\n'})})]})}function g(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>r});var s=n(96540);const i={},a=s.createContext(i);function o(e){const t=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(a.Provider,{value:t},e.children)}}}]);