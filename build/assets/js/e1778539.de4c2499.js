"use strict";(self.webpackChunkstatsig_docs=self.webpackChunkstatsig_docs||[]).push([[85074],{65270:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>i,metadata:()=>o,toc:()=>u});var a=s(74848),n=s(28453);const i={sidebar_label:"Flask Feature Flags",title:"How to set up Feature Flags in Python with Flask",keywords:["owner:brock"],last_update:{date:new Date("2025-09-18T00:00:00.000Z")}},r=void 0,o={id:"guides/python-flask-feature-flags",title:"How to set up Feature Flags in Python with Flask",description:"Discover how easy and efficient it is to implement feature flags in your Flask applications. Flask, Python's lightweight web framework, is an excellent choice for developers looking to integrate feature flags into their projects. This guide walks you through the process using the Python Server SDK, demonstrating how Statsig's tools can enhance your Flask projects.",source:"@site/docs/guides/python-flask-feature-flags.mdx",sourceDirName:"guides",slug:"/guides/python-flask-feature-flags",permalink:"/guides/python-flask-feature-flags",draft:!1,unlisted:!1,editUrl:"https://github.com/statsig-io/docs/edit/main/docs/guides/python-flask-feature-flags.mdx",tags:[],version:"current",lastUpdatedAt:17581536e5,frontMatter:{sidebar_label:"Flask Feature Flags",title:"How to set up Feature Flags in Python with Flask",keywords:["owner:brock"],last_update:{date:"2025-09-18T00:00:00.000Z"}},sidebar:"api",previous:{title:"ExpressJS Experiments",permalink:"/guides/node-express-abtests"},next:{title:"Flask A/B Tests",permalink:"/guides/python-flask-abtests"}},l={},u=[{value:"Step 1: Getting Started with Flask and Statsig in Python",id:"step-1-getting-started-with-flask-and-statsig-in-python",level:2},{value:"Step 2: Preparing for Feature Flags",id:"step-2-preparing-for-feature-flags",level:2},{value:"Step 3: Integrating Statsig for Feature Flags in Your Flask App",id:"step-3-integrating-statsig-for-feature-flags-in-your-flask-app",level:2},{value:"Step 4: Implementing Feature Flags in Flask with Statsig",id:"step-4-implementing-feature-flags-in-flask-with-statsig",level:2}];function c(e){const t={a:"a",code:"code",h2:"h2",img:"img",p:"p",pre:"pre",...(0,n.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(t.p,{children:["Discover how easy and efficient it is to implement feature flags in your Flask applications. Flask, Python's lightweight web framework, is an excellent choice for developers looking to integrate feature flags into their projects. This guide walks you through the process using the ",(0,a.jsx)(t.a,{href:"/server/pythonSDK",children:"Python Server SDK"}),", demonstrating how Statsig's tools can enhance your Flask projects."]}),"\n",(0,a.jsx)(t.p,{children:"Flask's lightweight nature means that we don't have to treat our usage of Statsig much differently than you would with any Python project."}),"\n",(0,a.jsx)(t.p,{children:"As an example, we'll be making a Flask app that counts the number of times you visit the site."}),"\n",(0,a.jsx)(t.h2,{id:"step-1-getting-started-with-flask-and-statsig-in-python",children:"Step 1: Getting Started with Flask and Statsig in Python"}),"\n",(0,a.jsx)(t.p,{children:"Begin by setting up your workspace for integrating feature flags with Flask in Python. Here's how you can create a basic Flask application as the foundation for your feature flag implementation:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-zsh",children:"mkdir Flask-Flags\ncd Flask-Flags\ntouch app.py\n"})}),"\n",(0,a.jsx)(t.p,{children:"app.py is the file we'll write all of our code in."}),"\n",(0,a.jsxs)(t.p,{children:["Next, we should install the Flask and Statsig Python packages if you haven't already. Note: Statsig requires you to use Python 3, for more information take a look at our ",(0,a.jsx)(t.a,{href:"/server/pythonSDK",children:"Python SDK page."})]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:"pip3 install Statsig, Flask\n"})}),"\n",(0,a.jsx)(t.h2,{id:"step-2-preparing-for-feature-flags",children:"Step 2: Preparing for Feature Flags"}),"\n",(0,a.jsx)(t.p,{children:"Next, we'll start editing app.py - we'd recommend opening it up in your favorite code editor to get started. If you're new at this, you can open it in any text editor. We'll start with the simplest possible, 6-line flask app."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-Python",children:"from flask import Flask\n\napp = Flask(__name__)\n\n@app.route('/')\ndef index():\n    return \"Hello World!\"\n\napp.run(debug=True)\n"})}),"\n",(0,a.jsx)(t.p,{children:"You can run this file in your IDE, or on your command line with:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-zsh",children:"Python3 app.py\n"})}),"\n",(0,a.jsxs)(t.p,{children:["If you navigate to ",(0,a.jsx)(t.a,{href:"http://127.0.0.1:5000",children:"http://127.0.0.1:5000"}),' in your browser, you should see "Hello World!".']}),"\n",(0,a.jsx)(t.p,{children:"Next, we'll add a new endpoint to our Flask app\u2014one that we'll eventually use a feature flag to make accessible to only some users. Add this code below your last route (\"Hello World\"!) but above the app.run call:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-Python",children:"visit_count = 0\n@app.route('/secretRoute')\ndef secretRoute():\n    global visit_count\n    visit_count += 1\n    return f\"This page has been visited {visit_count} times.\"\n"})}),"\n",(0,a.jsxs)(t.p,{children:["After stopping and starting your project again, you'll be able to see this at ",(0,a.jsx)(t.a,{href:"http://127.0.0.1:5000/secretRoute",children:"http://127.0.0.1:5000/secretRoute"}),". If you refresh, you should see the number increment."]}),"\n",(0,a.jsx)(t.p,{children:'But our secret route is still accessible to everyone. We\'ll have to put it behind a feature flag ("called a "Gate" in Statsig) to make it private.'}),"\n",(0,a.jsxs)(t.p,{children:["Setting up a Statsig account and generating your first flag is easy - head to ",(0,a.jsx)(t.a,{href:"https://console.statsig.com/",children:"console.statsig.com"}),' to get started. For this example, set up an account and click on "Launch a Feature" in the setups wizard.']}),"\n",(0,a.jsx)(t.p,{children:"On the next page, you'll be able to select Python as your SDK and retrieve your server key. If you don't see these buttons, simply click on the settings gear in your home page then click on Keys & Environments, where you can copy your server key."}),"\n",(0,a.jsx)(t.h2,{id:"step-3-integrating-statsig-for-feature-flags-in-your-flask-app",children:"Step 3: Integrating Statsig for Feature Flags in Your Flask App"}),"\n",(0,a.jsx)(t.p,{children:"Now, let's add two lines of code to the top of your Python file to get Statsig set up:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-Python",children:'from statsig import statsig, StatsigUser\nstatsig.initialize("server-secret-key") #insert your server key here!\n'})}),"\n",(0,a.jsx)(t.p,{children:"You now have Statsig set up and just need to wrap your secret route in a feature flag. With Statsig, we call .checkGate to check if a feature is available or not. Let's edit our /secretRoute to include this!"}),"\n",(0,a.jsxs)(t.p,{children:["First, we need to set up a feature flag. Feature flags in Statsig are ",(0,a.jsx)(t.a,{href:"https://www.statsig.com/blog/introducing-free-feature-flags",children:"free up to 500M events"})," - let's set one up."]}),"\n",(0,a.jsx)(t.p,{children:'Click next on the Statsig setup page, and you\'ll be given the opportunity to name your flag (if you don\'t see this, just click on "Feature Gates" in the Statsig console). I\'ve called mine secret_route, and left "user_id" as the default.'}),"\n",(0,a.jsx)(t.p,{children:'Click next, and set the "rule" on your feature flag to allow "Everyone" (in the dropdown) and leave the "pass percent" at 100%. Click next and you should see an empty log stream (for now). Now, change your secretRoute function to look like this:'}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Feature gate rule configuration with Everyone at 100% pass",src:s(86585).A+"",width:"1518",height:"447"})}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-Python",children:'@app.route(\'/secretRoute\')\ndef secretRoute():\n    global visit_count\n    user = StatsigUser(user_id=f"12345")\n    if(statsig.check_gate(user, "secret_route")):\n        visit_count += 1\n        return f"This page has been visited {visit_count} times."\n    else:\n        return "failed feature flag"\n'})}),"\n",(0,a.jsxs)(t.p,{children:["Now, when we access this route, we'll only be granted access if our gate's rules allow. When you refresh ",(0,a.jsx)(t.a,{href:"http://127.0.0.1:5000/secretRoute",children:"127.0.0.1:5000/secretRoute"}),", it should still pass!"]}),"\n",(0,a.jsx)(t.p,{children:'But if you head back to your rule and change it to 100% fail, then wait a moment and refresh, you should see "failed feature flag" checking your secretRoute. Congratulations! You\'ve set up your first feature flag.'}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Feature gate rule configuration with Everyone at 0% pass",src:s(69817).A+"",width:"1516",height:"453"})}),"\n",(0,a.jsxs)(t.p,{children:["It's important to note that changes with a Server SDK won't be instantaneous; see the architecture diagram on our ",(0,a.jsx)(t.a,{href:"/server/introduction",children:"Server SDK Introduction Page"})," for more."]}),"\n",(0,a.jsx)(t.h2,{id:"step-4-implementing-feature-flags-in-flask-with-statsig",children:"Step 4: Implementing Feature Flags in Flask with Statsig"}),"\n",(0,a.jsxs)(t.p,{children:["The true power of feature flags becomes apparent when you can rollout features to specific user group (enabling dogfooding, insider groups, or ",(0,a.jsx)(t.a,{href:"https://www.statsig.com/glossary/canary-testing",children:"canary testing"}),") and even more powerful\u2014measuring the impact that it has on their experience and business metrics."]}),"\n",(0,a.jsxs)(t.p,{children:["This is what Statsig calls ",(0,a.jsx)(t.a,{href:"/feature-flags/view-exposures",children:'"Metric Lifts"'})," in our famous ",(0,a.jsx)(t.a,{href:"/pulse/read-pulse",children:"pulse view"}),"."]}),"\n",(0,a.jsx)(t.p,{children:'One of the fundamental concepts that enables this is adding user identifiers to your feature flag checks (or "gate checks"). In the previous example, we added a placeholder user_id of 12345 to the user. A more interesting example is to include an email for the user, then set our rule to only allow certain emails to access the feature. See below:'}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-Python",children:'@app.route(\'/secretRoute\')\ndef secretRoute():\n    global visit_count\n    email = request.args.get(\'email\')\n    user = StatsigUser(user_id=f"12345", email=email)  # Using the email as user_id\n    if(statsig.check_gate(user, "secret_route")):\n        visit_count += 1\n        return f"This page has been visited {visit_count} times."\n    else:\n        return "failed feature flag"\n'})}),"\n",(0,a.jsxs)(t.p,{children:["Now, we've added an email field to our user - which we can pass in in a query parameter, for example, ",(0,a.jsx)(t.a,{href:"http://127.0.0.1:5000/secretRoute?email=brock@statsig.com",children:"http://127.0.0.1:5000/secretRoute?email=brock@statsig.com"}),". Now, let's go change our rule in the Statsig console (pressing the back button) to show only users where their email contains @statsig.com - and pass 100% of those users."]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Feature gate email targeting rule configuration",src:s(50369).A+"",width:"1507",height:"355"})}),"\n",(0,a.jsx)(t.p,{children:"Now, when we refresh the URL above, we should have access! But if we change the email to not include @statsig.com by even one character, we will no longer have access. This is the fundamental concept of access management, and it unlocks so many more possibilities!"}),"\n",(0,a.jsxs)(t.p,{children:["A great next step is to consider implementing ",(0,a.jsx)(t.a,{href:"/guides/logging-events",children:"log events"})," in your project to measure the impact on users who are exposed and not exposed to a feature."]}),"\n",(0,a.jsxs)(t.p,{children:["Thanks for reading this tutorial! If you have trouble or any other questions, please join our ",(0,a.jsx)(t.a,{href:"https://statsig.com/slack",children:"Slack Group"}),"."]})]})}function h(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},69817:(e,t,s)=>{s.d(t,{A:()=>a});const a=s.p+"assets/images/everyone0_gate-b5751dfe33d0eca8e01cde3a6ee87bfb.png"},86585:(e,t,s)=>{s.d(t,{A:()=>a});const a=s.p+"assets/images/everyone_gate-c9ef212552604f2439ae61dbd0240bd2.png"},50369:(e,t,s)=>{s.d(t,{A:()=>a});const a=s.p+"assets/images/statsigemail_gate-26182e24828170e6abd23a18a126986f.png"},28453:(e,t,s)=>{s.d(t,{R:()=>r,x:()=>o});var a=s(96540);const n={},i=a.createContext(n);function r(e){const t=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:r(e.components),a.createElement(i.Provider,{value:t},e.children)}}}]);