"use strict";(self.webpackChunkstatsig_docs=self.webpackChunkstatsig_docs||[]).push([[42485],{80848:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>c,frontMatter:()=>a,metadata:()=>o,toc:()=>u});var i=t(74848),s=t(28453);const a={title:"Max/Min Metrics",sidebar_label:"Max/Min",keywords:["owner:vm"],last_update:{date:new Date("2025-09-18T00:00:00.000Z")}},r=void 0,o={id:"statsig-warehouse-native/metrics/max-min",title:"Max/Min Metrics",description:"Summary",source:"@site/docs/statsig-warehouse-native/metrics/max-min.md",sourceDirName:"statsig-warehouse-native/metrics",slug:"/statsig-warehouse-native/metrics/max-min",permalink:"/statsig-warehouse-native/metrics/max-min",draft:!1,unlisted:!1,editUrl:"https://github.com/statsig-io/docs/edit/main/docs/statsig-warehouse-native/metrics/max-min.md",tags:[],version:"current",lastUpdatedAt:17581536e5,frontMatter:{title:"Max/Min Metrics",sidebar_label:"Max/Min",keywords:["owner:vm"],last_update:{date:"2025-09-18T00:00:00.000Z"}},sidebar:"warehouse",previous:{title:"Retention",permalink:"/statsig-warehouse-native/metrics/retention"},next:{title:"Metric Examples",permalink:"/statsig-warehouse-native/configuration/metric-examples"}},l={},u=[{value:"Summary",id:"summary",level:2},{value:"Use Cases",id:"use-cases",level:3},{value:"Calculation for MAX/MIN",id:"calculation-for-maxmin",level:2},{value:"Methodology Notes",id:"methodology-notes",level:3},{value:"Options",id:"options",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,i.jsx)(n.p,{children:"Max metrics calculate the maximum of a column from the metric source at the unit level.\nMin Metrics calculate the minimum of a column from the metric source at the unit level."}),"\n",(0,i.jsx)(n.h3,{id:"use-cases",children:"Use Cases"}),"\n",(0,i.jsx)(n.p,{children:"Max/min metrics allow you to easily track users' extremes during an experiment."}),"\n",(0,i.jsx)(n.p,{children:"Common examples are:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Measuring the impact of performance changes on users' worst experiences by analyzing the maximum latency per user."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Measuring the effect of game changes on user performance by calculating the peak high score per user."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Counting the number of users who ever left a 2-star review or lower by applying MIN(review_score) with a threshold condition."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"calculation-for-maxmin",children:"Calculation for MAX/MIN"}),"\n",(0,i.jsx)(n.p,{children:"At the unit level, max/min metrics take the max/min of their input column."}),"\n",(0,i.jsx)(n.p,{children:"At the group level, the max/min is calculated as the MEAN of the unit-level sums, divided by the count of UNIQUE UNITS exposed to the experiment."}),"\n",(0,i.jsx)(n.p,{children:"The MAX would look like the SQL below:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'-- Unit Level\nSELECT\n  source_data.unit_id,\n  exposure_data.group_id,\n  MAX(source_data.value_column) as value\nFROM source_data\nJOIN exposure_data\nON\n  -- Only include users who saw the experiment\n  source_data.unit_id = exposure_data.unit_id\n  -- Only include data from after the user saw the experiment\n  -- In this case exposure_data is already deduped to the "first exposure"\n  AND source_data.timestamp >= exposure_data.timestamp\nGROUP BY\n  source_data.unit_id,\n  exposure_data.group_id;\n\n-- Experiment\nSELECT\n  group_id,\n  COUNT(distinct unit_id) total_units\nFROM exposure_data\nGROUP BY group_id;\n\n-- Group Level\nSELECT\n  group_id,\n  SUM(value)/SUM(total_units) as mean\nFROM unit_data\nJOIN group_data\nUSING (group_id)\nGROUP BY group_id;\n'})}),"\n",(0,i.jsx)(n.p,{children:"The MIN would look like the SQL below:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'-- Unit Level\nSELECT\n  source_data.unit_id,\n  exposure_data.group_id,\n  MIN(source_data.value_column) as value\nFROM source_data\nJOIN exposure_data\nON\n  -- Only include users who saw the experiment\n  source_data.unit_id = exposure_data.unit_id\n  -- Only include data from after the user saw the experiment\n  -- In this case exposure_data is already deduped to the "first exposure"\n  AND source_data.timestamp >= exposure_data.timestamp\nGROUP BY\n  source_data.unit_id,\n  exposure_data.group_id;\n\n-- Experiment\nSELECT\n  group_id,\n  COUNT(distinct unit_id) total_units\nFROM exposure_data\nGROUP BY group_id;\n\n-- Group Level\nSELECT\n  group_id,\n  SUM(value)/SUM(total_units) as mean\nFROM unit_data\nJOIN group_data\nUSING (group_id)\nGROUP BY group_id;\n'})}),"\n",(0,i.jsx)(n.h3,{id:"methodology-notes",children:"Methodology Notes"}),"\n",(0,i.jsx)(n.p,{children:"Max/min metrics are simple and there are many advanced options you can apply."}),"\n",(0,i.jsx)(n.h2,{id:"options",children:"Options"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Metric Breakdowns","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"You can configure Metadata Columns to group results by, getting easy access to dimensional views in pulse results"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Winsorization","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Specify a lower and/or upper percentile bound to winsorize at. All values below the lower threshold, or above the upper threshold, will be clamped to that threshold to reduce the outsized impact of outliers on your analysis"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["CUPED","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Specify if you want to calculate CUPED, and the lookback window for CUPED's pre-experiment data inputs"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Thresholding","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Turn this metric into a 1/0 unit count metric counting if the unit's max/min equals to or surpasses (>=) a given threshold"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/statsig-warehouse-native/features/cohort-metrics",children:"Cohort Windows"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["You can specify a window for data collection after a unit's exposure. For example, a 0-1 day cohort window would only count actions from days 0 and 1 after a unit was exposed to an experiment","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Only include units with a completed window"})," can be selected to remove units out of pulse analysis for this metric until the cohort window has completed"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/statsig-warehouse-native/features/cohort-metrics",children:"Baked Metrics"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/statsig-warehouse-native/features/cohort-metrics",children:"Baked Metrics"})," allow you to specify how long a metric needs to mature. This is common in situations like chargebacks or cancellations. Statsig will delay loading the data until the window has elapsed, and only calculate pulse results for that metric if a unit's metric has matured."]}),"\n"]}),"\n"]}),"\n"]})]})}function c(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>o});var i=t(96540);const s={},a=i.createContext(s);function r(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);