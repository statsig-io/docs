"use strict";(self.webpackChunkstatsig_docs=self.webpackChunkstatsig_docs||[]).push([[44668],{45815:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>l});var n=s(74848),i=s(28453);const r={title:"Practical Use Cases",slug:"/statsig-warehouse-native/features/use-case",sidebar_label:"Practical Use Cases",keywords:["owner:vm"],last_update:{date:new Date("2025-09-18T00:00:00.000Z")}},a=void 0,o={id:"statsig-warehouse-native/features/use-case",title:"Practical Use Cases",description:"How can I define and filter results to 'new users' only?",source:"@site/docs/statsig-warehouse-native/features/use-case.md",sourceDirName:"statsig-warehouse-native/features",slug:"/statsig-warehouse-native/features/use-case",permalink:"/statsig-warehouse-native/features/use-case",draft:!1,unlisted:!1,editUrl:"https://github.com/statsig-io/docs/edit/main/docs/statsig-warehouse-native/features/use-case.md",tags:[],version:"current",lastUpdatedAt:17581536e5,frontMatter:{title:"Practical Use Cases",slug:"/statsig-warehouse-native/features/use-case",sidebar_label:"Practical Use Cases",keywords:["owner:vm"],last_update:{date:"2025-09-18T00:00:00.000Z"}},sidebar:"warehouse",previous:{title:"Autotune",permalink:"/statsig-warehouse-native/features/autotune"},next:{title:"Metrics Explorer on WHN",permalink:"/statsig-warehouse-native/features/mex-on-warehouse-native"}},d={},l=[{value:"How can I define and filter results to &#39;new users&#39; only?",id:"how-can-i-define-and-filter-results-to-new-users-only",level:2},{value:"Scenario",id:"scenario",level:3},{value:"Solution",id:"solution",level:3},{value:"How can I analyze logged-in metrics when my experiment exposures are at logged-out grain?",id:"how-can-i-analyze-logged-in-metrics-when-my-experiment-exposures-are-at-logged-out-grain",level:2},{value:"Scenario",id:"scenario-1",level:3},{value:"Solution",id:"solution-1",level:3},{value:"Step 1 - Advanced settings for your experiments",id:"step-1---advanced-settings-for-your-experiments",level:4},{value:"Step 2 - Identify the mapping mode that suits your need",id:"step-2---identify-the-mapping-mode-that-suits-your-need",level:4},{value:"Step 3 - Choose your Entity Property Source",id:"step-3---choose-your-entity-property-source",level:4}];function c(e){const t={code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",hr:"hr",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h2,{id:"how-can-i-define-and-filter-results-to-new-users-only",children:"How can I define and filter results to 'new users' only?"}),"\n",(0,n.jsx)(t.h3,{id:"scenario",children:"Scenario"}),"\n",(0,n.jsx)(t.p,{children:"I want to filter the experiment results to new users only: A user is 'new' if they had never visited the website before they were exposed to this experiment. In other words, if the first time that they visited the website was after the exposure timestamp in this experiment, they were 'new users'; otherwise they were existing users."}),"\n",(0,n.jsx)(t.h3,{id:"solution",children:"Solution"}),"\n",(0,n.jsxs)(t.p,{children:["Assuming you have a logging table which contains every time when a user visits the website and relative timestamp ",(0,n.jsx)(t.code,{children:"logging"}),", and you have another table with all user's user_id ",(0,n.jsx)(t.code,{children:"user"}),". First, you need to create an Entity Property with the following logic:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"select distinct\n  user_id,\n  'new' as new_user,\n\n  timestamp('1900-01-01') as timestamp\nfrom user -- you can add filters here to include only targeted population only\nunion all\nselect distinct\n  user_id,\n  'existing' as new_user,\n  timestamp as timestamp\nfrom logging\n"})}),"\n",(0,n.jsx)(t.p,{children:"Click Run Query and will return a table like this. Click Save Results, then you can directly use this Entity Property across all experiments/gates to filter or group experiment results by whether they are a new users or not."}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"user_id"}),(0,n.jsx)(t.th,{children:"new_user"}),(0,n.jsx)(t.th,{children:"timestamp"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"A"}),(0,n.jsx)(t.td,{children:"new"}),(0,n.jsx)(t.td,{children:"1900-01-01T00:00:00+00:00"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"A"}),(0,n.jsx)(t.td,{children:"existing"}),(0,n.jsx)(t.td,{children:"2024-01-01T10:10:18+00:00"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"B"}),(0,n.jsx)(t.td,{children:"new"}),(0,n.jsx)(t.td,{children:"1900-01-01T00:00:00+00:00"})]})]})]}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.h2,{id:"how-can-i-analyze-logged-in-metrics-when-my-experiment-exposures-are-at-logged-out-grain",children:"How can I analyze logged-in metrics when my experiment exposures are at logged-out grain?"}),"\n",(0,n.jsx)(t.h3,{id:"scenario-1",children:"Scenario"}),"\n",(0,n.jsx)(t.p,{children:"I want to run an experiment to find out which version of my website design leads to a higher signup rate among new visitors. The experiment assignment will occur when a logged-out user visits my website, and they will be exposed to one of the design variants."}),"\n",(0,n.jsx)(t.p,{children:"When a user decides to sign up, a new and unique logged-in user ID will be generated for them. To calculate the conversion rate (CVR) accurately and consistently, I need a reliable way to map the logged-out IDs to the corresponding logged-in IDs. This will allow me to attribute each signup to the correct experiment variant and evaluate which design performs better in driving conversions."}),"\n",(0,n.jsx)(t.h3,{id:"solution-1",children:"Solution"}),"\n",(0,n.jsx)(t.p,{children:"Each suited to different business scenarios, two commonly used approaches for achieving the mapping supported by Statsig are:"}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"- Strict 1:1 Mapping:"}),"  This approach only keeps records where there is a ",(0,n.jsx)(t.em,{children:"unique, unambiguous"})," mapping between the logged-out ID and the logged-in ID. Any records with duplication (e.g., multiple logged-out IDs mapping to the same logged-in ID or vice versa) are discarded. It's recommended when accuracy and clarity are the top priorities for your experiments, and when data duplication is rare."]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"- First Touch Mapping:"})," For cases where a logged-in ID maps to multiple logged-out IDs, retain only the first association and discard the rest. It is better suited for scenarios where you want to preserve as much data as possible, and duplications are common in your business settings (e.g., users frequently access the website from multiple devices or sessions)."]}),"\n",(0,n.jsx)(t.p,{children:"For whichever mapping approach, you will need to create a mapping between the logged-out id and the logged-in id by either setting up an Entity Property with both IDs present or creating an exposure assignment source with columns for both ID types."}),"\n",(0,n.jsx)(t.h4,{id:"step-1---advanced-settings-for-your-experiments",children:"Step 1 - Advanced settings for your experiments"}),"\n",(0,n.jsxs)(t.p,{children:["When setting up your experiment, under the ",(0,n.jsx)(t.em,{children:"Setup"})," tab within your experiments, go to ",(0,n.jsx)(t.em,{children:"Advanced Settings"})," and pick your Secondary ID type (the log-in userid in this scenario).\n",(0,n.jsx)(t.img,{src:"https://github.com/user-attachments/assets/76f83c44-0389-4441-a5fc-bf29b9cab119",alt:"Screenshot 2025-01-27 at 11 44 05\u202fAM"})]}),"\n",(0,n.jsx)(t.h4,{id:"step-2---identify-the-mapping-mode-that-suits-your-need",children:"Step 2 - Identify the mapping mode that suits your need"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://github.com/user-attachments/assets/e49a030e-4933-4019-80f3-812c46cdd493",alt:"Screenshot 2025-01-27 at 11 47 59\u202fAM"})}),"\n",(0,n.jsx)(t.h4,{id:"step-3---choose-your-entity-property-source",children:"Step 3 - Choose your Entity Property Source"}),"\n",(0,n.jsx)("img",{width:"1014",alt:"Screenshot 2025-01-27 at 4 51 47\u202fPM",src:"https://github.com/user-attachments/assets/abceaaf3-b15d-481e-9e7f-abc8a5c2cef3"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"[Recommended]"})," Create a new Entity Property Source for your ID Resolution mapping if you haven't already."]}),"\n",(0,n.jsx)(t.p,{children:"Go to Data -> Entity Properties. Follow the steps, you can either enter an existing table with the ID mappings or write a new query to create the mappings with the following logic:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"SELECT stable_id, user_id, timestamp\nFROM id_mapping\n"})}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:["You can also choose ",(0,n.jsx)(t.strong,{children:'"None"'})," by using your assignment source for the mapping."]}),"\n",(0,n.jsx)(t.p,{children:"Create your new assignment source by going to Data -> Assignment Sources. Note that this is not recommended because it can get more complex to manage if you start to increase the scale of your experiments."}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},28453:(e,t,s)=>{s.d(t,{R:()=>a,x:()=>o});var n=s(96540);const i={},r=n.createContext(i);function a(e){const t=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),n.createElement(r.Provider,{value:t},e.children)}}}]);