"use strict";(self.webpackChunkstatsig_docs=self.webpackChunkstatsig_docs||[]).push([[27326],{42155:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>l});var i=n(74848),s=n(28453);const a={title:"Data Warehouse Ingestion",keywords:["owner:tim"],last_update:{date:new Date("2025-09-18T00:00:00.000Z")}},o=void 0,r={id:"data-warehouse-ingestion/introduction",title:"Data Warehouse Ingestion",description:"Slide 4_3 - 2",source:"@site/docs/data-warehouse-ingestion/introduction.md",sourceDirName:"data-warehouse-ingestion",slug:"/data-warehouse-ingestion/introduction",permalink:"/data-warehouse-ingestion/introduction",draft:!1,unlisted:!1,editUrl:"https://github.com/statsig-io/docs/edit/main/docs/data-warehouse-ingestion/introduction.md",tags:[],version:"current",lastUpdatedAt:17581536e5,frontMatter:{title:"Data Warehouse Ingestion",keywords:["owner:tim"],last_update:{date:"2025-09-18T00:00:00.000Z"}},sidebar:"cloud",previous:{title:"Stitch",permalink:"/integrations/data-connectors/stitch"},next:{title:"BigQuery",permalink:"/data-warehouse-ingestion/bigquery"}},d={},l=[{value:"Introduction",id:"introduction",level:2},{value:"How it works",id:"how-it-works",level:3},{value:"How to Begin Data Ingestion",id:"how-to-begin-data-ingestion",level:3},{value:"Connection Flow",id:"connection-flow",level:3},{value:"Data Mapping",id:"data-mapping",level:3},{value:"Scheduling Ingestion &amp; Backfilling",id:"scheduling-ingestion--backfilling",level:3},{value:"API Triggered Ingestion (mark_data_ready)",id:"api-triggered-ingestion-mark_data_ready",level:3},{value:"Frequently Asked Questions",id:"frequently-asked-questions",level:3}];function c(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:"https://user-images.githubusercontent.com/108023879/187794828-333622ec-6db2-4936-987d-efbef4ba9a47.png",alt:"Slide 4_3 - 2"})}),"\n",(0,i.jsx)(t.h2,{id:"introduction",children:"Introduction"}),"\n",(0,i.jsx)(t.p,{children:"Statsig Cloud can directly ingest data from your Data Warehouse. This lets you send raw events and pre-computed metrics for tracking and experimental measurement.\nWe currently support ingestion from the following providers:"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"/data-warehouse-ingestion/bigquery",children:"BigQuery"})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"/data-warehouse-ingestion/redshift",children:"Redshift"})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"/data-warehouse-ingestion/snowflake",children:"Snowflake"})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"/data-warehouse-ingestion/databricks",children:"Databricks"})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"/data-warehouse-ingestion/synapse",children:"Synapse"})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"/data-warehouse-ingestion/s3",children:"S3"})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"/data-warehouse-ingestion/athena",children:"Athena"})}),"\n"]}),"\n",(0,i.jsx)(t.admonition,{title:"Warehouse Native users",type:"tip",children:(0,i.jsxs)(t.p,{children:["You're viewing the Cloud docs for this page. If your project is configured as ",(0,i.jsx)(t.a,{href:"/statsig-warehouse-native/introduction/",children:"Statsig Warehouse Native"}),", your data should already be available if you completed the ",(0,i.jsx)(t.a,{href:"../statsig-warehouse-native/guides/quick-start/",children:"quickstart"}),"."]})}),"\n",(0,i.jsx)(t.h3,{id:"how-it-works",children:"How it works"}),"\n",(0,i.jsx)(t.p,{children:"In Statsig console, you can:"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsx)(t.li,{children:"Set up connection to your data warehouse"}),"\n",(0,i.jsx)(t.li,{children:"Query your data warehouse for appropriate data"}),"\n",(0,i.jsx)(t.li,{children:"Map your data fields to Statsig's expected schema"}),"\n",(0,i.jsx)(t.li,{children:"Bulk ingest & schedule future ingestions"}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"Ingestion is set up on a daily schedule. Statsig will run a query you provide on your data warehouse, download the result set, and materialize the results into your console the same as those that came in through the SDK."}),"\n",(0,i.jsx)(t.p,{children:"If data lands late or is updated, Statsig will detect this change and reload the data for that day (details below)."}),"\n",(0,i.jsx)(t.h3,{id:"how-to-begin-data-ingestion",children:"How to Begin Data Ingestion"}),"\n",(0,i.jsx)(t.p,{children:"To begin ingestion from a Data Warehouse:"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsx)(t.li,{children:"Go to your Statsig Console"}),"\n",(0,i.jsx)(t.li,{children:"Navigate to Metrics tab on the side navigation bar"}),"\n",(0,i.jsx)(t.li,{children:'To go the "Ingestion" tab'}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:"https://user-images.githubusercontent.com/108023879/187800555-47885bbd-8317-40d9-b8d7-ad5236e3c73f.png",alt:"Ingestion Tab"})}),"\n",(0,i.jsx)(t.p,{children:"You will be required to set up connections with necessary credentials, and map your data fields to the fields Statsig expects to ingest. Please refer to the warehouse-level setup documentation for more information on setup."}),"\n",(0,i.jsx)(t.h3,{id:"connection-flow",children:"Connection Flow"}),"\n",(0,i.jsx)(t.p,{children:"See the docs sidebar to find the documentation for the data warehouse of your choice. Upon connection, you will provide a SQL query to generate a view via data for Statsig to ingest."}),"\n",(0,i.jsx)("img",{src:"https://user-images.githubusercontent.com/87334575/199855101-2bed8f01-bfc7-4ef9-91a8-42620f7b796b.png",width:"700"}),"\n",(0,i.jsx)(t.h3,{id:"data-mapping",children:"Data Mapping"}),"\n",(0,i.jsx)(t.p,{children:"After connecting and providing a SQL query, we ask you to map columns in your data output to fields Statsig expects and run a small sample query to make sure that there aren't any basic issues with data types."}),"\n",(0,i.jsx)("img",{src:"https://user-images.githubusercontent.com/87334575/199855255-ebd683fb-bf3b-4825-9f2b-63913e1dda89.png",width:"700"}),"\n",(0,i.jsx)("img",{src:"https://user-images.githubusercontent.com/87334575/199855270-a59ead1a-4fd7-4d99-bd1f-a511ca21750a.png",width:"700"}),"\n",(0,i.jsxs)(t.p,{children:["See ",(0,i.jsx)(t.a,{href:"/data-warehouse-ingestion/data_mapping",children:"here"})," for more information."]}),"\n",(0,i.jsx)(t.h3,{id:"scheduling-ingestion--backfilling",children:"Scheduling Ingestion & Backfilling"}),"\n",(0,i.jsx)(t.p,{children:"Statsig supports multiple schedules for ingestion. At the scheduled window, we will check if data is present in your warehouse for the latest date, and load if it exists."}),"\n",(0,i.jsx)(t.p,{children:"We will check the underlying source table for changes. For up to 3 days after initial ingestion, we will check for >5% changes in row counts and reload the data."}),"\n",(0,i.jsx)(t.p,{children:"We also support a user-triggered backfill. This could be useful if a specific metric definition has changed, or you want to resync data older than a few days."}),"\n",(0,i.jsx)("img",{src:"https://user-images.githubusercontent.com/87334575/199854289-dec60731-b54e-43d1-92a0-2fbd53f47087.png",width:"400"}),"\n",(0,i.jsxs)(t.p,{children:["Reloading data and backfilling metrics and events is billed as any other ",(0,i.jsx)(t.a,{href:"/metrics/raw-events#billing",children:"custom event"})]}),"\n",(0,i.jsx)(t.admonition,{type:"note",children:(0,i.jsxs)(t.p,{children:["Auto-generated ",(0,i.jsx)(t.strong,{children:"User Accounting Metrics"})," are not supported today for data warehouse ingestions."]})}),"\n",(0,i.jsx)(t.h3,{id:"api-triggered-ingestion-mark_data_ready",children:"API Triggered Ingestion (mark_data_ready)"}),"\n",(0,i.jsxs)(t.p,{children:["Enterprise customers can trigger ingestion for ",(0,i.jsx)(t.code,{children:"metrics"})," or ",(0,i.jsx)(t.code,{children:"events"}),' using the statsig API. This will run your daily ingestion immediately after triggering, and can be helpful for companies whose data availability timing may vary day over day and want data to land as soon as possible in Statsig. This can be enabled by selecting "API Triggered" as your ingestion schedule - note that with this enabled, there will not be an automatic ingestion, but we will still re-sync data after the initial ingestion if we observe a change.']}),"\n",(0,i.jsxs)(t.p,{children:["To trigger ingestion, send a post request to the ",(0,i.jsx)(t.code,{children:"https://api.statsig.com/v1/mark_data_ready_dwh"})," endpoint using your statsig API key. An example would be:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:'curl \\\n  --header "statsig-api-key: <YOUR-SDK-KEY>" \\\n  --header "Content-Type: application/json" \\\n  --request POST \\\n  --data \'{"datestamps": "2023-02-20", "type": "events", "sources":["source1", "source2]}\' \\\n  "https://api.statsig.com/v1/mark_data_ready_dwh"\n'})}),"\n",(0,i.jsx)(t.p,{children:"Parameters:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"datestamps: Refers to the date of the data being triggered."}),"\n",(0,i.jsxs)(t.li,{children:["type: ",(0,i.jsx)(t.code,{children:"metrics"})," or ",(0,i.jsx)(t.code,{children:"events"})]}),"\n",(0,i.jsx)(t.li,{children:"sources (only for multi-source ingestions): Array of strings representing the sources to trigger"}),"\n"]}),"\n",(0,i.jsx)(t.admonition,{type:"note",children:(0,i.jsx)(t.p,{children:"This is rate limited to once every two hours, and there may be a few minutes delay after triggering before status updates while compute resources are created."})}),"\n",(0,i.jsx)(t.h3,{id:"frequently-asked-questions",children:"Frequently Asked Questions"}),"\n",(0,i.jsxs)(t.p,{children:["For frequently asked questions, see our ",(0,i.jsx)(t.a,{href:"/data-warehouse-ingestion/faq",children:"FAQ page"}),"."]})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>r});var i=n(96540);const s={},a=i.createContext(s);function o(e){const t=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(a.Provider,{value:t},e.children)}}}]);