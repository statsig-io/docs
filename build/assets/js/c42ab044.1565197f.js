"use strict";(self.webpackChunkstatsig_docs=self.webpackChunkstatsig_docs||[]).push([[30195,35067],{2553:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>g,frontMatter:()=>r,metadata:()=>d,toc:()=>c});var s=n(74848),a=n(28453),i=n(73926);const r={title:"Event Webhook",keywords:["owner:brock"],last_update:{date:new Date("2025-09-18T00:00:00.000Z")}},o=void 0,d={id:"integrations/event_webhook",title:"Event Webhook",description:"Incoming",source:"@site/docs/integrations/event_webhook.mdx",sourceDirName:"integrations",slug:"/integrations/event_webhook",permalink:"/integrations/event_webhook",draft:!1,unlisted:!1,editUrl:"https://github.com/statsig-io/docs/edit/main/docs/integrations/event_webhook.mdx",tags:[],version:"current",lastUpdatedAt:17581536e5,frontMatter:{title:"Event Webhook",keywords:["owner:brock"],last_update:{date:"2025-09-18T00:00:00.000Z"}},sidebar:"cloud",previous:{title:"Event Filtering",permalink:"/integrations/event_filtering"},next:{title:"OpenAI",permalink:"/integrations/openai"}},l={},c=[{value:"Incoming",id:"incoming",level:2},{value:"Outgoing",id:"outgoing",level:2},{value:"Setup",id:"setup",level:3},{value:"Runtime event webhooks",id:"runtime-event-webhooks",level:3},...i.toc,{value:"Config Change webhooks",id:"config-change-webhooks",level:3},{value:"Gate Change",id:"gate-change",level:4},{value:"Experiment Change",id:"experiment-change",level:4},{value:"Filtering Events",id:"filtering-events",level:3},{value:"Webhook Signature",id:"webhook-signature",level:3},{value:"Developing and Testing Webhooks",id:"developing-and-testing-webhooks",level:3}];function h(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h2,{id:"incoming",children:"Incoming"}),"\n",(0,s.jsx)(t.p,{children:"The Statsig Event Webhook allows you to log event data to Statsig from third party apps or other external sources to provide additional insights to your Statsig experiments and metrics."}),"\n",(0,s.jsx)(t.p,{children:"Before using the Webhook, you will need to obtain your Projects' server secret key. An example call to the Statsig Event Webhook should look like the following:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",metastring:'title="HTTP"',children:"POST https://api.statsig.com/v1/webhooks/event_webhook\n"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",metastring:'title="Headers"',children:"Content-Type: application/json\nAccept: */*\nSTATSIG-API-KEY: {STATSIG_SERVER_SECRET}\n"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",metastring:'title="JSON Body"',children:'{\n  "user": {\n    "userID": {USER_ID},\n    ...\n  },\n  "event": {EVENT_NAME},\n  "value": {VALUE},\n  "metadata": {\n    "example_field_1": {EXAMPLE_VALUE_1},\n    "example_field_2": {EXAMPLE_VALUE_2},\n    ...\n  },\n  timestamp: {TIMESTAMP}\n}\n'})}),"\n",(0,s.jsx)("div",{style:{paddingBottom:"32px"}}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"outgoing",children:"Outgoing"}),"\n",(0,s.jsx)("div",{style:{display:"flex",justifyContent:"center",marginBottom:"16px"},children:(0,s.jsx)("img",{src:"https://user-images.githubusercontent.com/95646168/162286552-c257a736-4050-4d0a-8223-67097c731c0b.png"})}),"\n",(0,s.jsx)(t.p,{children:"If you are using a service that we don't have an official integration for, you can always use our Generic Webhook integration."}),"\n",(0,s.jsx)(t.p,{children:"This integration just sends raw events to the provided webhook url."}),"\n",(0,s.jsx)(t.h3,{id:"setup",children:"Setup"}),"\n",(0,s.jsx)(t.p,{children:"In your Project Settings, under the Integrations tab. Enable the Generic Webhook integration."}),"\n",(0,s.jsx)(t.p,{children:"In the dialog that appears, enter the url of you destination webhook and then hit Enable to save the url and enable this integration."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://user-images.githubusercontent.com/95646168/162327234-c9a683af-3c36-4da9-a66d-d16bf0ad09bc.png",alt:"integration-dialog"})}),"\n",(0,s.jsxs)(t.p,{children:["You can then set which events you want forwarded to your webhook using the ",(0,s.jsx)(t.a,{href:"#filtering-events",children:"Event Filtering"})," dialog."]}),"\n",(0,s.jsx)(t.h3,{id:"runtime-event-webhooks",children:"Runtime event webhooks"}),"\n",(0,s.jsx)(t.p,{children:"These webhooks are triggered at runtime as users are being assigned to gates, experiments and are triggering events."}),"\n",(0,s.jsx)(i.default,{}),"\n",(0,s.jsx)("a",{name:"event-filtering-dialog"}),"\n",(0,s.jsx)(t.h3,{id:"config-change-webhooks",children:"Config Change webhooks"}),"\n",(0,s.jsxs)(t.p,{children:["These webhooks are triggered by configuration changes taking place within Console. Each webhook request body will contain a batch of change events in the following format: ",(0,s.jsx)(t.code,{children:'{"data": [<config-change>, <config-change>]}'}),". Batches may contain 1 or more config change events."]}),"\n",(0,s.jsx)(t.p,{children:"Below are a few examples of some of the config change payloads. To best capture the exhaustive types of config webhooks and their payloads, it's recommended to run a service such as ngrok or some other service that will help you log incoming webhooks."}),"\n",(0,s.jsx)(t.h4,{id:"gate-change",children:"Gate Change"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-json",children:'{\n  "user": {\n      "name": "Test User",\n      "email": "testuser@email.com"\n  },\n  "timestamp": 1709660061095,\n  "eventName": "statsig::config_change",\n  "metadata": {\n      "type": "Gate",\n      "name": "layout_v2",\n      "description": "Description: Change default page layout",\n      "action": "created"\n  }\n}\n'})}),"\n",(0,s.jsx)(t.h4,{id:"experiment-change",children:"Experiment Change"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-json",children:'{\n  "user": {\n      "name": "Test User",\n      "email": "testuser@email.com"\n  },\n  "timestamp": 1709658507446,\n  "eventName": "statsig::config_change",\n  "metadata": {\n      "type": "Experiment",\n      "name": "heading_test",\n      "description": "- Updated experiment settings\\n    - Groups updated: control, test\\n    - Parameters added: heading\\n    - Parameters updated: directives",\n      "action": "updated"\n  }\n}\n'})}),"\n",(0,s.jsx)(t.h3,{id:"filtering-events",children:"Filtering Events"}),"\n",(0,s.jsxs)(t.p,{children:["Once you've enabled outbound events to your webhook, you can select which categories of Statsig events you want to export by clicking on the ",(0,s.jsx)(t.strong,{children:"Event Filtering"})," button and checking the appropriate boxes as shown below.\nThere are 2 main types of events: ",(0,s.jsx)(t.em,{children:"Exposures"})," (e.g. events logged via the SDK) and ",(0,s.jsx)(t.em,{children:"Config Changes"})," (changelogs for Statsig Console)"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://user-images.githubusercontent.com/95646168/162329973-6f229186-1126-4824-9e29-1ff029f6553e.png",alt:"event-filter-button"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://user-images.githubusercontent.com/95646168/162329983-169703fc-c838-40a2-81dc-dd3c83886d00.png",alt:"event-filter-dialog"})}),"\n",(0,s.jsx)(t.h3,{id:"webhook-signature",children:"Webhook Signature"}),"\n",(0,s.jsx)(t.p,{children:"You can verify that a webhook request is coming from Statsig via our Webhook Signature."}),"\n",(0,s.jsx)(t.p,{children:"Follow the following steps to verify the signature:"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:"Grab your webhook signing secret from your Webhook integration card"}),"\n"]}),"\n",(0,s.jsx)("img",{width:"738",alt:"Screen Shot 2022-12-21 at 5 36 49 PM",src:"https://user-images.githubusercontent.com/87334575/209035738-bbbc0944-b428-4454-bf19-8845892c2044.png"}),"\n",(0,s.jsxs)(t.ol,{start:"2",children:["\n",(0,s.jsx)(t.li,{children:"Extract the request time header 'X-Statsig-Request-Timestamp' from the webhook request."}),"\n",(0,s.jsx)(t.li,{children:'Concatenate the version number ("v0"), the timestamp, and the request body together, using a colon (:) as a delimiter to create a signature basestring. Here\'s an example of a possible base string:'}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:'v0:1671672194836:{"data":[{"user":{"name":"Joe Zeng","email":"joe@statsig.com"},"timestamp":1671672134833,"eventName":"statsig::config_change","metadata":{"type":"Gate","name":"test","description":"- Updated Rule test rollout from 100.00% to 10.00%","environment":"production"}}]}\n'})}),"\n",(0,s.jsxs)(t.ol,{start:"4",children:["\n",(0,s.jsx)(t.li,{children:'Hash the signature basestring, using the signing secret as a key, and take the hex digest of the hash. Create the full signature by prefixing the hex digest with the version number ("v0") and an equals sign. See sample pseudo code below.'}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"statsig_signature = 'v0=' + hmac.compute_hash_sha256(\nwebhook_signing_secret,\nsignature_basestring\n).hexdigest()\n>>> 'v0=05c50d1513d49f884df8b0469befbbd432bd30364e81f16a606dec69f29e8f18'\n"})}),"\n",(0,s.jsxs)(t.ol,{start:"5",children:["\n",(0,s.jsx)(t.li,{children:"Compare the resulting signature to the 'X-Statsig-Signature' header on the request"}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"developing-and-testing-webhooks",children:"Developing and Testing Webhooks"}),"\n",(0,s.jsx)(t.admonition,{type:"info",children:(0,s.jsxs)(t.p,{children:["The actual event payload may look different than the examples above. ",(0,s.jsx)("br",{}),"\nTo test webhook configuration and see payloads before starting development, you can use a local HTTP tunnel (e.g. ngrok)."]})}),"\n",(0,s.jsxs)(t.p,{children:["You can also use the ",(0,s.jsx)(t.strong,{children:"Debug"})," tool to"]}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:"See requests made to the webhook, including diagnostic information such as number of events forwarded/filtered, request header & body, and more."}),"\n",(0,s.jsx)(t.li,{children:"Send example requests to the webhook using any recently logged event or exposure"}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://graphite-user-uploaded-assets-prod.s3.amazonaws.com/ak7zkUsSoHh2VQAhtjtL/5e14e128-1fd4-46f9-8543-364f9b9819bb.png",alt:"Debug Tool"})})]})}function g(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},73926:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>i,metadata:()=>o,toc:()=>l});var s=n(74848),a=n(28453);const i={},r=void 0,o={id:"integrations/snippets/integration_event_formats",title:"integration_event_formats",description:"Event Format",source:"@site/docs/integrations/snippets/integration_event_formats.mdx",sourceDirName:"integrations/snippets",slug:"/integrations/snippets/integration_event_formats",permalink:"/integrations/snippets/integration_event_formats",draft:!1,unlisted:!1,editUrl:"https://github.com/statsig-io/docs/edit/main/docs/integrations/snippets/integration_event_formats.mdx",tags:[],version:"current",lastUpdatedAt:1736562585e3,frontMatter:{}},d={},l=[{value:"Event Format",id:"event-format",level:3},{value:"Custom Event Formatting - logEvent",id:"custom-event-formatting---logevent",level:4},{value:"Feature Gate Exposure Formatting - checkGate",id:"feature-gate-exposure-formatting---checkgate",level:4},{value:"Dynamic Config Exposure Formatting - getConfig",id:"dynamic-config-exposure-formatting---getconfig",level:4},{value:"Experiment Exposure Formatting - getExperiment",id:"experiment-exposure-formatting---getexperiment",level:4},{value:"Example Batch",id:"example-batch",level:4}];function c(e){const t={a:"a",blockquote:"blockquote",code:"code",h3:"h3",h4:"h4",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h3,{id:"event-format",children:"Event Format"}),"\n",(0,s.jsx)(t.p,{children:"Events will be sent in batches in a JSON format. The structure of a Statsig Event sent will look like the following:"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Field"}),(0,s.jsx)(t.th,{children:"Type"}),(0,s.jsx)(t.th,{children:"Description"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"eventName"}),(0,s.jsx)(t.td,{children:"String"}),(0,s.jsx)(t.td,{children:"Name of the event provided"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"user"}),(0,s.jsx)(t.td,{children:"JSON"}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.a,{href:"https://docs.statsig.com/concepts/user",children:"Statsig User Object"})})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"userID"}),(0,s.jsx)(t.td,{children:"String"}),(0,s.jsx)(t.td,{children:"User ID provided"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"timestamp"}),(0,s.jsx)(t.td,{children:"Number"}),(0,s.jsx)(t.td,{children:"Timestamp in MS of the event"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"value"}),(0,s.jsx)(t.td,{children:"String"}),(0,s.jsx)(t.td,{children:"Value of the event provided"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"metadata"}),(0,s.jsx)(t.td,{children:"JSON"}),(0,s.jsx)(t.td,{children:"Custom Metadata provided"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"statsigMetadata"}),(0,s.jsx)(t.td,{children:"JSON"}),(0,s.jsx)(t.td,{children:"Metadata related to the logging of this event added by Statsig"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"timeUUID"}),(0,s.jsx)(t.td,{children:"String"}),(0,s.jsx)(t.td,{children:"UUID for the event"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"unitID"}),(0,s.jsx)(t.td,{children:"String"}),(0,s.jsx)(t.td,{children:"Unit ID of the exposure (e.g. userID, stableID, or the customID)"})]})]})]}),"\n",(0,s.jsx)(t.h4,{id:"custom-event-formatting---logevent",children:"Custom Event Formatting - logEvent"}),"\n",(0,s.jsx)(t.blockquote,{children:"\n"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-json",children:'{\n  "eventName": "my_custom_event",\n  "user": {\n    "userID": "a_user",\n    "email": "a.user@email.com"\n  },\n  "userID": "a_user",\n  "timestamp": "1655231253265",\n  "statsigMetadata": {\n    ...\n  },\n  "value": "a_custom_value",\n  "metadata": {\n    "key_a": "value_a",\n    "key_b": "123"\n  },\n  "timeUUID": "abd2a983-ec0f-11ec-917a-fb8cdaeda578"\n}\n'})}),"\n",(0,s.jsx)(t.h4,{id:"feature-gate-exposure-formatting---checkgate",children:"Feature Gate Exposure Formatting - checkGate"}),"\n",(0,s.jsx)(t.blockquote,{children:"\n"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-json",children:'{\n  "eventName": "statsig::gate_exposure",\n  "user": { ... },\n  "userID": "a_user",\n  "timestamp": "1655231253265",\n  "statsigMetadata": { ... },\n  "value": "",\n  "metadata": {\n    "gate": "a_gate",\n    "gateValue": "false",\n    "ruleID": "default",\n    "reason": "Network",\n    "time": "1655231249644"\n  },\n  "timeUUID": "8d7c1040-ec11-11ec-g123-abe2c32fcf46",\n  "unitID": "userID"\n}\n'})}),"\n",(0,s.jsx)(t.h4,{id:"dynamic-config-exposure-formatting---getconfig",children:"Dynamic Config Exposure Formatting - getConfig"}),"\n",(0,s.jsx)(t.blockquote,{children:"\n"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-json",children:'{\n  "eventName": "statsig::config_exposure",\n  "user": { ... },\n  "userID": "a_user",\n  "timestamp": "1655231253265",\n  "statsigMetadata": { ... },\n  "value": "",\n  "metadata": {\n    "config": "a_config",\n    "ruleID": "default",\n    "reason": "Network",\n    "time": "1655231249644"\n  },\n  "timeUUID": "af379f60-ec11-22ad-8e0a-05c3ee70bd0c",\n  "unitID": "userID"\n}\n'})}),"\n",(0,s.jsx)(t.h4,{id:"experiment-exposure-formatting---getexperiment",children:"Experiment Exposure Formatting - getExperiment"}),"\n",(0,s.jsx)(t.blockquote,{children:"\n"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-json",children:'{\n  "eventName": "statsig::experiment_exposure",\n  "user": { ... },\n  "userID": "a_user",\n  "timestamp": "1655232119734",\n  "statsigMetadata": { ... },\n  "value": "",\n  "metadata": {\n    "config": "an_experiment",\n    "ruleID": "4SauZJcM1T7zNvh1igBjwE",\n    "reason": "Network",\n    "time": "1655231249644",\n    "experimentGroupName": "Control"\n  },\n  "timeUUID": "af379f61-ab22-11ec-8e0a-05c3ee70bd0c",\n  "unitID": "userID"\n}\n'})}),"\n",(0,s.jsx)(t.h4,{id:"example-batch",children:"Example Batch"}),"\n",(0,s.jsx)(t.blockquote,{children:"\n"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-json",children:'[\n  {\n    "eventName": "page_view",\n    "user": {"userID": "user_1", "country": "US"},\n    "userID": "user_1",\n    "timestamp": 1644520566967,\n    "value": "example_value",\n    "metadata": {"page": "home_page"},\n    "statsigMetadata": {},\n    "timeUUID": "f4c414a0-8ab5-11ec-a8a3-0242ac120002"\n  },\n  {\n    "eventName": "statsig::gate_exposure",\n    "user": {"userID": "user_1", "country": "US"},\n    "userID": "user_1",\n    "timestamp": 1644520566968,\n    "value": "",\n    "metadata": {"gate": "test_gate", "gateValue": "true", "ruleID": "default"},\n    "statsigMetadata": {},\n    "timeUUID": "f4c414a0-8ab5-11ec-a8a3-0242ac120003",\n    "unitID": "userID"\n  },\n  {\n    "eventName": "statsig::experiment_exposure"\n    "user": {"userID": "user_1", "country": "US"},\n    "userID": "user_1",\n    "timestamp": 1644520566969,\n    "value": "",\n    "metadata": {\n       "config": "an_experiment", "ruleID": "4SauZJcM1T7zNvh1igBjwE", "reason": "Network", "time": "1655231249644", "experimentGroupName": "Control"\n    },\n    "statsigMetadata": {},\n    "timeUUID": "f4c414a0-8ab5-11ec-a8a3-0242ac120004",\n    "unitID": "userID"\n  }\n]\n'})})]})}function h(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>o});var s=n(96540);const a={},i=s.createContext(a);function r(e){const t=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),s.createElement(i.Provider,{value:t},e.children)}}}]);