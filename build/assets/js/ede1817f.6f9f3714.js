"use strict";(self.webpackChunkstatsig_docs=self.webpackChunkstatsig_docs||[]).push([[37836],{48567:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>d,frontMatter:()=>o,metadata:()=>a,toc:()=>u});var s=t(74848),i=t(28453);const o={title:"Funnel++",sidebar_label:"Funnel++",keywords:["owner:vm"],last_update:{date:new Date("2025-09-18T00:00:00.000Z")}},r=void 0,a={id:"statsig-warehouse-native/metrics/funnel",title:"Funnel++",description:"Funnel++ is a Statsig Warehouse Native feature.",source:"@site/docs/statsig-warehouse-native/metrics/funnel.md",sourceDirName:"statsig-warehouse-native/metrics",slug:"/statsig-warehouse-native/metrics/funnel",permalink:"/statsig-warehouse-native/metrics/funnel",draft:!1,unlisted:!1,editUrl:"https://github.com/statsig-io/docs/edit/main/docs/statsig-warehouse-native/metrics/funnel.md",tags:[],version:"current",lastUpdatedAt:17581536e5,frontMatter:{title:"Funnel++",sidebar_label:"Funnel++",keywords:["owner:vm"],last_update:{date:"2025-09-18T00:00:00.000Z"}},sidebar:"warehouse",previous:{title:"Ratio",permalink:"/statsig-warehouse-native/metrics/ratio"},next:{title:"Percentile",permalink:"/statsig-warehouse-native/metrics/percentile"}},l={},u=[{value:"Summary",id:"summary",level:2},{value:"Use Cases",id:"use-cases",level:3},{value:"Calculation",id:"calculation",level:2},{value:"Methodology Notes",id:"methodology-notes",level:3},{value:"Options",id:"options",level:2},{value:"Visualization",id:"visualization",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:"Funnel++ is a Statsig Warehouse Native feature."})}),"\n",(0,s.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,s.jsxs)(n.p,{children:["Funnel metrics measure user journeys through a series of steps. There's additional guidance ",(0,s.jsx)(n.a,{href:"/statsig-warehouse-native/features/funnel-metrics",children:"here"})," on how to configure and use funnel metrics."]}),"\n",(0,s.jsx)(n.p,{children:"Statsig allows you to use advanced functionalities - normally reserved for product analytics tools - within the rigorous statistical framework used in pulse analysis. This includes:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Configurable completion windows per-step"}),"\n",(0,s.jsx)(n.li,{children:"Session controls - going beyond user-based conversion"}),"\n",(0,s.jsx)(n.li,{children:"Built-in allowance for timestamp noise"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"use-cases",children:"Use Cases"}),"\n",(0,s.jsx)(n.p,{children:"Funnel metrics are a powerful tool to understand how users move through your product. For example, you might want to measure:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"User conversion through a subscription flow, e.g. Start -> Description Page -> Payment Info -> Confirm, so you can measure if an experiment causes users to drop of less, and at which steps"}),"\n",(0,s.jsxs)(n.li,{children:['User conversion from "logged out visitor" to "first logged-in-article-read" leveraging Statsig\'s ',(0,s.jsx)(n.a,{href:"/statsig-warehouse-native/features/funnel-metrics",children:"ID Resolution"})]}),"\n",(0,s.jsx)(n.li,{children:"Session-level conversion of checking out a vacation property, so you can understand what the conversion looks like for every unique checkout flow -- not just at the user level"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"calculation",children:"Calculation"}),"\n",(0,s.jsx)(n.p,{children:"At the unit level, funnel metrics will calculate, for each step of the funnel, if the unit completed that step some time after all previous steps were completed in order. This creates a series of step flags."}),"\n",(0,s.jsx)(n.p,{children:"If using session funnels, those step flags are instead counts of unique sessions."}),"\n",(0,s.jsx)(n.p,{children:"At the group level, the stepwise mean is calculated as the units for the next step divided by the units for the current step. The overall mean is calculated as the units/sessions that completed the funnel divided by the unit/sessions that started the funnel."}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["For each step, the ",(0,s.jsx)(n.em,{children:"first"})," occurrence after the previous step is treated as the canonical trigger and timestamp for that event going forward for subsequent timestamp comparisons."]})}),"\n",(0,s.jsx)(n.p,{children:"This would look like the SQL below:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'-- Unit Level, per step\nSELECT distinct\n  source_data.unit_id,\n  source_data.funnel_session_id, -- optional\n  source_data.funnel_step_id,\n  IF(`<Completed All Steps Up to Current Step In Order>`, 1, 0) as numerator,\n  IF(`<Completed Previous Steps In Order>`, 1, 0) as denominator\nFROM source_data\nJOIN exposure_data\nON\n  -- Only include users who saw the experiment\n  source_data.unit_id = exposure_data.unit_id\n  -- Only include data from after the user saw the experiment\n  -- In this case exposure_data is already deduped to the "first exposure"\n  AND source_data.timestamp >= exposure_data.timestamp\n;\n\n--Group Level\nSELECT\n  group_id,\n  funnel_step_id,\n  SUM(numerator)/SUM(denominator) as mean\nFROM unit_data\nGROUP BY group_id;\n'})}),"\n",(0,s.jsx)(n.h3,{id:"methodology-notes",children:"Methodology Notes"}),"\n",(0,s.jsx)(n.p,{children:"Conversion metrics require adjustment due to potential unit-level covariance between the numerator and the denominator. Statsig uses the delta method to estimate this adjustment."}),"\n",(0,s.jsx)(n.p,{children:"By default, Statsig only includes numerators from metrics with non-null, non-zero denominators. This is configurable in the advanced settings."}),"\n",(0,s.jsx)(n.p,{children:"Funnels in experiment-analysis order strictly. For example, in the funnel A->B->C, all subsequent timestamp comparisons are based on the FIRST occurrence of A. If a user has an A event on day 0, with no other events, and then A/B/C all occur in order on day 5, this funnel will not count as completed if there is a 1-day conversion window from A->B since the time from the first A to the first B is 5 days."}),"\n",(0,s.jsx)(n.h2,{id:"options",children:"Options"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Conversion window","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"A step-level setting specifying how long this step has to occur after the previous step. For example, in the funnel A->B->C, if B has a conversion window of one hour, it will only be counted if it occurs within 1 hour of A."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Use Strict Event Ordering","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:'Whether to use >= or > when comparing step timestamps. Strict mode allows you to have two subsequent steps of the same event without it "automatically" passing'}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Timestamp Allowance","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Allow some amount of buffer, in milliseconds, between funnel steps. Event logs can have noise on timestamps, so sometimes events may be logged slightly out of order. This setting helps to correct for this issue."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Count Distinct Mode","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Whether to count sessions or units. For sessions, you must provide a session identifier field on each step"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Calculation window (optional)","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"How long a unit has to complete the funnel, once started, and if the funnel starts when the unit is exposed to the experiment or when they trigger the first event in the funnel"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Treat Exposure as Initial Funnel Event","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"With this setting enabled, the first step of the funnel is the exposure event of the experiment. This makes it easy to measure the conversion rate to the first event, and additionally normalizes the final outcome per experiment-user. Note that this is incompatible with session-based funnels."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Measure time to complete","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Switches the funnel mode into measuring the average time for users to complete a funnel. This will create a ratio metric, where the numerator is the sum of funnel seconds-to-complete, and the denominator is the number of completed funnels. This can be useful in isolation, or when paired with a conversion measurement to understand the change to both completion rate and time to complete."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"visualization",children:"Visualization"}),"\n",(0,s.jsxs)(n.p,{children:["In addition to breaking down lift by funnel steps, it is also possible to create funnel visualizations by step.\n",(0,s.jsx)(n.img,{src:"https://github.com/user-attachments/assets/c38ca372-5323-408f-89b6-121300b4e60c",alt:"Funnel visualization by step breakdown"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://github.com/user-attachments/assets/8e10442f-be78-455e-84a3-053e4a61434a",alt:"Funnel step analysis chart"})})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var s=t(96540);const i={},o=s.createContext(i);function r(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);