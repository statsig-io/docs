"use strict";(self.webpackChunkstatsig_docs=self.webpackChunkstatsig_docs||[]).push([[27375],{44251:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>c,toc:()=>u});var i=s(74848),t=s(28453),r=s(11470),a=s(19365);const l={title:"CLI Session Replay",sidebar_label:"CLI Session Replay",slug:"/session-replay/cli-session-replay",keywords:["cli","terminal","session replay","asciicast","command line"],last_update:{date:new Date("2025-07-24T00:00:00.000Z")}},o="CLI Session Replay (Beta)",c={id:"session-replay/cli-session-replay",title:"CLI Session Replay",description:"CLI Session Replay allows you to record terminal sessions in your Node.js CLI applications and replay them in the Statsig Console. This enables you to understand how users interact with your command-line tools, diagnose issues, and improve the user experience.",source:"@site/docs/session-replay/cli-session-replay.mdx",sourceDirName:"session-replay",slug:"/session-replay/cli-session-replay",permalink:"/session-replay/cli-session-replay",draft:!1,unlisted:!1,editUrl:"https://github.com/statsig-io/docs/edit/main/docs/session-replay/cli-session-replay.mdx",tags:[],version:"current",lastUpdatedAt:17533152e5,frontMatter:{title:"CLI Session Replay",sidebar_label:"CLI Session Replay",slug:"/session-replay/cli-session-replay",keywords:["cli","terminal","session replay","asciicast","command line"],last_update:{date:"2025-07-24T00:00:00.000Z"}},sidebar:"cloud",previous:{title:"Watch",permalink:"/session-replay/watch"},next:{title:"MCP Server",permalink:"/integrations/mcp"}},d={},u=[{value:"Installation",id:"installation",level:2},{value:"Basic Usage",id:"basic-usage",level:2},{value:"Configuration Options",id:"configuration-options",level:2},{value:"Configuration Properties",id:"configuration-properties",level:3},{value:"Recording Limits",id:"recording-limits",level:2},{value:"Viewing Recordings",id:"viewing-recordings",level:2},{value:"Manual Recording Control",id:"manual-recording-control",level:2},{value:"Platform Support",id:"platform-support",level:2}];function p(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"cli-session-replay-beta",children:"CLI Session Replay (Beta)"})}),"\n",(0,i.jsx)(n.p,{children:"CLI Session Replay allows you to record terminal sessions in your Node.js CLI applications and replay them in the Statsig Console. This enables you to understand how users interact with your command-line tools, diagnose issues, and improve the user experience."}),"\n",(0,i.jsx)(n.p,{children:"The plugin records terminal output and resize events.\nUser input is planned for a future version, but given that it's likely to contain sensitive information,\nwe'll release it after introducing methods to pause, filter or redact recordings."}),"\n",(0,i.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,i.jsx)(n.p,{children:"Install the CLI session replay package for Node.js:"}),"\n",(0,i.jsxs)(r.A,{groupId:"session-replay-js-framework",defaultValue:"npm",values:[{label:"npm",value:"npm"},{label:"yarn",value:"yarn"},{label:"pnpm",value:"pnpm"}],children:[(0,i.jsx)(a.A,{value:"npm",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm install @statsig/js-client @statsig/cli-session-replay-node\n"})})}),(0,i.jsx)(a.A,{value:"yarn",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"yarn add @statsig/js-client @statsig/cli-session-replay-node\n"})})}),(0,i.jsx)(a.A,{value:"pnpm",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"pnpm add @statsig/js-client @statsig/cli-session-replay-node\n"})})})]}),"\n",(0,i.jsx)(n.h2,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"import { StatsigClient } from '@statsig/js-client';\nimport { StatsigCliSessionReplayPlugin } from '@statsig/cli-session-replay-node';\n\nconst client = new StatsigClient(\n  'your-client-key',\n  { userID: 'user-123' },\n  {\n    loggingEnabled: 'always', // Required for CLI environments\n    plugins: [new StatsigCliSessionReplayPlugin()],\n  }\n);\n\n// Recording starts here\nconsole.log('Hello from CLI!');\n\nawait client.initializeAsync();\n\n// Your CLI application logic here\nconsole.log('Continue');\n"})}),"\n",(0,i.jsx)(n.admonition,{title:"CLI Logging Requirement",type:"note",children:(0,i.jsxs)(n.p,{children:["CLI applications must set ",(0,i.jsx)(n.code,{children:"loggingEnabled: 'always'"})," when initializing the StatsigClient. By default, Statsig only enables logging in browser environments, but CLI session replay requires logging to be enabled in all environments to capture and send session data."]})}),"\n",(0,i.jsx)(n.h2,{id:"configuration-options",children:"Configuration Options"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"StatsigCliSessionReplayPlugin"})," accepts optional configuration:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"import { StatsigCliSessionReplayPlugin } from '@statsig/cli-session-replay-node';\n\nconst plugin = new StatsigCliSessionReplayPlugin({\n  // Override the start timestamp (in milliseconds)\n  startTimestamp: Date.now(),\n  \n  // Custom Asciicast header properties\n  asciicastHeader: {\n    title: 'My CLI App Session',\n    command: 'my-cli-tool --verbose',\n    env: {\n      TERM: 'xterm-256color',\n      SHELL: '/bin/bash'\n    },\n  }\n});\n"})}),"\n",(0,i.jsx)(n.h3,{id:"configuration-properties",children:"Configuration Properties"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"startTimestamp"})})," (optional): Override the recording start time in milliseconds. Defaults to ",(0,i.jsx)(n.code,{children:"Date.now()"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"asciicastHeader"})})," (optional): Custom properties for the Asciicast header. For detailed information, visit the ",(0,i.jsx)(n.a,{href:"https://docs.asciinema.org/manual/asciicast/v2/#header",children:"Asciicast v2 File Format page"}),". Common fields include:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"title"}),": Human-readable title for the recording"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"command"}),": The command that was executed"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"env"}),": Environment variables relevant to the session"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"theme"}),": Terminal color theme object."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"recording-limits",children:"Recording Limits"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Duration"}),": Sessions automatically end after 4 hours"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Size"}),": Recording stops if the session data exceeds 1MB"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"viewing-recordings",children:"Viewing Recordings"}),"\n",(0,i.jsx)(n.p,{children:"CLI session recordings appear in the Statsig Console alongside web session replays. The recordings can be played back to see exactly what happened in the terminal, including:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"All terminal output"}),"\n",(0,i.jsx)(n.li,{children:"Terminal resize events"}),"\n",(0,i.jsx)(n.li,{children:"Timing information for each interaction"}),"\n",(0,i.jsx)(n.li,{children:"Session metadata and environment details"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"manual-recording-control",children:"Manual Recording Control"}),"\n",(0,i.jsx)(n.p,{children:"You can access the recording instance for manual control:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"import { CliRecording } from '@statsig/cli-session-replay-node';\n\n// Check if currently recording\nif (CliRecording.isRecording()) {\n  console.log('Session is being recorded');\n}\n\n// Get current recording instance\nconst recording = CliRecording.currentRecording;\n\n// Manually finish recording\nCliRecording.finish();\n"})}),"\n",(0,i.jsx)(n.h2,{id:"platform-support",children:"Platform Support"}),"\n",(0,i.jsx)(n.p,{children:"CLI Session Replay is currently supported on:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Node.js applications"}),"\n",(0,i.jsx)(n.li,{children:"Linux, macOS, and Windows terminals"}),"\n",(0,i.jsx)(n.li,{children:"Any terminal that supports standard input/output streams"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}},19365:(e,n,s)=>{s.d(n,{A:()=>a});s(96540);var i=s(34164);const t={tabItem:"tabItem_Ymn6"};var r=s(74848);function a(e){let{children:n,hidden:s,className:a}=e;return(0,r.jsx)("div",{role:"tabpanel",className:(0,i.A)(t.tabItem,a),hidden:s,children:n})}},11470:(e,n,s)=>{s.d(n,{A:()=>C});var i=s(96540),t=s(34164),r=s(23104),a=s(56347),l=s(205),o=s(57485),c=s(31682),d=s(70679);function u(e){return i.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,i.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function p(e){const{values:n,children:s}=e;return(0,i.useMemo)((()=>{const e=n??function(e){return u(e).map((e=>{let{props:{value:n,label:s,attributes:i,default:t}}=e;return{value:n,label:s,attributes:i,default:t}}))}(s);return function(e){const n=(0,c.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,s])}function h(e){let{value:n,tabValues:s}=e;return s.some((e=>e.value===n))}function m(e){let{queryString:n=!1,groupId:s}=e;const t=(0,a.W6)(),r=function(e){let{queryString:n=!1,groupId:s}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!s)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return s??null}({queryString:n,groupId:s});return[(0,o.aZ)(r),(0,i.useCallback)((e=>{if(!r)return;const n=new URLSearchParams(t.location.search);n.set(r,e),t.replace({...t.location,search:n.toString()})}),[r,t])]}function g(e){const{defaultValue:n,queryString:s=!1,groupId:t}=e,r=p(e),[a,o]=(0,i.useState)((()=>function(e){let{defaultValue:n,tabValues:s}=e;if(0===s.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!h({value:n,tabValues:s}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${s.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const i=s.find((e=>e.default))??s[0];if(!i)throw new Error("Unexpected error: 0 tabValues");return i.value}({defaultValue:n,tabValues:r}))),[c,u]=m({queryString:s,groupId:t}),[g,f]=function(e){let{groupId:n}=e;const s=function(e){return e?`docusaurus.tab.${e}`:null}(n),[t,r]=(0,d.Dv)(s);return[t,(0,i.useCallback)((e=>{s&&r.set(e)}),[s,r])]}({groupId:t}),y=(()=>{const e=c??g;return h({value:e,tabValues:r})?e:null})();(0,l.A)((()=>{y&&o(y)}),[y]);return{selectedValue:a,selectValue:(0,i.useCallback)((e=>{if(!h({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);o(e),u(e),f(e)}),[u,f,r]),tabValues:r}}var f=s(92303);const y={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var x=s(74848);function v(e){let{className:n,block:s,selectedValue:i,selectValue:a,tabValues:l}=e;const o=[],{blockElementScrollPositionUntilNextRender:c}=(0,r.a_)(),d=e=>{const n=e.currentTarget,s=o.indexOf(n),t=l[s].value;t!==i&&(c(n),a(t))},u=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const s=o.indexOf(e.currentTarget)+1;n=o[s]??o[0];break}case"ArrowLeft":{const s=o.indexOf(e.currentTarget)-1;n=o[s]??o[o.length-1];break}}n?.focus()};return(0,x.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,t.A)("tabs",{"tabs--block":s},n),children:l.map((e=>{let{value:n,label:s,attributes:r}=e;return(0,x.jsx)("li",{role:"tab",tabIndex:i===n?0:-1,"aria-selected":i===n,ref:e=>o.push(e),onKeyDown:u,onClick:d,...r,className:(0,t.A)("tabs__item",y.tabItem,r?.className,{"tabs__item--active":i===n}),children:s??n},n)}))})}function b(e){let{lazy:n,children:s,selectedValue:r}=e;const a=(Array.isArray(s)?s:[s]).filter(Boolean);if(n){const e=a.find((e=>e.props.value===r));return e?(0,i.cloneElement)(e,{className:(0,t.A)("margin-top--md",e.props.className)}):null}return(0,x.jsx)("div",{className:"margin-top--md",children:a.map(((e,n)=>(0,i.cloneElement)(e,{key:n,hidden:e.props.value!==r})))})}function j(e){const n=g(e);return(0,x.jsxs)("div",{className:(0,t.A)("tabs-container",y.tabList),children:[(0,x.jsx)(v,{...n,...e}),(0,x.jsx)(b,{...n,...e})]})}function C(e){const n=(0,f.A)();return(0,x.jsx)(j,{...e,children:u(e.children)},String(n))}},28453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>l});var i=s(96540);const t={},r=i.createContext(t);function a(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);