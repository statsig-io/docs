"use strict";(self.webpackChunkstatsig_docs=self.webpackChunkstatsig_docs||[]).push([[74001],{26094:(e,s,a)=>{a.r(s),a.d(s,{assets:()=>o,contentTitle:()=>i,default:()=>d,frontMatter:()=>n,metadata:()=>r,toc:()=>c});var t=a(74848),l=a(28453);const n={title:"Measuring multiple rollout stages",sidebar_label:"Multi-stage rollouts",slug:"/feature-flags/multiple-rollout-stages",keywords:["owner:liz"],last_update:{date:new Date("2025-06-25T00:00:00.000Z")}},i=void 0,r={id:"feature-flags/multiple-rollout-stages",title:"Measuring multiple rollout stages",description:"Continuous Analysis",source:"@site/docs/feature-flags/multiple-rollout-stages.md",sourceDirName:"feature-flags",slug:"/feature-flags/multiple-rollout-stages",permalink:"/feature-flags/multiple-rollout-stages",draft:!1,unlisted:!1,editUrl:"https://github.com/statsig-io/docs/edit/main/docs/feature-flags/multiple-rollout-stages.md",tags:[],version:"current",lastUpdatedAt:17508096e5,frontMatter:{title:"Measuring multiple rollout stages",sidebar_label:"Multi-stage rollouts",slug:"/feature-flags/multiple-rollout-stages",keywords:["owner:liz"],last_update:{date:"2025-06-25T00:00:00.000Z"}},sidebar:"cloud",previous:{title:"Pre-Post Results",permalink:"/feature-flags/pre-post-results"},next:{title:"Scheduled Rollouts",permalink:"/feature-flags/scheduled-rollouts"}},o={},c=[{value:"Continuous Analysis",id:"continuous-analysis",level:2},{value:"Compatibility with Other Gate Features",id:"compatibility-with-other-gate-features",level:2},{value:"Balanced Gates",id:"balanced-gates",level:3},{value:"CUPED/CURE",id:"cupedcure",level:3}];function h(e){const s={a:"a",annotation:"annotation",h2:"h2",h3:"h3",math:"math",mfrac:"mfrac",mi:"mi",mn:"mn",mo:"mo",mrow:"mrow",p:"p",semantics:"semantics",span:"span",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.h2,{id:"continuous-analysis",children:"Continuous Analysis"}),"\n",(0,t.jsx)(s.p,{children:"For gate rules that rollout with a pass percentage \u2264 50% and without any rollback, data collected at earlier stages and later stages in the rollout will be consolidated into one analysis. This allows for a more complete and thorough analysis."}),"\n",(0,t.jsx)(s.p,{children:"Valid continuous analysis rollouts include:"}),"\n",(0,t.jsx)(s.p,{children:"10% \u2192 20%"}),"\n",(0,t.jsx)(s.p,{children:"10% \u2192 20% \u2192 50%"}),"\n",(0,t.jsx)(s.p,{children:"Invalid continuous analysis rollouts include:"}),"\n",(0,t.jsx)(s.p,{children:"10% \u2192 5% (rollback)"}),"\n",(0,t.jsx)(s.p,{children:"10% \u2192 70% (exceeds 50%)"}),"\n",(0,t.jsx)(s.p,{children:"When a rollout is no longer valid for continuous analysis, the new rollout step is analyzed separately from previous steps."}),"\n",(0,t.jsx)(s.h2,{id:"compatibility-with-other-gate-features",children:"Compatibility with Other Gate Features"}),"\n",(0,t.jsx)(s.h3,{id:"balanced-gates",children:"Balanced Gates"}),"\n",(0,t.jsxs)(s.p,{children:["Gate rules that have multiple rollout stages are also ",(0,t.jsx)(s.a,{href:"https://docs.statsig.com/feature-flags/view-exposures#balanced-gates",children:"balanced"})," using downsampling."]}),"\n",(0,t.jsx)(s.p,{children:"In cases where pass percentage \u2264 50% we use the same hashing as the pass/fail and take an equal percentage of the other group."}),"\n",(0,t.jsxs)(s.p,{children:["When pass percentage > 50% we use an orthogonal random hashing to sample the larger group at a rate of ",(0,t.jsxs)(s.span,{className:"katex",children:[(0,t.jsx)(s.span,{className:"katex-mathml",children:(0,t.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,t.jsxs)(s.semantics,{children:[(0,t.jsx)(s.mrow,{children:(0,t.jsxs)(s.mfrac,{children:[(0,t.jsxs)(s.mrow,{children:[(0,t.jsx)(s.mn,{children:"1"}),(0,t.jsx)(s.mo,{children:"\u2212"}),(0,t.jsx)(s.mi,{children:"p"})]}),(0,t.jsx)(s.mi,{children:"p"})]})}),(0,t.jsx)(s.annotation,{encoding:"application/x-tex",children:"\\frac{1-p}{p}"})]})})}),(0,t.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,t.jsxs)(s.span,{className:"base",children:[(0,t.jsx)(s.span,{className:"strut",style:{height:"1.3783em",verticalAlign:"-0.4811em"}}),(0,t.jsxs)(s.span,{className:"mord",children:[(0,t.jsx)(s.span,{className:"mopen nulldelimiter"}),(0,t.jsx)(s.span,{className:"mfrac",children:(0,t.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(s.span,{className:"vlist-r",children:[(0,t.jsxs)(s.span,{className:"vlist",style:{height:"0.8972em"},children:[(0,t.jsxs)(s.span,{style:{top:"-2.655em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,t.jsx)(s.span,{className:"mord mtight",children:(0,t.jsx)(s.span,{className:"mord mathnormal mtight",children:"p"})})})]}),(0,t.jsxs)(s.span,{style:{top:"-3.23em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(s.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),(0,t.jsxs)(s.span,{style:{top:"-3.4461em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,t.jsxs)(s.span,{className:"mord mtight",children:[(0,t.jsx)(s.span,{className:"mord mtight",children:"1"}),(0,t.jsx)(s.span,{className:"mbin mtight",children:"\u2212"}),(0,t.jsx)(s.span,{className:"mord mathnormal mtight",children:"p"})]})})]})]}),(0,t.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,t.jsx)(s.span,{className:"vlist-r",children:(0,t.jsx)(s.span,{className:"vlist",style:{height:"0.4811em"},children:(0,t.jsx)(s.span,{})})})]})}),(0,t.jsx)(s.span,{className:"mclose nulldelimiter"})]})]})})]})," where p is the fraction of users in the larger group. In the case of a gradual rollout, this prevents bias based on enrollment time period."]}),"\n",(0,t.jsx)(s.h3,{id:"cupedcure",children:"CUPED/CURE"}),"\n",(0,t.jsx)(s.p,{children:"CUPED/CURE is available only when there have been no rollbacks AND when the rollout percentage has not exceeded 50% within a gate rule. Analysis is no longer continuous when there's a rollback or when 50% is exceeded, which means the pre-exposure data of a given unit is actually biased by earlier treatments."})]})}function d(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},28453:(e,s,a)=>{a.d(s,{R:()=>i,x:()=>r});var t=a(96540);const l={},n=t.createContext(l);function i(e){const s=t.useContext(n);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function r(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:i(e.components),t.createElement(n.Provider,{value:s},e.children)}}}]);