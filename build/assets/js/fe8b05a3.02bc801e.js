"use strict";(self.webpackChunkstatsig_docs=self.webpackChunkstatsig_docs||[]).push([[92755],{86560:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>g,frontMatter:()=>a,metadata:()=>r,toc:()=>l});var i=n(74848),s=n(28453);const a={sidebar_label:"Advanced Configurations",title:"Advanced Configurations",keywords:["owner:brock"],last_update:{date:new Date("2025-09-18T00:00:00.000Z")}},o=void 0,r={id:"guides/sidecar-experiments/advanced-configurations",title:"Advanced Configurations",description:"Single Page App Support",source:"@site/docs/guides/sidecar-experiments/advanced-configurations.mdx",sourceDirName:"guides/sidecar-experiments",slug:"/guides/sidecar-experiments/advanced-configurations",permalink:"/guides/sidecar-experiments/advanced-configurations",draft:!1,unlisted:!1,editUrl:"https://github.com/statsig-io/docs/edit/main/docs/guides/sidecar-experiments/advanced-configurations.mdx",tags:[],version:"current",lastUpdatedAt:17581536e5,frontMatter:{sidebar_label:"Advanced Configurations",title:"Advanced Configurations",keywords:["owner:brock"],last_update:{date:"2025-09-18T00:00:00.000Z"}},sidebar:"cloud",previous:{title:"Creating Experiments",permalink:"/guides/sidecar-experiments/creating-experiments"},next:{title:"Launching Experiments",permalink:"/guides/sidecar-experiments/publishing-experiments"}},c={},l=[{value:"Single Page App Support",id:"single-page-app-support",level:2},{value:"Advanced Targeting &amp; Segmentation",id:"advanced-targeting--segmentation",level:2},{value:"Accessing the Statsig js client",id:"accessing-the-statsig-js-client",level:2},{value:"Configuring Runtime Options",id:"configuring-runtime-options",level:2},{value:"Managing Consent",id:"managing-consent",level:2},{value:"Persisting stableID across subdomains",id:"persisting-stableid-across-subdomains",level:2}];function d(e){const t={a:"a",code:"code",em:"em",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h2,{id:"single-page-app-support",children:"Single Page App Support"}),"\n",(0,i.jsx)(t.p,{children:"Sidecar now officially supports integration within Single Page Apps.\nThis includes new Sidecar configuration tools and SDK methods that you can use to configure your own customer trigger points, giving you full flexibility to control when an experiment should run."}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Disable Auto Run"})," - When selected, Sidecar will not automatically attempt to run the test on page-load."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Custom activation"})," using ",(0,i.jsx)(t.code,{children:'StatsigSidecar.activateExperiment("<experiment_id>")'})," to activate an experiment manually."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Prerun Script"})," - This allows you to define a custom script that will run only once per experiment if the url filter passes. You should use this to bind any listeners or evaluate any custom logic you need to control when to trigger the experiment using ",(0,i.jsx)(t.code,{children:"activateExperiment"}),"."]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Spa configuration",src:n(27250).A+"",width:"1718",height:"694"})}),"\n",(0,i.jsx)(t.h2,{id:"advanced-targeting--segmentation",children:"Advanced Targeting & Segmentation"}),"\n",(0,i.jsx)(t.p,{children:"This approach allows you to set User Identity and Attributes for Sidecar, enabling you to perform more advanced targeting and results segmentation."}),"\n",(0,i.jsxs)(t.p,{children:["By default, Sidecar & Autocapture use ",(0,i.jsx)(t.code,{children:"stableID"})," (an auto-generated device-level guid that gets stored in the user's localStorage) for tracking purposes. If you wish to enrich autocapture events with known user identities and attributes, you can define the following object ",(0,i.jsx)(t.em,{children:"prior"})," to autocapture/sidecar being loaded."]}),"\n",(0,i.jsxs)(t.p,{children:["Watch this ",(0,i.jsx)(t.a,{href:"https://tinyurl.com/sidecar-targeting",children:"video tutorial"})," on how to configure more advanced targeting for your Sidecar experiments."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",children:'window.statsigUser = {\n  userID: "<USER ID>",\n  custom: { // optional attributes object\n     isLoggedIn: false \n  }\n}\n'})}),"\n",(0,i.jsx)(t.h2,{id:"accessing-the-statsig-js-client",children:"Accessing the Statsig js client"}),"\n",(0,i.jsxs)(t.p,{children:["For accessing the underlying Statsig js client instance, you can call ",(0,i.jsx)(t.code,{children:"StatsigSidecar.getStatsigInstance()"}),"."]}),"\n",(0,i.jsx)(t.h2,{id:"configuring-runtime-options",children:"Configuring Runtime Options"}),"\n",(0,i.jsxs)(t.p,{children:["This allows you to handle Consent Management, GDPR compliance and more. All of the ",(0,i.jsx)(t.a,{href:"https://docs.statsig.com/client/javascript-sdk/#statsig-options",children:"StatsigOptions"})," provided by the JavaScript SDK are also fully-supported with Sidecar. These can be passed to Sidecar via:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",children:"window.statsigOptions = {\n  // example of disabling logging for \n  loggingEnabled: 'disabled'\n}\n"})}),"\n",(0,i.jsx)(t.h2,{id:"managing-consent",children:"Managing Consent"}),"\n",(0,i.jsx)(t.p,{children:"Prior to Sidecar script tag, configure these runtime options to disable browser storage and tracking:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",children:'window.statsigOptions = {\n  loggingEnabled: "disabled",\n  disableStorage: true\n}\n'})}),"\n",(0,i.jsx)(t.p,{children:"Later on, after the user gives consent, re-enable storage and tracking:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",children:'__STATSIG__.instance().updateRuntimeOptions({loggingEnabled: "browser-only", disableStorage: false});\n'})}),"\n",(0,i.jsx)(t.h2,{id:"persisting-stableid-across-subdomains",children:"Persisting stableID across subdomains"}),"\n",(0,i.jsxs)(t.p,{children:["Statsig uses ",(0,i.jsx)(t.code,{children:"localStorage"})," as the preferred mechanism for storing the user's stableID. Localstorage keys do not persist across any origin boundaries including across subdomains. For example, a user visiting ",(0,i.jsx)(t.code,{children:"https://example.com"}),", ",(0,i.jsx)(t.code,{children:"https://show.example.com"})," and ",(0,i.jsx)(t.code,{children:"https://account.example.com"})," would be issued three distinct stableIDs."]}),"\n",(0,i.jsx)(t.p,{children:"If you are assigning a user to a test on one subdomain, and tracking behavior for metrics purposes on a different subdomain, you'll need to have this solution in place to ensure Statsig can properly attribute cross-origin behavior to the Test Group assignment that took place on the initial experiment domain."}),"\n",(0,i.jsx)(t.p,{children:"To install, simply paste the following in your HEAD section."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-html",children:'\x3c!-- cross domain id script --\x3e\n<script>!function(){let t="STATSIG_LOCAL_STORAGE_STABLE_ID";function e(){if(crypto&&crypto.randomUUID)return crypto.randomUUID();let t=()=>Math.floor(65536*Math.random()).toString(16).padStart(4,"0");return`${t()}${t()}-${t()}-4${t().substring(1)}-${t()}-${t()}${t()}${t()}`}let i=null,n=localStorage.getItem(t)||null;if(document.cookie.match(/statsiguuid=([\\w-]+);?/)&&([,i]=document.cookie.match(/statsiguuid=([\\w-]+);?/)),i&&n&&i===n);else if(i&&n&&i!==n)localStorage.setItem(t,i);else if(i&&!n)localStorage.setItem(t,i);else{let o=e();localStorage.setItem(t,o),function t(i){let n=new Date;n.setMonth(n.getMonth()+12);let o=window.location.host.split(".");o.length>2&&o.shift();let s=`.${o.join(".")}`;document.cookie=`statsiguuid=${i||e()};Expires=${n};Domain=${s};Path=/`}(o)}}();<\/script>\n\n\x3c!-- Manually attach stableID from local storage --\x3e\n<script>\nif(localStorage.getItem(\'STATSIG_LOCAL_STORAGE_STABLE_ID\')) {\n  window.statsigUser = {\n    customIDs: {stableID: localStorage.getItem(\'STATSIG_LOCAL_STORAGE_STABLE_ID\')}\n  }\n}\n<\/script>\n\n\x3c!-- sidecar script below --\x3e\n<script src="https://cdn.jsdelivr.net/npm/statsig-sidecar/dist/index.min.js?apikey=[client-YOUR-STATSIG-CLIENT-KEY]"><\/script>\n'})})]})}function g(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},27250:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/sidecar-spa-7f4f1bbe7e45c328c8ab3897c434f195.png"},28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>r});var i=n(96540);const s={},a=i.createContext(s);function o(e){const t=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(a.Provider,{value:t},e.children)}}}]);