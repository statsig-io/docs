"use strict";(self.webpackChunkstatsig_docs=self.webpackChunkstatsig_docs||[]).push([[61686],{75427:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>l,frontMatter:()=>o,metadata:()=>r,toc:()=>u});var s=n(74848),i=n(28453);const o={title:"S3",keywords:["owner:tim"],last_update:{date:new Date("2025-09-18T00:00:00.000Z")}},a=void 0,r={id:"data-warehouse-ingestion/s3",title:"S3",description:"Overview",source:"@site/docs/data-warehouse-ingestion/s3.mdx",sourceDirName:"data-warehouse-ingestion",slug:"/data-warehouse-ingestion/s3",permalink:"/data-warehouse-ingestion/s3",draft:!1,unlisted:!1,editUrl:"https://github.com/statsig-io/docs/edit/main/docs/data-warehouse-ingestion/s3.mdx",tags:[],version:"current",lastUpdatedAt:17581536e5,frontMatter:{title:"S3",keywords:["owner:tim"],last_update:{date:"2025-09-18T00:00:00.000Z"}},sidebar:"cloud",previous:{title:"Synapse",permalink:"/data-warehouse-ingestion/synapse"},next:{title:"Athena",permalink:"/data-warehouse-ingestion/athena"}},c={},u=[{value:"Overview",id:"overview",level:2},{value:"S3 bucket Format",id:"s3-bucket-format",level:3}];function d(e){const t={code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(t.p,{children:"To set up connection with S3, Statsig needs the following"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Region"}),"\n",(0,s.jsx)(t.li,{children:"Bucket Name"}),"\n",(0,s.jsx)(t.li,{children:"Granting Bucket Read Access Permissions to a Statsig-owned Service Account"}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"You can find the regions and bucket name of your S3 bucket in your AWS console within your S3 Buckets overview page, as shown in the image below. (Open image in new tab for a bigger image)"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://user-images.githubusercontent.com/87334575/228698847-864e4607-95e4-44c0-bc0e-e15abb5b43fd.png",alt:"AWS S3 console showing bucket regions and names"})}),"\n",(0,s.jsx)(t.p,{children:"You will be given a Statsig owned IAM user that you'll need to grant S3 bucket permissions to."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://user-images.githubusercontent.com/87334575/228700279-0e4f265e-32d8-4b8e-b516-496479952870.png",alt:"Statsig IAM user configuration interface"})}),"\n",(0,s.jsx)(t.p,{children:"The user will need read access permissions to your bucket, you can use the below bucket policy for your convenience, replacing STATSIG_IAM_USER and YOUR_S3_BUCKET."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:'{\n    "Version": "2012-10-17",\n    "Statement": [\n        {\n            "Effect": "Allow",\n            "Principal": {\n                "AWS": "arn:aws:iam::999689269917:user/STATSIG_IAM_USER"\n            },\n            "Action": [\n                "s3:ListBucket",\n                "s3:GetBucketLocation"\n            ],\n            "Resource": "arn:aws:s3:::YOUR_S3_BUCKET"\n        },\n        {\n            "Effect": "Allow",\n            "Principal": {\n                "AWS": "arn:aws:iam::999689269917:user/STATSIG_IAM_USER"\n            },\n            "Action": "s3:GetObject",\n            "Resource": "arn:aws:s3:::YOUR_S3_BUCKET/*"\n        }\n    ]\n}\n'})}),"\n",(0,s.jsx)(t.h3,{id:"s3-bucket-format",children:"S3 bucket Format"}),"\n",(0,s.jsx)(t.p,{children:"For each dataset you're ingesting through S3, we expect a top level folder in the S3 bucket matching the name of the dataset (e.g metrics, events), with folders denoting each day of data. In each folder we expect parquet files with data corresponding to that day's import. See the following screenshot for a example folder structure."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://user-images.githubusercontent.com/87334575/228701015-56804b30-522a-4293-b48e-4da3c02b9b6d.png",alt:"S3 bucket folder structure example"})})]})}function l(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>r});var s=n(96540);const i={},o=s.createContext(i);function a(e){const t=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(o.Provider,{value:t},e.children)}}}]);