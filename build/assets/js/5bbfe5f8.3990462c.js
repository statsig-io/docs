"use strict";(self.webpackChunkstatsig_docs=self.webpackChunkstatsig_docs||[]).push([[84966],{15870:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>a,contentTitle:()=>d,default:()=>o,frontMatter:()=>r,metadata:()=>l,toc:()=>c});var s=i(74848),n=i(28453);const r={title:"Data Mapping",keywords:["owner:tim"],last_update:{date:new Date("2025-09-18T00:00:00.000Z")}},d=void 0,l={id:"data-warehouse-ingestion/data_mapping",title:"Data Mapping",description:"Overview",source:"@site/docs/data-warehouse-ingestion/data_mapping.mdx",sourceDirName:"data-warehouse-ingestion",slug:"/data-warehouse-ingestion/data_mapping",permalink:"/data-warehouse-ingestion/data_mapping",draft:!1,unlisted:!1,editUrl:"https://github.com/statsig-io/docs/edit/main/docs/data-warehouse-ingestion/data_mapping.mdx",tags:[],version:"current",lastUpdatedAt:17581536e5,frontMatter:{title:"Data Mapping",keywords:["owner:tim"],last_update:{date:"2025-09-18T00:00:00.000Z"}},sidebar:"cloud",previous:{title:"FAQ & Troubleshooting",permalink:"/data-warehouse-ingestion/faq"},next:{title:"Google Tag Manager (GTM)",permalink:"/integrations/gtm"}},a={},c=[{value:"Overview",id:"overview",level:2},{value:"Custom Events",id:"custom-events",level:3},{value:"Required",id:"required",level:4},{value:"Optional",id:"optional",level:4},{value:"Precomputed Metrics",id:"precomputed-metrics",level:3},{value:"Required",id:"required-1",level:4},{value:"Exposure Events",id:"exposure-events",level:3},{value:"Required",id:"required-2",level:4},{value:"Optional",id:"optional-1",level:4}];function h(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",ol:"ol",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,n.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(t.p,{children:"Statsig requires certain data schema in order for proper processing. We support 3 different types of datasets to be ingested into our platform:"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:"Custom Events"}),"\n",(0,s.jsx)(t.li,{children:"Precomputed Metrics"}),"\n",(0,s.jsx)(t.li,{children:"Exposure Events"}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"During setup, we will ask you to map columns in your data output to fields Statsig expects and run a small sample query to make sure that there aren't any basic issues with data types, the mapping, or the base query itself."}),"\n",(0,s.jsx)(t.p,{children:"Please note that we will cast fields into the appropriate type. For example, Statsig accepts String IDs, but it's okay to leave an ID field as an integer."}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h3,{id:"custom-events",children:"Custom Events"}),"\n",(0,s.jsx)(t.p,{children:"Events that are emitted by your application to measure the ongoing impact of your features and experiments."}),"\n",(0,s.jsx)(t.h4,{id:"required",children:"Required"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Column"}),(0,s.jsx)(t.th,{children:"Description"}),(0,s.jsx)(t.th,{children:"Format/Rules"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"timestamp"}),(0,s.jsx)(t.td,{children:"The unix time your event was logged at"}),(0,s.jsx)(t.td,{children:"BIGINT. please cast timestamps into epoch time in seconds"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"event_name"}),(0,s.jsx)(t.td,{children:"The name of the event"}),(0,s.jsx)(t.td,{children:"STRING/VARCHAR. Not null. Length < 128 characters"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"unit_id"}),(0,s.jsx)(t.td,{children:"Unique unit identifier"}),(0,s.jsx)(t.td,{children:"STRING/VARCHAR. User ID, Stable ID, etc. The same event row can have multiple IDs"})]})]})]}),"\n",(0,s.jsx)(t.h4,{id:"optional",children:"Optional"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Column"}),(0,s.jsx)(t.th,{children:"Description"}),(0,s.jsx)(t.th,{children:"Rules"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"event_value"}),(0,s.jsx)(t.td,{children:"The value of the event"}),(0,s.jsx)(t.td,{children:"STRING/VARCHAR. Length < 128 characters. Statsig will detect numeric values"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"event_metadata"}),(0,s.jsx)(t.td,{children:"Metadata columns about the event"}),(0,s.jsxs)(t.td,{children:["(MANY) STRING",":STRING",". Statsig will generate a metadata json field from however many metadata columns you provide"]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"metadata_json"}),(0,s.jsx)(t.td,{children:"Metadata json about the event"}),(0,s.jsx)(t.td,{children:"JSON STRING. Statsig will unpack this json 1 level deep. Nested values will be stored as strings"})]})]})]}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(t.p,{children:"An example dataset for events might look like this:"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"unit_id"}),(0,s.jsx)(t.th,{children:"visit_id"}),(0,s.jsx)(t.th,{children:"event"}),(0,s.jsx)(t.th,{children:"timestamp"}),(0,s.jsx)(t.th,{children:"value"}),(0,s.jsx)(t.th,{children:"metadata_blob"}),(0,s.jsx)(t.th,{children:"user_type"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"331444"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{children:"click"}),(0,s.jsx)(t.td,{children:"1676484875"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:'{"click_target": "exit_details_button"}'})}),(0,s.jsx)(t.td,{children:"power_user"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"331444"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{children:"click"}),(0,s.jsx)(t.td,{children:"1676484860"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:'{"click_target": "open_details_button"}'})}),(0,s.jsx)(t.td,{children:"power_user"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"265113"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{children:"click"}),(0,s.jsx)(t.td,{children:"1676484333"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:'{"click_target": "button", "button_color": "green"}'})}),(0,s.jsx)(t.td,{children:"churn_risk_user"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"445332"}),(0,s.jsx)(t.td,{children:"aeeer43d"}),(0,s.jsx)(t.td,{children:"visit"}),(0,s.jsx)(t.td,{children:"1676483821"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:'{"page": "landing_page"}'})}),(0,s.jsx)(t.td,{children:"new_user"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"224448"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{children:"checkout"}),(0,s.jsx)(t.td,{children:"1676482222"}),(0,s.jsx)(t.td,{children:"33.22"}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:'{"product_id": "11eefj", "product_category": "clothing"}'})}),(0,s.jsx)(t.td,{children:"power_user"})]})]})]}),"\n",(0,s.jsx)(t.p,{children:"Note that:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"One user can send multiple of the same event, with or without any changes in metadata. Statsig will aggregate these together."}),"\n",(0,s.jsx)(t.li,{children:'You can send metadata in both of a json-formatted (only one-level deep) string, and/or pull in fields from columns. You can use metadata and values to generate custom metrics in the console, like sum(value) where "product_category"="clothing".'}),"\n",(0,s.jsx)(t.li,{children:"You can send multiple IDs on a single event. For example, the visit above would could for both user and visit level metrics/experiments. During the mapping flow you tell us which unit types your different IDs correspond to in statsig."}),"\n"]}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(t.h3,{id:"precomputed-metrics",children:"Precomputed Metrics"}),"\n",(0,s.jsx)(t.p,{children:"Precomputed metrics are a powerful way to leverage statsig for experiment results. Use these to send complex metrics and metrics that require delays due to attribution windows or long baking periods."}),"\n",(0,s.jsx)(t.p,{children:"Precomputed metrics in statsig are expected to be calculated at a user-day granularity."}),"\n",(0,s.jsx)(t.h4,{id:"required-1",children:"Required"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Column"}),(0,s.jsx)(t.th,{children:"Description"}),(0,s.jsx)(t.th,{children:"Format/Rules"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"unit_id"}),(0,s.jsx)(t.td,{children:"The unique user identifier this metric is for. This might not necessarily be a user_id - it could be a custom_id of some kind"}),(0,s.jsx)(t.td,{children:"STRING"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"id_type"}),(0,s.jsx)(t.td,{children:"The id_type the unit_id represents."}),(0,s.jsx)(t.td,{children:"STRING. A valid ID type from your project"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"date"}),(0,s.jsx)(t.td,{children:"Date of the daily metric"}),(0,s.jsx)(t.td,{children:"DATE or ISOFORMATTED STRING. The date of the metric value for the unit_id provided"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"metric_name"}),(0,s.jsx)(t.td,{children:"The name of the metric"}),(0,s.jsx)(t.td,{children:"STRING (Not null). Length < 128 characters"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"metric_value"}),(0,s.jsx)(t.td,{children:"A numeric value for the metric"}),(0,s.jsxs)(t.td,{children:["DOUBLE/NUMERIC. Metric value ",(0,s.jsx)("br",{}),(0,s.jsx)("b",{children:"OR"}),(0,s.jsx)("br",{})," Both of numerator/denominator need to be provided for Statsig to process the metric."]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"numerator"}),(0,s.jsx)(t.td,{children:"Numerator for metric calculation"}),(0,s.jsx)(t.td,{children:"DOUBLE/NUMERIC. If present along with a denominator in any record, the metric will be treated as ratio and only calculated for users with non-null denominators."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"denominator"}),(0,s.jsx)(t.td,{children:"Denominator for metric calculation"}),(0,s.jsx)(t.td,{children:"DOUBLE/NUMERIC. If present along with a numerator in any record, the metric will be treated as ratio and only calculated for users with non-null denominators."})]})]})]}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(t.p,{children:"An example dataset for metrics might look like this:"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"unit_id"}),(0,s.jsx)(t.th,{children:"unit_type"}),(0,s.jsx)(t.th,{children:"date"}),(0,s.jsx)(t.th,{children:"metric_name"}),(0,s.jsx)(t.th,{children:"metric_value"}),(0,s.jsx)(t.th,{children:"numerator"}),(0,s.jsx)(t.th,{children:"denominator"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"331444"}),(0,s.jsx)(t.td,{children:"user_id"}),(0,s.jsx)(t.td,{children:"2023-02-13"}),(0,s.jsx)(t.td,{children:"clicks"}),(0,s.jsx)(t.td,{children:"2"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"aeeer43d"}),(0,s.jsx)(t.td,{children:"visit_id"}),(0,s.jsx)(t.td,{children:"2023-02-13"}),(0,s.jsx)(t.td,{children:"visits"}),(0,s.jsx)(t.td,{children:"1"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"224448"}),(0,s.jsx)(t.td,{children:"user_id"}),(0,s.jsx)(t.td,{children:"2023-02-13"}),(0,s.jsx)(t.td,{children:"checkout_rate"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{children:"2"}),(0,s.jsx)(t.td,{children:"15"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"224448"}),(0,s.jsx)(t.td,{children:"user_id"}),(0,s.jsx)(t.td,{children:"2023-02-13"}),(0,s.jsx)(t.td,{children:"clothing_checkout_value"}),(0,s.jsx)(t.td,{children:"33.22"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{})]})]})]}),"\n",(0,s.jsx)(t.p,{children:"Note that:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"In this dataset, unit types are in different rows from each other"}),"\n",(0,s.jsx)(t.li,{children:"Metrics can either have a value or a numerator/denominator pair. We will calculate any metric with numerator/denominator pair as a ratio metric. Ratio takes priority over value; if you provide all 3 fields, we will assume it is a ratio metric."}),"\n",(0,s.jsx)(t.li,{children:"For users with null values, we will infer 0 for metric_value, and exclude null value users for ratio metrics."}),"\n"]}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(t.h3,{id:"exposure-events",children:"Exposure Events"}),"\n",(0,s.jsx)(t.admonition,{type:"note",children:(0,s.jsxs)(t.p,{children:["Exposure event import is deprecated. If this is an important use case, see ",(0,s.jsx)(t.a,{href:"https://www.statsig.com/blog/announcing-statsig-warehouse-native",children:"Statsig Warehouse Native"}),", available to Enterprise Customers"]})}),"\n",(0,s.jsx)(t.p,{children:"Exposure events are generated by your assignment tool, when it assigns your users to a certain variant of an experiment (e.g., show ad vs. hide ad)."}),"\n",(0,s.jsx)(t.h4,{id:"required-2",children:"Required"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Column"}),(0,s.jsx)(t.th,{children:"Description"}),(0,s.jsx)(t.th,{children:"Format/Rules"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"timestamp"}),(0,s.jsx)(t.td,{children:"The unix time your event was logged at"}),(0,s.jsx)(t.td,{children:"BIGINT. please cast timestamps into timezoneless unix time"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"experiment"}),(0,s.jsx)(t.td,{children:"Your experiment identifier"}),(0,s.jsx)(t.td,{children:"STRING/VARCHAR. Not null. Length < 128 characters"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"group_id"}),(0,s.jsx)(t.td,{children:"Unique identifier for the experiment groups"}),(0,s.jsx)(t.td,{children:"STRING/VARCHAR. Not null."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"unit_id"}),(0,s.jsx)(t.td,{children:"Unique user identifier"}),(0,s.jsx)(t.td,{children:"STRING/VARCHAR. User ID, Stable ID, etc. The same event row can have multiple IDs"})]})]})]}),"\n",(0,s.jsx)(t.h4,{id:"optional-1",children:"Optional"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Column"}),(0,s.jsx)(t.th,{children:"Description"}),(0,s.jsx)(t.th,{children:"Rules"})]})}),(0,s.jsx)(t.tbody,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"metadata_json"}),(0,s.jsx)(t.td,{children:"Metadata json about the event"}),(0,s.jsx)(t.td,{children:"JSON STRING. Statsig will unpack this json 1 level deep. Nested values will be stored as strings"})]})})]})]})}function o(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},28453:(e,t,i)=>{i.d(t,{R:()=>d,x:()=>l});var s=i(96540);const n={},r=s.createContext(n);function d(e){const t=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:d(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);