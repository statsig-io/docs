"use strict";(self.webpackChunkstatsig_docs=self.webpackChunkstatsig_docs||[]).push([[66269],{17907:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>o,contentTitle:()=>r,default:()=>d,frontMatter:()=>a,metadata:()=>l,toc:()=>c});var n=s(74848),i=s(28453);const a={title:"Power Analysis",sidebar_label:"Power Analysis",slug:"/experiments-plus/power-analysis",keywords:["owner:vm"],last_update:{date:new Date("2025-09-18T00:00:00.000Z")}},r=void 0,l={id:"experiments-plus/power-analysis",title:"Power Analysis",description:"What is Power Analysis?",source:"@site/docs/experiments-plus/power-analysis.md",sourceDirName:"experiments-plus",slug:"/experiments-plus/power-analysis",permalink:"/experiments-plus/power-analysis",draft:!1,unlisted:!1,editUrl:"https://github.com/statsig-io/docs/edit/main/docs/experiments-plus/power-analysis.md",tags:[],version:"current",lastUpdatedAt:17581536e5,frontMatter:{title:"Power Analysis",sidebar_label:"Power Analysis",slug:"/experiments-plus/power-analysis",keywords:["owner:vm"],last_update:{date:"2025-09-18T00:00:00.000Z"}},sidebar:"cloud",previous:{title:"Advanced Usage",permalink:"/using-bandits"},next:{title:"Layers",permalink:"/layers"}},o={},c=[{value:"What is Power Analysis?",id:"what-is-power-analysis",level:3},{value:"Using the Tool",id:"using-the-tool",level:2},{value:"Population Types",id:"population-types",level:2},{value:"Example",id:"example",level:3},{value:"Inputs by Population Type",id:"inputs-by-population-type",level:3},{value:"Analysis Types",id:"analysis-types",level:2},{value:"Fixed Allocation Analysis",id:"fixed-allocation-analysis",level:3},{value:"Fixed MDE Analysis",id:"fixed-mde-analysis",level:3},{value:"Advanced Options",id:"advanced-options",level:2},{value:"Calculation Details",id:"calculation-details",level:2}];function h(e){const t={a:"a",admonition:"admonition",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h3,{id:"what-is-power-analysis",children:"What is Power Analysis?"}),"\n",(0,n.jsx)(t.p,{children:"The Statsig Power Analysis Calculator helps pre-determine the experiment parameters needed to reach a statistically significant result. Often, the variable you're optimizing for is duration - how long your experiment runs - but Statsig's power calculator is flexible to other variables. Using the known mean and variance of a metric, and the observed traffic volume, the Power Analysis Calculator estimates the relationship between three variables:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Minimum detectable effect (MDE)"}),": The smallest change in the metric that the experiment can reliably detect. For example: An MDE of 1% with Power set to 80% means that if there's a true effect of 1% on our metric, we expect the experiment will have an 80% chance to produce a statistically significant result. If the magnitude of the true effect is smaller than 1%, it will be less likely to produce a statistically significant result (though it can still occur)."]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Number of days or exposures"}),": How long the experiment is active and the number of users enrolled in it.  Longer running experiments typically have more observations, leading to tighter confidence intervals and smaller MDE.  We use historical data to estimate the number of new users that would be eligible for the experiment each day."]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Allocation"}),": The percentage of traffic that participates in the experiment.  Larger allocation leads to smaller MDE, so it's often desirable to allocate as many users as possible to get faster or more sensitive results.  When there's a risk of negative impact or a need for mutually exclusive experiments however, it's useful to know the smallest allocation that can achieve the desired MDE."]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"Many experimentation practitioners use the Power Analysis calculator during setup of every experiment they run."}),"\n",(0,n.jsx)(t.h2,{id:"using-the-tool",children:"Using the Tool"}),"\n",(0,n.jsx)(t.p,{children:"Power Analysis Calculator can be accessed from the tools menu. It's also linked on the experiment setup page, underneath the Experiment Duration field."}),"\n",(0,n.jsx)("img",{width:"506",alt:"Power Analysis Navigation",src:"https://github.com/user-attachments/assets/976b1ef3-b192-4af7-a63e-43e9256d435a"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:"Select the population used to determine the metric mean and variance and to estimate the number of exposures over time."}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Everyone"}),": Analysis is based on the entire user base."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Targeting gate"}),": Analysis is scoped to the set of users who pass the selected feature gate, which must have been active for at least 7 days.  Choose this option when you plan to use a targeting gate for the experiment."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Past experiment"}),": Analysis is based on data collected from in a previous experiment.  Use this option when the new experiment will impact a similar user base or part of the product as the previous one."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Qualifying event"}),": Analysis is scoped to the set of users who logged the event specified."]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:"Select a metric of interest (or multiple metrics for a targeting gate analysis)"}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:["Click on ",(0,n.jsx)(t.strong,{children:"Run Power Analysis"})," to calculate results"]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)("img",{width:"860",alt:"Screenshot 2025-03-12 at 7 59 22\u202fAM",src:"https://github.com/user-attachments/assets/a74f2b80-cdab-4804-a8cc-ebaa2530ed5d"}),"\n",(0,n.jsx)(t.p,{children:'Your past power analysis calculations will be available to view in the "Past Analyses" tab.'}),"\n",(0,n.jsx)("img",{width:"1200",alt:"Screenshot 2025-03-12 at 8 04 31\u202fAM",src:"https://github.com/user-attachments/assets/82a91aa4-dd3a-4d09-aca4-2de8b43f49e8"}),"\n",(0,n.jsx)(t.p,{children:"If you want to attach an existing power analysis to an experiment, that option is available via the dropdown menu on an existing power analysis."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Power analysis attachment interface",src:s(32998).A+"",width:"1567",height:"989"})}),"\n",(0,n.jsx)(t.h2,{id:"population-types",children:"Population Types"}),"\n",(0,n.jsx)(t.p,{children:"The population selected directly impacts the inputs of the analysis (mean, variance, number of users).  To obtain reliable power analysis estimates, the metric values of the selected population should roughly match those of the users you'll be targeting in the experiment."}),"\n",(0,n.jsx)(t.h3,{id:"example",children:"Example"}),"\n",(0,n.jsxs)(t.p,{children:["Say we want to test a change in the checkout flow and we want to know our expected MDE for total_purchases.  Let's assume that only ~10% of our daily users reach the checkout page.  If we use the ",(0,n.jsx)(t.em,{children:"Everyone"})," population for our analysis, we're likely to:"]}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Overestimate the number of users that the experiment will get."}),"\n",(0,n.jsx)(t.li,{children:"Underestimate the mean value of the total_purchases metric.  The 90% of user that don't reach the checkout page have a value of zero, but in practice they won't be in our experiment and won't contribute to the metric."}),"\n",(0,n.jsx)(t.li,{children:"Incorrectly estimate the variance in the total_purchases metric.  The distribution of metric values is different if we include the 90% of users that have 0 purchases because they never reached the checkout page."}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"Thus, in cases when the experiment only includes a biased subset of users, it's possible the MDE and duration obtained by the power analysis won't be a good estimate."}),"\n",(0,n.jsx)(t.p,{children:"One way to address this is to use data from a past experiment to estimate the power of a new, similar experiment (coming soon!).  In our example, if we had a prior experiment that was also targeting the checkout page, we could use it to get better estimates of traffic volumes and metrics for this part of the product."}),"\n",(0,n.jsx)(t.h3,{id:"inputs-by-population-type",children:"Inputs by Population Type"}),"\n",(0,n.jsx)(t.p,{children:"This is how the various inputs for the power analysis are obtained from the different population types:"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Population"}),(0,n.jsx)(t.th,{children:"Mean and Variance Calculation"}),(0,n.jsx)(t.th,{children:"Total Exposures by Week Estimate"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Everyone"}),(0,n.jsx)(t.td,{children:"Mean and variance across all users, estimated for 1, 2, 3, and 4 week rollups"}),(0,n.jsx)(t.td,{children:"Total count of users seen in the past 1, 2, 3, and 4 weeks"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Targeting Gate"}),(0,n.jsx)(t.td,{children:"Mean and variance for users that pass the targeting gate, computed for 1, 2, 3, 4 week rollups"}),(0,n.jsx)(t.td,{children:"Total users that passed the targeting gate after 1, 2, 3, 4 weeks"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Past Experiment"}),(0,n.jsx)(t.td,{children:"Cumulative mean and variance for the control group at 1, 2, 3, and 4 weeks"}),(0,n.jsx)(t.td,{children:"Total experiment exposures after 1, 2, 3, and 4 weeks, adjusted according to the past experiment's allocation and the desired allocation for the new experiment."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Qualifying Event"}),(0,n.jsx)(t.td,{children:"Mean and variance for users who logged a specified event, computed for 1, 2, 3, 4 week rollups"}),(0,n.jsx)(t.td,{children:"Total users who logged a specified event after 1, 2, 3, 4 weeks"})]})]})]}),"\n",(0,n.jsx)(t.h2,{id:"analysis-types",children:"Analysis Types"}),"\n",(0,n.jsx)(t.p,{children:'When looking at the results, you can modify certain inputs like "# of Groups", "Control Group %", and Analysis Types to update your power analysis results based on your updated inputs.'}),"\n",(0,n.jsx)("img",{width:"1200",alt:"Screenshot 2025-03-12 at 8 07 59\u202fAM",src:"https://github.com/user-attachments/assets/110ee88a-6bf7-4be8-b419-1626ee562fe5"}),"\n",(0,n.jsx)(t.h3,{id:"fixed-allocation-analysis",children:"Fixed Allocation Analysis"}),"\n",(0,n.jsx)(t.p,{children:"If you already know the available allocation, fixed allocation allows you to understand how the length of the experiment impacts the MDE. The example below shows how the MDE for a page load metric shrinks over time in an experiment with 100% allocation.  After 1 week we expect 5200 users per group and an MDE of 21.6%, by week 4 the number of users per group should increase to ~48k and the MDE is reduced to 7%."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://github.com/statsig-io/docs/assets/90343952/c3b5e22c-951e-4ef1-84a9-0b935a2e18e8",alt:"Fixed allocation analysis results chart"})}),"\n",(0,n.jsx)(t.h3,{id:"fixed-mde-analysis",children:"Fixed MDE Analysis"}),"\n",(0,n.jsx)(t.p,{children:"If you already know the effect size you want to measure, fixed MDE analysis allows you to understand the allocation and duration needed for desired MDE. Enter the desired MDE as a percentage of the current metric value.  For example: If a website currently gets 1,000 page loads per day, an MDE of 10% means we can detect a change of 100 or more page loads per day."}),"\n",(0,n.jsx)(t.p,{children:"The results show the minimum number of weeks needed to reach this MDE for different allocation percentages.  In the example below, the experiment should run for at least 2 weeks with 65% allocation or 4 weeks with 50% allocation.  There's no way achieve the desired MDE in 1 week, as this would require more than 100% allocation (more users than we expect to see in one week)."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://github.com/statsig-io/docs/assets/90343952/494a847a-89a0-4487-86e5-a4d453e04fb1",alt:"Fixed MDE analysis results table"})}),"\n",(0,n.jsx)(t.h2,{id:"advanced-options",children:"Advanced Options"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://user-images.githubusercontent.com/90343952/145122364-02af83d7-ea3d-4b24-8a10-506c1f227f8b.png",alt:"Advanced power analysis options interface"})}),"\n",(0,n.jsx)(t.p,{children:"Advanced settings to customize the analysis:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Number of Experiment Groups"}),": The total number of groups in the experiment, including control."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Control Group %"}),": What percent of users will be in the control group, e.g. 50% if half of all users will be control."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Fixed Allocation or Fixed MDE Analysis"}),": Different types of analyses you want to run. See ",(0,n.jsx)(t.a,{href:"https://docs.statsig.com/experiments-plus/power-analysis/#analysis-types",children:"here"})," for more details."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"One-sided or Two-sided test"}),": Toggle this setting to select the type of z-test to use for the analysis."]}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.strong,{children:"Significant Level (\u03b1)"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.strong,{children:"Power (1-\u03b2)"})}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Bonferroni Correction Per Variant"}),": Whether to include \u03b1 correction for multiple tests in power analysis."]}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"calculation-details",children:"Calculation Details"}),"\n",(0,n.jsxs)(t.p,{children:["The relative percentage MDE for a given metric ",(0,n.jsx)(t.em,{children:"X"})," is computed using the following equation:"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://user-images.githubusercontent.com/90343952/220699401-79cfc732-e7c8-431a-8a3e-72f1d83e1339.png",alt:"MDE calculation formula"})}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.em,{children:"X-bar"})," is the mean metric value across all users"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.em,{children:"var(X)"})," is the population variance of the metric"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsxs)(t.em,{children:["N",(0,n.jsx)("sub",{children:"test"})]})," and ",(0,n.jsxs)(t.em,{children:["N",(0,n.jsx)("sub",{children:"control"})]})," are the estimated number of users in the test and control group. These are based on historical active user data along with experiment allocation and group size."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsxs)(t.em,{children:["Z",(0,n.jsx)("sub",{children:"1-\u03b2"})]})," is the standard Z-score for the selected power.  Typically ",(0,n.jsx)(t.em,{children:"1-\u03b2 = 0.8"})," and ",(0,n.jsxs)(t.em,{children:["Z",(0,n.jsx)("sub",{children:"1-\u03b2"})," = 0.84"]})]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsxs)(t.em,{children:["Z",(0,n.jsx)("sub",{children:"1-\u03b1/2"})]})," is the standard Z-score for the selected significance level in a 2-sided test.  Typically ",(0,n.jsx)(t.em,{children:"\u03b1 = 0.05"})," and ",(0,n.jsxs)(t.em,{children:["Z",(0,n.jsx)("sub",{children:"1-\u03b1/2"})," = 1.96"]})]}),"\n"]}),"\n",(0,n.jsx)(t.admonition,{type:"note",children:(0,n.jsx)(t.p,{children:"This calculation relies on statistics computed across the entire user base of the project.  It does not account for the fact that experiments targeting only a subset of users may have different summary statistics for their key metrics.\nFor example, the metric mean and variance can be different in an experiment that targets only Android users or one that exposes users at the lower part of an acquisition funnel."})})]})}function d(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}},32998:(e,t,s)=>{s.d(t,{A:()=>n});const n=s.p+"assets/images/attach_power_analysis_to_experiment-1d8cef7e2b4668c50087026fed87a553.png"},28453:(e,t,s)=>{s.d(t,{R:()=>r,x:()=>l});var n=s(96540);const i={},a=n.createContext(i);function r(e){const t=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),n.createElement(a.Provider,{value:t},e.children)}}}]);