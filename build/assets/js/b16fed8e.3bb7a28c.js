"use strict";(self.webpackChunkstatsig_docs=self.webpackChunkstatsig_docs||[]).push([[70374],{39803:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>g,frontMatter:()=>n,metadata:()=>o,toc:()=>d});var i=s(74848),r=s(28453);const n={title:"Ingesting Metrics",sidebar_label:"Ingesting Metrics",slug:"/metrics/ingest",keywords:["owner:shubham"],last_update:{date:new Date("2025-09-18T00:00:00.000Z")}},a=void 0,o={id:"metrics/ingest",title:"Ingesting Metrics",description:"Ingesting Precomputed Metrics",source:"@site/docs/metrics/ingest.md",sourceDirName:"metrics",slug:"/metrics/ingest",permalink:"/metrics/ingest",draft:!1,unlisted:!1,editUrl:"https://github.com/statsig-io/docs/edit/main/docs/metrics/ingest.md",tags:[],version:"current",lastUpdatedAt:17581536e5,frontMatter:{title:"Ingesting Metrics",sidebar_label:"Ingesting Metrics",slug:"/metrics/ingest",keywords:["owner:shubham"],last_update:{date:"2025-09-18T00:00:00.000Z"}},sidebar:"cloud",previous:{title:"Event Property",permalink:"/metrics/metric-dimensions"},next:{title:"Pulse Metrics",permalink:"/metrics/pulse"}},c={},d=[{value:"Ingesting Precomputed Metrics",id:"ingesting-precomputed-metrics",level:2},{value:"Debugging Precomputed Metrics",id:"debugging-precomputed-metrics",level:2}];function l(e){const t={a:"a",code:"code",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(t.h2,{id:"ingesting-precomputed-metrics",children:["Ingesting Precomputed ",(0,i.jsx)(t.a,{href:"/metrics",children:"Metrics"})]}),"\n",(0,i.jsxs)(t.p,{children:["Statsig can ingest your precomputed product and business metrics using our data warehouse connector (Metrics Imports).  Integrations like ",(0,i.jsx)(t.a,{href:"/integrations/data-imports/snowflake",children:"Snowflake"}),", ",(0,i.jsx)(t.a,{href:"/integrations/data-imports/bigquery",children:"BigQuery"})," and ",(0,i.jsx)(t.a,{href:"/integrations/data-imports/redshift",children:"Redshift"})," are supported."]}),"\n",(0,i.jsxs)(t.p,{children:["Statsig does not automatically process these metrics until you mark them as ready, as it's possible you might land data out of order. Once you are finished loading data for a period, you mark the data as ready by hitting the ",(0,i.jsx)(t.code,{children:"mark_data_ready"})," API:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"curl --location --request POST \u2018https://api.statsig.com/v1/mark_data_ready\u2019 \\\n--header \u2018statsig-api-key: {your statsig server secret}\u2019 \\\n--header \u2018Content-Type: application/json\u2019 \\\n--data-raw \u2018{\n    \u201ctimestamp\u201d: 1647975283,\n    \u201ctype\u201d: \u201cmetrics\u201d\n}\n"})}),"\n",(0,i.jsx)(t.p,{children:"The timestamp provided should be:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"A unix timestamp"}),"\n",(0,i.jsx)(t.li,{children:"Represents the latest point in time for which all metrics before have been uploaded."}),"\n",(0,i.jsx)(t.li,{children:"Any future calls to this API with an earlier timestamp will be invalid."}),"\n",(0,i.jsx)(t.li,{children:"We don\u2019t guarantee correct behavior if metrics are provided with an earlier timestamp after this API is called."}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"Statsig processes metrics as a full day in the PST timezone; we will wait until a full day is marked as ready before processing that day."}),"\n",(0,i.jsx)(t.h2,{id:"debugging-precomputed-metrics",children:"Debugging Precomputed Metrics"}),"\n",(0,i.jsxs)(t.p,{children:["All precomputed metrics generate Metric Detail View pages. However, these Detail View pages take a few hours to generate post-ingestion. The fastest way to start seeing and debugging your precomputed metrics is via the ",(0,i.jsx)(t.strong,{children:"Metrics Logstream"})," on the ",(0,i.jsx)(t.strong,{children:"Metrics Catalog"})," tab within ",(0,i.jsx)(t.strong,{children:"Metrics"}),"."]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:"https://user-images.githubusercontent.com/101903926/178854882-730ef0d5-8eb2-4344-88ab-33111301e712.png",alt:"Screen Shot 2022-07-13 at 4 22 46 PM"})}),"\n",(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.strong,{children:"Metrics Logstream"})," will surface all ingested, precomputed metrics in real-time as they are ingested, enabling you to check metric name, value, ID, ID type, and ingestion date. Pro tip- we often find that customers get tripped up on ensuring their precomputed metrics have the right ID type, so pay extra attention to this column!"]}),"\n",(0,i.jsxs)(t.p,{children:["We've also exposed the ability to include test metrics, tagged with ",(0,i.jsx)(t.strong,{children:"isTest"}),", which you can toggle on/ off for debugging purposes in the ",(0,i.jsx)(t.strong,{children:"Metrics Logstream"}),". Note that this ",(0,i.jsx)(t.strong,{children:"isTest"})," flag is only available for precomputed metrics ingested via Statsig's APIs. Support for this flag via our integrations with Snowflake, BigQuery, and Redshift is coming soon."]}),"\n",(0,i.jsx)(t.p,{children:"To mark a batch of metrics as test metrics the isTest parameter needs to be set to true as part of the data for the request as seen below."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:'curl \\\n  \u201chttps://events.statsigapi.net/v1/log_custom_metric\u201d \\\n  --header \u201cstatsig-api-key: <YOUR-SDK-KEY>\u201d \\\n  --header \u201cContent-Type: application/json\u201d \\\n  --request POST \\\n  --data \u201c{"isTest": true, \u201cmetrics": [{"user_id": "1237", "metric_name": "test_metric", "id_type": "user_id", "metric_value": 90}, {"user_id": "4568", "metric_name": "ratio", "id_type": "stable_id", "numerator": 3, "denominator": 15}]}\u201d\n'})}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:"https://user-images.githubusercontent.com/101903926/179048336-ebdde45b-17e7-47ad-bb81-01f8f032b978.png",alt:"292825183_585502089655173_8192569048240569580_n"})}),"\n",(0,i.jsxs)(t.p,{children:["Finally, it's important to note that ",(0,i.jsx)(t.strong,{children:"Metrics Logstream"})," only appears if you're actively ingesting precomputed metrics, so if you're not seeing it appear at the bottom of your ",(0,i.jsx)(t.strong,{children:"Metrics Catalog"})," this means there is likely a connection or schema issue and Statsig is not receiving your precomputed metrics."]})]})}function g(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},28453:(e,t,s)=>{s.d(t,{R:()=>a,x:()=>o});var i=s(96540);const r={},n=i.createContext(r);function a(e){const t=i.useContext(n);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(n.Provider,{value:t},e.children)}}}]);