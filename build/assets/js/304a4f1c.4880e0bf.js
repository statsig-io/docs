"use strict";(self.webpackChunkstatsig_docs=self.webpackChunkstatsig_docs||[]).push([[58145],{19114:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>d});var n=i(74848),r=i(28453);const o={title:"Cohort Metrics",slug:"/metrics/hierarchical-id",sidebar_label:"Hierarchical ID",displayed_sidebar:"cloud",keywords:["owner:shubham"],last_update:{date:new Date("2025-09-18T00:00:00.000Z")}},s="Analysis with hierarchical ID",a={id:"metrics/hierarchical-id",title:"Cohort Metrics",description:'If your IDs have a "one-to-many" or "root-to-leaf" relationship, you can do two kinds of analysis',source:"@site/docs/metrics/hierarchical-id.md",sourceDirName:"metrics",slug:"/metrics/hierarchical-id",permalink:"/metrics/hierarchical-id",draft:!1,unlisted:!1,editUrl:"https://github.com/statsig-io/docs/edit/main/docs/metrics/hierarchical-id.md",tags:[],version:"current",lastUpdatedAt:17581536e5,frontMatter:{title:"Cohort Metrics",slug:"/metrics/hierarchical-id",sidebar_label:"Hierarchical ID",displayed_sidebar:"cloud",keywords:["owner:shubham"],last_update:{date:"2025-09-18T00:00:00.000Z"}},sidebar:"cloud"},c={},d=[];function l(e){const t={a:"a",h1:"h1",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"analysis-with-hierarchical-id",children:"Analysis with hierarchical ID"})}),"\n",(0,n.jsx)(t.p,{children:'If your IDs have a "one-to-many" or "root-to-leaf" relationship, you can do two kinds of analysis'}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:"You can choose your randomization unit to be either root or leaf, with our support of multiple IDs -- You can specify the different IDs in assignment, or provide an ID mapping table when you set up the experiment."}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:"You can choose your randomization unit to be root and do analysis on both roof and leaf. This doc covers how."}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:'For instance, consider Uber, where the unit of randomization is "drivers." Each driver may complete multiple "rides." To measure the impact of an experiment of \u201csending different notifications to different drivers\u201d on "revenue per ride," you should set up the "revenue per ride" metric in the Metrics Catalog as a ratio metric. The numerator is the sum of revenue and the denominator is the count of rides (or count distinct of ride_id, depending on your data model)'}),"\n",(0,n.jsx)(t.p,{children:"In the Stats Engine, we apply the delta method to calculate variance and confidence intervals."}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["For mean metrics, we store a value indicating the number of observations per ",(0,n.jsx)(t.strong,{children:"exposed"})," unit in the ",(0,n.jsx)(t.strong,{children:"records"})," column of the staging data. This serves as the denominator or cluster-size value for delta calculations."]}),"\n",(0,n.jsx)(t.li,{children:"For general ratio metrics, we track the two component metrics (the ratio and the denominator) as independent metrics and combine them during the pulse analysis to derive a single metric from them."}),"\n"]}),"\n",(0,n.jsxs)(t.p,{children:["For details on how we apply the delta method, visit: ",(0,n.jsx)(t.a,{href:"/stats-engine/methodologies/delta-method",children:"Statsig - Delta Method Methodology"}),"."]}),"\n",(0,n.jsx)(t.p,{children:"This logic also applies to analyzing event-level outcomes, such as average purchase value, where each session represents a leaf, but randomization occurs at the user level."})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},28453:(e,t,i)=>{i.d(t,{R:()=>s,x:()=>a});var n=i(96540);const r={},o=n.createContext(r);function s(e){const t=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),n.createElement(o.Provider,{value:t},e.children)}}}]);