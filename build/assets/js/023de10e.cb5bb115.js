"use strict";(self.webpackChunkstatsig_docs=self.webpackChunkstatsig_docs||[]).push([[10571],{55206:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>d,frontMatter:()=>a,metadata:()=>o,toc:()=>l});var n=s(74848),i=s(28453);const a={title:"Switchback Tests",sidebar_label:"Switchback Tests",slug:"/experiments-plus/switchback-tests",keywords:["owner:vm"],last_update:{date:new Date("2025-09-18T00:00:00.000Z")}},r="What is Switchback Testing?",o={id:"experiments-plus/switchback-tests",title:"Switchback Tests",description:"Switchback tests are an alternative experiment form, whereby an entire population is \u201cswitched\u201d back and forth between test and control treatments on a set cadence vs. being split and evenly divided between test and control for the duration of the experiment.",source:"@site/docs/experiments-plus/switchback-tests.md",sourceDirName:"experiments-plus",slug:"/experiments-plus/switchback-tests",permalink:"/experiments-plus/switchback-tests",draft:!1,unlisted:!1,editUrl:"https://github.com/statsig-io/docs/edit/main/docs/experiments-plus/switchback-tests.md",tags:[],version:"current",lastUpdatedAt:17581536e5,frontMatter:{title:"Switchback Tests",sidebar_label:"Switchback Tests",slug:"/experiments-plus/switchback-tests",keywords:["owner:vm"],last_update:{date:"2025-09-18T00:00:00.000Z"}},sidebar:"cloud",previous:{title:"Disable a Group",permalink:"/experiments-plus/disable-group"},next:{title:"A/A Tests",permalink:"/guides/aa-test"}},c={},l=[{value:"Example",id:"example",level:3},{value:"Methodology",id:"methodology",level:2},{value:"Event Attribution",id:"event-attribution",level:3},{value:"Bucket-level Metrics",id:"bucket-level-metrics",level:3},{value:"Variant-level Metrics",id:"variant-level-metrics",level:3},{value:"Deltas and Confidence Intervals",id:"deltas-and-confidence-intervals",level:3},{value:"Setup",id:"setup",level:2},{value:"Reading Results",id:"reading-results",level:2}];function h(e){const t={a:"a",admonition:"admonition",annotation:"annotation",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",math:"math",mi:"mi",mrow:"mrow",ol:"ol",p:"p",semantics:"semantics",span:"span",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"what-is-switchback-testing",children:"What is Switchback Testing?"})}),"\n",(0,n.jsx)(t.p,{children:"Switchback tests are an alternative experiment form, whereby an entire population is \u201cswitched\u201d back and forth between test and control treatments on a set cadence vs. being split and evenly divided between test and control for the duration of the experiment."}),"\n",(0,n.jsx)(t.p,{children:"Switchback tests are particularly common in marketplaces, whereby running a traditional A/B on one side- or a small %- of the marketplace would have an unintended consequence on the rest of the marketplace due to network effects, ultimately impacting experiment results."}),"\n",(0,n.jsx)(t.p,{children:"Another common use case for switchbacks occurs when applying different variants to different users is infeasible for fairness, legal, or logistical reasons."}),"\n",(0,n.jsx)(t.p,{children:"Switchback tests are often carried out across multiple \u201cbuckets\u201d, typically regions or other defined groups that are flipped between test and control treatments over the course of the experiment."}),"\n",(0,n.jsx)(t.h3,{id:"example",children:"Example"}),"\n",(0,n.jsx)(t.p,{children:"Let\u2019s say you are a rideshare platform and want to test pricing. You initially consider splitting your riders into two groups, one with the higher price and one with a lower price."}),"\n",(0,n.jsx)(t.p,{children:"However, you quickly notice that the riders with the lower price are requesting rides at a significantly higher rate, and sucking up all the available driver supply in a given area. This leaves the riders with higher prices with not only a higher ride estimate, but longer ETAs when they open up their app, making them even less likely to request."}),"\n",(0,n.jsxs)(t.p,{children:["When you look at your experiment results you\u2019re not sure if the decreased ride request rate in the higher price group was due to the higher prices they saw or the fact that their ETAs went up- your experiment results are polluted! You've inadvertently introduced ",(0,n.jsx)(t.em,{children:"bias"})," to your results via your experimental design."]}),"\n",(0,n.jsx)(t.p,{children:"In this scenario, you could consider running a Switchback test on your marketplace. To do this, you might switch 100% of your riders and drivers in a given metro in and out of the new pricing plan hourly and understand the impact on overall ride request rates during hours at which rider prices were higher vs. lower."}),"\n",(0,n.jsx)(t.h1,{id:"switchback-testing-on-statsig",children:"Switchback Testing on Statsig"}),"\n",(0,n.jsx)(t.h2,{id:"methodology",children:"Methodology"}),"\n",(0,n.jsx)(t.p,{children:"Our Switchback Testing methodology for computing results consists of 3 steps:"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsx)(t.li,{children:"Attribute events to the corresponding switchback bucket, where each bucket is defined by the time window and grouping attribute."}),"\n",(0,n.jsx)(t.li,{children:"Calculate the variant-level and bucket-level metrics based on the attributed events."}),"\n",(0,n.jsx)(t.li,{children:"Calculate the difference in means between test and control.  Use bootstrapping to obtain the confidence intervals."}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"event-attribution",children:"Event Attribution"}),"\n",(0,n.jsx)(t.p,{children:"Attribution of events to a particular bucket is based on the timestamp and unit_id of the exposure, the length of the attribution window, and the timestamp of subsequent events for that unit_id."}),"\n",(0,n.jsx)(t.p,{children:"For example: User 123 is exposed to bucket A at 9:15 am.  The test has an attribution window of 90 minutes.  This means all events triggered by user 123 between 9:15 am and 10:45 am will be included in the metric calculations for bucket A."}),"\n",(0,n.jsx)(t.h3,{id:"bucket-level-metrics",children:"Bucket-level Metrics"}),"\n",(0,n.jsx)(t.p,{children:"Once we have all the events corresponding to a bucket, we calculate the scorecard metrics derived from these events."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://github.com/statsig-io/docs/assets/101903926/adf0e2b0-0e4c-47b9-8a04-d0f01f130f7c",alt:"Screen Shot 2023-09-27 at 11 46 19 AM"})}),"\n",(0,n.jsx)(t.p,{children:"For sum and count metrics, we use the mean value per unit exposed to that bucket."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://github.com/statsig-io/docs/assets/101903926/8f234be9-7848-46fa-a84d-6d6c7facf51b",alt:"Screen Shot 2023-09-27 at 11 46 42 AM"})}),"\n",(0,n.jsx)(t.h3,{id:"variant-level-metrics",children:"Variant-level Metrics"}),"\n",(0,n.jsxs)(t.p,{children:["Similarly, we calculate the overall metric means for test and control by aggregating the values across all the buckets in that variant.  So if there are ",(0,n.jsx)(t.strong,{children:"M"})," buckets in the test group, the mean value of a ratio metric is given by:"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://github.com/statsig-io/docs/assets/101903926/8239da03-6f94-47b0-b9b5-39e87566f7fc",alt:"Screen Shot 2023-09-27 at 11 47 29 AM"})}),"\n",(0,n.jsx)(t.p,{children:"The mean of a sum or count metric would be:"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://github.com/statsig-io/docs/assets/101903926/220515f6-e0b0-4f64-a441-e5facdde5530",alt:"Screen Shot 2023-09-27 at 11 47 59 AM"})}),"\n",(0,n.jsx)(t.h3,{id:"deltas-and-confidence-intervals",children:"Deltas and Confidence Intervals"}),"\n",(0,n.jsx)(t.p,{children:"The treatment effect is calculated as:"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://github.com/statsig-io/docs/assets/101903926/1fb290c9-f253-4be0-9bef-b212f74f6e0a",alt:"Screen Shot 2023-09-27 at 11 48 35 AM"})}),"\n",(0,n.jsx)(t.p,{children:"The bootstrapped confidence intervals are obtained as follows:"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsx)(t.li,{children:"Collect a bootstrap sample with replacement from the set of test buckets and separately from the set of control buckets."}),"\n",(0,n.jsx)(t.li,{children:"Calculate the difference in means between test and control samples."}),"\n",(0,n.jsx)(t.li,{children:"Repeat steps one and two 10 thousand times.  This gives us a distribution of the metric deltas"}),"\n",(0,n.jsxs)(t.li,{children:["The 95% confidence interval is the range from the 2.5% quantile to the 97.5% quantile from the distribution of deltas in step three.  In general, the confidence interval with significance level ",(0,n.jsxs)(t.span,{className:"katex",children:[(0,n.jsx)(t.span,{className:"katex-mathml",children:(0,n.jsx)(t.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,n.jsxs)(t.semantics,{children:[(0,n.jsx)(t.mrow,{children:(0,n.jsx)(t.mi,{children:"\u03b1"})}),(0,n.jsx)(t.annotation,{encoding:"application/x-tex",children:"\\alpha"})]})})}),(0,n.jsx)(t.span,{className:"katex-html","aria-hidden":"true",children:(0,n.jsxs)(t.span,{className:"base",children:[(0,n.jsx)(t.span,{className:"strut",style:{height:"0.4306em"}}),(0,n.jsx)(t.span,{className:"mord mathnormal",style:{marginRight:"0.0037em"},children:"\u03b1"})]})})]})," is given by"]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://github.com/statsig-io/docs/assets/101903926/bea68643-3ade-4daf-a6fa-79e39a7274d7",alt:"Screen Shot 2023-09-27 at 11 49 06 AM"})}),"\n",(0,n.jsx)(t.h2,{id:"setup",children:"Setup"}),"\n",(0,n.jsxs)(t.p,{children:["To set up a Switchback test on Statsig, when you create an experiment tap ",(0,n.jsx)(t.strong,{children:"Advanced Settings"})," \u2192 ",(0,n.jsx)(t.strong,{children:"Experiment Type"})," and select \u201cSwitchback Test\u201d."]}),"\n",(0,n.jsx)("img",{width:"495",alt:"Screen Shot 2023-09-26 at 6 59 01 AM",src:"https://github.com/statsig-io/docs/assets/101903926/359bcb6f-5cc4-4126-ac78-354c8f3b0474"}),"\n",(0,n.jsx)(t.p,{children:"There are a few new aspects of experiment configuration when setting up a Switchback test, namely-"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Targeting"}),"- The defined population(s) you will be running your experiment on."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Schedule"}),"- The switching frequency and starting treatments for different pre-defined populations."]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"There are a few different ways to define targeting, namely-"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Targeting Gate"}),"- Specify a targeting gate to define your target experiment population, similar to any other experiment on Statsig."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Bucketing Method"}),"- Bucket users based on either pre-defined buckets or randomized across an ID type."]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://github.com/statsig-io/docs/assets/101903926/a3e951fb-9a62-48be-9fec-59fcc2003d17",alt:"Screen Shot 2023-10-04 at 3 12 05 PM"})}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Buckets"})," enable you to specify pre-defined buckets, such as ",(0,n.jsx)(t.em,{children:"Country"}),", ",(0,n.jsx)(t.em,{children:"Locale"}),", or a ",(0,n.jsx)(t.em,{children:"Custom Field"})," you log. This is useful when you have a few, pre-defined populations you want to switch in and out of Test/ Control over the course of the experiment."]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://github.com/statsig-io/docs/assets/101903926/e53ea760-91c1-40e3-85fd-3da3d886d1ed",alt:"Screen Shot 2023-10-04 at 11 44 26 AM"})}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"ID Type"})," lets you specify an ID type to randomize across, e.g. choosing a custom ID such as CityID will automatically randomize different CityIDs across Treatment/ Control over the course of the different switchback windows. This is useful if you have a very large or dynamic number of experiment units you want to randomize across over the course of the experiment."]}),"\n",(0,n.jsx)(t.admonition,{type:"info",children:(0,n.jsxs)(t.p,{children:["Randomized bucketing is an advanced feature, please reach out to our ",(0,n.jsx)(t.a,{href:"mailto:support@statsig.com",children:"support team"}),", your sales contact, or via our slack channel if you want this enabled."]})}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://github.com/statsig-io/docs/assets/101903926/3c79d1c1-8b15-401c-9635-6b3d4b08d416",alt:"Screen Shot 2023-10-04 at 11 44 44 AM"})}),"\n",(0,n.jsxs)(t.p,{children:["Depending on which bucketing method you've chosen, the ",(0,n.jsx)(t.strong,{children:"Schedule"})," section of experiment setup enables you to configure-"]}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Start time"}),"\n",(0,n.jsx)(t.li,{children:"Duration (in days)"}),"\n",(0,n.jsx)(t.li,{children:"Assignment window size (in minutes)"}),"\n",(0,n.jsx)(t.li,{children:"Burn-in/ burn-out periods (in minutes)"}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.em,{children:"(Pre-defined bucketing only)"})," Starting phase (treatment group) for each bucket"]}),"\n"]}),"\n",(0,n.jsx)("img",{width:"1019",alt:"Screen Shot 2023-09-26 at 6 50 36 AM",src:"https://github.com/statsig-io/docs/assets/101903926/67ed1aee-f5aa-49b6-b684-a9919b59d5ca"}),"\n",(0,n.jsx)(t.p,{children:"Burn-in/ burn-out periods enable you to define periods at both the beginning and end of your switchback windows to discard exposures from analysis. This is typically leveraged when there are risks of \u201cbleed over effect\u201d from the previous treatment while a population is switching between test and control."}),"\n",(0,n.jsx)(t.h2,{id:"reading-results",children:"Reading Results"}),"\n",(0,n.jsx)(t.p,{children:"Both Diagnostics and Pulse metric lifts results for Switchback tests will look and feel like Statsig\u2019s traditional A/B tests, with a few modifications-"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"No hourly Pulse-"})," At the beginning of a traditional A/B/n experiment on Statsig, you can start to see hourly Pulse results flow through within ~10-15 minutes of experiment start. Given in a Switchback you will only see either ",(0,n.jsx)(t.em,{children:"all"})," Test or ",(0,n.jsx)(t.em,{children:"all"})," Control exposures right at experiment start, we have disabled Hourly Pulse until you have a meaningful amount of data. However, in lieu of Hourly Pulse you can still leverage the more real-time ",(0,n.jsx)(t.strong,{children:"Diagnostics"})," tab to verify checks are coming in and bucketing as expected."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"No time-series"}),"- The Daily and Days Since First Exposure time-series are not available for Switchback tests.  This is due to the bootstrapping methodology used to obtain the statistics, which relies on pooling all the available days together in order to have enough statistical power."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"No dimension breakdown"}),"- Breaking down a metric by user property or event property is not available for Switchback tests."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Advanced statistical techniques-"})," CUPED and Sequential Testing are not yet available on Switchback tests."]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:"https://github.com/statsig-io/docs/assets/101903926/657cce2d-22b0-41cf-8b43-2d3f05cfefb8",alt:"Screen Shot 2023-09-27 at 10 30 21 AM"})})]})}function d(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}},28453:(e,t,s)=>{s.d(t,{R:()=>r,x:()=>o});var n=s(96540);const i={},a=n.createContext(i);function r(e){const t=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),n.createElement(a.Provider,{value:t},e.children)}}}]);