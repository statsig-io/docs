```python
from statsig_python_core import Statsig, StatsigOptions # note, import statement has underscores while install has dashes

options = StatsigOptions()
options.environment = "development"

statsig = Statsig("secret-key", options)
statsig.initialize().wait()

# If you're running this in a script, be sure to wait for shutdown at the end to flush event logs to statsig
statsig.shutdown().wait()
```

`initialize` will perform a network request. After `initialize` completes, virtually all SDK operations will be synchronous (See [Evaluating Feature Gates in the Statsig SDK](https://blog.statsig.com/evaluating-feature-gates-in-the-statsig-sdk-a6f8881a1ad8)). The SDK will fetch updates from Statsig in the background, independently of your API calls.

### ⚠️ Warning: Process Forking and WSGI Servers

**Important:** Never fork processes after calling `statsig.initialize()`. Doing so will put Statsig in an undefined state and may cause deadlock.

The Python Core SDK uses internal threading and async runtime components that do not work correctly when copied across process boundaries. When a process forks after initialization, these components can become corrupted, leading to:

- Deadlocks in event logging
- Hanging initialization calls
- Unpredictable SDK behavior
- Silent failures in feature evaluation

### Initializing with WSGI servers

For production deployments using WSGI servers like uWSGI or Gunicorn, ensure Statsig is initialized **after** the worker processes are forked, not in the main process.

<Tabs>
<Tab title="uWSGI">

#### ✅ Correct: uWSGI example

```python expandable
# app.py
from statsig_python_core import Statsig, StatsigOptions
from flask import Flask

app = Flask(__name__)
statsig = None

def init_statsig():
    global statsig
    if statsig is None:
        options = StatsigOptions()
        options.environment = "production"
        statsig = Statsig("your-server-secret-key", options)
        statsig.initialize().wait()

# Initialize in each worker process
@app.before_first_request
def before_first_request():
    init_statsig()

@app.route('/')
def index():
    # Use statsig here
    return "Hello World"
```

```ini
# uwsgi.ini
[uwsgi]
module = app:app
master = true
processes = 4
# Statsig will be initialized in each worker process
```

</Tab>

<Tab title="Gunicorn">

#### ✅ Correct: Gunicorn example

```python
# gunicorn_config.py
def post_fork(server, worker):
    # Initialize Statsig after worker process is forked
    from app import init_statsig
    init_statsig() # as defined above

# ...app.py
```

```bash
# Start Gunicorn with post-fork hook
gunicorn --config gunicorn_config.py app:app
```

</Tab>

<Tab title="FastAPI">

#### ✅ Correct: FastAPI example

```python expandable
from fastapi import FastAPI
from statsig_python_core import Statsig, StatsigOptions

app = FastAPI()
statsig = None

@app.on_event("startup")
async def startup_event():
    global statsig
    options = StatsigOptions()
    options.environment = "production"
    statsig = Statsig("your-server-secret-key", options)
    statsig.initialize().wait()

@app.on_event("shutdown")
async def shutdown_event():
    if statsig:
        statsig.shutdown().wait()

@app.get("/")
async def root():
    # Use statsig here
    return {"message": "Hello World"}
```

</Tab>
</Tabs>

